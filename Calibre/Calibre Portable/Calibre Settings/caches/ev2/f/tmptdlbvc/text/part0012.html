{"ns_map":["http://www.w3.org/1999/xhtml"],"tree":[0,[1,[3149],[3150],[3151],[3152]],[2,[3,[4,[3144,[3145,[3146,[3147],[3148]]]]],[5],[6],[7,[2907],[2908],[2909,[3142],[3143]],[2910,[3105],[3106],[3107,[3141]],[3108,[3137,[3138,[3139],[3140]]]],[3109,[3135],[3136]],[3110,[3129,[3130,[3131],[3132],[3133],[3134]]]],[3111,[3127],[3128]],[3112,[3123,[3124,[3125],[3126]]]],[3113],[3114],[3115,[3116],[3117,[3118],[3119],[3120,[3122]],[3121]]]],[2911,[3085],[3086,[3103],[3104]],[3087,[3098,[3099,[3100],[3101],[3102]]]],[3088,[3094],[3095],[3096],[3097]],[3089,[3090,[3091,[3092],[3093]]]]],[2912,[3047],[3048],[3049,[3084]],[3050,[3080,[3081,[3082],[3083]]]],[3051,[3079]],[3052,[3075,[3076,[3077],[3078]]]],[3053,[3074]],[3054,[3070,[3071,[3072],[3073]]]],[3055],[3056,[3068],[3069]],[3057,[3064,[3065,[3066],[3067]]]],[3058,[3063]],[3059,[3060],[3061,[3062]]]],[2913,[3002],[3003,[3046]],[3004,[3041,[3042,[3043],[3044],[3045]]]],[3005,[3040]],[3006,[3036,[3037,[3038],[3039]]]],[3007,[3034],[3035]],[3008,[3029,[3030,[3031],[3032],[3033]]]],[3009,[3024],[3025],[3026],[3027],[3028]],[3010,[3020,[3021,[3022],[3023]]]],[3011,[3019]],[3012,[3015,[3016,[3017],[3018]]]],[3013,[3014]]],[2914,[2915],[2916],[2917,[2964],[2965,[3001]],[2966,[2998,[3000]],[2999]],[2967,[2997]],[2968,[2993,[2994,[2995],[2996]]]],[2969,[2988],[2989],[2990],[2991],[2992]],[2970,[2984,[2985,[2986],[2987]]]],[2971,[2983]],[2972,[2979,[2980,[2981],[2982]]]],[2973,[2974],[2975],[2976],[2977],[2978]]],[2918,[2942],[2943,[2962],[2963]],[2944,[2956,[2957,[2958],[2959],[2960],[2961]]]],[2945,[2953],[2954],[2955]],[2946,[2948,[2949,[2950],[2951],[2952]]]],[2947]],[2919,[2920],[2921,[2940],[2941]],[2922,[2936,[2937,[2938],[2939]]]],[2923,[2935]],[2924,[2933],[2934]],[2925,[2927,[2928,[2929],[2930],[2931],[2932]]]],[2926]]]],[8,[2822],[2823,[2904],[2905],[2906]],[2824,[2900,[2901,[2902],[2903]]]],[2825,[2899]],[2826],[2827,[2857],[2858,[2896],[2897],[2898]],[2859,[2893,[2894,[2895]]]],[2860],[2861,[2890,[2891,[2892]]]],[2862,[2888],[2889]],[2863,[2885,[2886,[2887]]]],[2864,[2883],[2884]],[2865,[2880,[2881,[2882]]]],[2866],[2867,[2877,[2878,[2879]]]],[2868,[2874],[2875],[2876]],[2869,[2871,[2872,[2873]]]],[2870]],[2828,[2829],[2830,[2855],[2856]],[2831,[2852,[2853,[2854]]]],[2832,[2851]],[2833,[2848,[2849,[2850]]]],[2834],[2835,[2845,[2846,[2847]]]],[2836,[2844]],[2837,[2842],[2843]],[2838,[2839],[2840],[2841]]]],[9,[2641],[2642,[2821]],[2643],[2644,[2743],[2744,[2820]],[2745,[2816,[2817,[2818],[2819]]]],[2746,[2814],[2815]],[2747,[2810,[2811,[2812],[2813]]]],[2748],[2749,[2805,[2806,[2807],[2808],[2809]]]],[2750,[2804]],[2751,[2800,[2801,[2802],[2803]]]],[2752,[2798],[2799]],[2753,[2786,[2787,[2788],[2789],[2790],[2791],[2792],[2793],[2794],[2795],[2796],[2797]]]],[2754],[2755,[2784],[2785]],[2756,[2767,[2768,[2769],[2770],[2771],[2772],[2773],[2774],[2775],[2776],[2777],[2778],[2779],[2780],[2781],[2782],[2783]]]],[2757,[2766]],[2758,[2761,[2762,[2763],[2764],[2765]]]],[2759,[2760]]],[2645,[2712],[2713,[2741],[2742]],[2714],[2715,[2735,[2736,[2737],[2738],[2739],[2740]]]],[2716,[2732],[2733],[2734]],[2717,[2725,[2726,[2727],[2728],[2729],[2730],[2731]]]],[2718,[2724]],[2719,[2720,[2721,[2722],[2723]]]]],[2646,[2690],[2691,[2711]],[2692,[2694,[2695,[2696],[2697],[2698],[2699],[2700],[2701],[2702],[2703],[2704],[2705],[2706],[2707],[2708],[2709],[2710]]]],[2693]],[2647,[2648],[2649,[2689]],[2650],[2651,[2688]],[2652,[2686],[2687]],[2653,[2684],[2685]],[2654,[2680,[2681,[2682],[2683]]]],[2655,[2676],[2677],[2678],[2679]],[2656,[2670,[2671,[2672],[2673],[2674],[2675]]]],[2657,[2665],[2666],[2667],[2668],[2669]],[2658],[2659,[2661,[2662,[2663],[2664]]]],[2660]]],[10,[2532],[2533],[2534,[2621],[2622],[2623,[2637,[2638,[2639],[2640]]]],[2624,[2636]],[2625,[2633,[2634,[2635]]]],[2626,[2632]],[2627,[2629,[2630,[2631]]]],[2628]],[2535,[2604],[2605,[2619],[2620]],[2606,[2614,[2615,[2616],[2617],[2618]]]],[2607,[2613]],[2608,[2609,[2610,[2611],[2612]]]]],[2536,[2591],[2592,[2603]],[2593,[2599,[2600,[2601],[2602]]]],[2594],[2595,[2596,[2597,[2598]]]]],[2537,[2541],[2542,[2589],[2590]],[2543,[2584,[2585,[2586],[2587],[2588]]]],[2544,[2582],[2583]],[2545,[2578,[2579,[2580],[2581]]]],[2546,[2576],[2577]],[2547,[2571,[2572,[2573],[2574],[2575]]]],[2548],[2549,[2570]],[2550],[2551,[2566,[2567,[2568],[2569]]]],[2552],[2553,[2562,[2563,[2564],[2565]]]],[2554,[2560],[2561]],[2555,[2556,[2557,[2558],[2559]]]]],[2538,[2539],[2540]]],[11,[2444],[2445],[2446,[2481],[2482,[2531]],[2483,[2530]],[2484,[2524,[2525,[2526],[2527],[2528],[2529]]]],[2485,[2523]],[2486,[2522]],[2487,[2518,[2519,[2520],[2521]]]],[2488,[2517]],[2489,[2513,[2514,[2515],[2516]]]],[2490,[2510],[2511],[2512]],[2491,[2509]],[2492,[2507],[2508]],[2493,[2498,[2499,[2500],[2501],[2502],[2503],[2504],[2505],[2506]]]],[2494,[2495],[2496],[2497]]],[2447,[2448],[2449,[2478],[2479],[2480]],[2450,[2476],[2477]],[2451,[2472,[2473,[2474],[2475]]]],[2452,[2470],[2471]],[2453,[2469]],[2454,[2455],[2456,[2467],[2468]],[2457,[2465],[2466]],[2458,[2461,[2462,[2463],[2464]]]],[2459,[2460]]]]],[12,[2208],[2209],[2210],[2211,[2430],[2431],[2432],[2433,[2440,[2441,[2442],[2443]]]],[2434],[2435,[2437],[2438],[2439]],[2436]],[2212,[2353],[2354,[2428],[2429]],[2355,[2424],[2425],[2426],[2427]],[2356,[2420,[2421,[2422],[2423]]]],[2357,[2419]],[2358],[2359,[2395,[2396,[2397],[2398],[2399],[2400],[2401],[2402],[2403],[2404],[2405],[2406],[2407],[2408],[2409],[2410],[2411],[2412],[2413],[2414],[2415],[2416],[2417],[2418]]]],[2360,[2393],[2394]],[2361,[2388,[2389,[2390],[2391],[2392]]]],[2362,[2387]],[2363],[2364,[2384,[2385,[2386]]]],[2365],[2366,[2380,[2381,[2382],[2383]]]],[2367],[2368,[2376,[2377,[2378],[2379]]]],[2369],[2370,[2372,[2373,[2374],[2375]]]],[2371]],[2213,[2339],[2340],[2341,[2350,[2351,[2352]]]],[2342],[2343,[2347,[2348,[2349]]]],[2344,[2345],[2346]]],[2214,[2297],[2298],[2299,[2316,[2317,[2318],[2319],[2320],[2321],[2322],[2323],[2324],[2325],[2326],[2327],[2328],[2329],[2330],[2331],[2332],[2333],[2334],[2335],[2336],[2337],[2338]]]],[2300],[2301,[2313,[2314,[2315]]]],[2302],[2303,[2305,[2306,[2307],[2308],[2309],[2310],[2311],[2312]]]],[2304]],[2215,[2264],[2265,[2296]],[2266,[2293,[2294,[2295]]]],[2267,[2289],[2290],[2291],[2292]],[2268,[2278,[2279,[2280],[2281],[2282],[2283],[2284],[2285],[2286],[2287],[2288]]]],[2269,[2277]],[2270,[2272,[2273,[2274],[2275],[2276]]]],[2271]],[2216,[2217],[2218,[2263]],[2219,[2245],[2246,[2259],[2260],[2261],[2262]],[2247,[2254,[2255,[2256],[2257],[2258]]]],[2248,[2252],[2253]],[2249,[2250],[2251]]],[2220,[2234],[2235,[2243],[2244]],[2236,[2239,[2240,[2241],[2242]]]],[2237,[2238]]],[2221,[2222],[2223,[2231],[2232],[2233]],[2224,[2226,[2227,[2228],[2229],[2230]]]],[2225]]]],[13,[1756],[1757,[2206],[2207]],[1758,[2136],[2137,[2204],[2205]],[2138],[2139,[2179,[2180,[2181,[2202],[2203]],[2182,[2199,[2200],[2201]]],[2183,[2184,[2195,[2198]],[2196,[2197]]],[2185,[2191,[2194]],[2192,[2193]]],[2186,[2187,[2190]],[2188,[2189]]]]]]],[2140,[2166],[2167,[2178]],[2168],[2169,[2173,[2174,[2175],[2176],[2177]]]],[2170,[2171],[2172]]],[2141,[2152],[2153,[2164],[2165]],[2154,[2163]],[2155,[2159,[2160,[2161],[2162]]]],[2156,[2158]],[2157]],[2142,[2143],[2144,[2150],[2151]],[2145,[2146,[2147,[2148],[2149]]]]]],[1759,[2086],[2087],[2088,[2134,[2135]]],[2089,[2131],[2132],[2133]],[2090,[2129,[2130]]],[2091],[2092,[2128]],[2093,[2126,[2127]]],[2094,[2124],[2125]],[2095,[2122,[2123]]],[2096,[2121]],[2097,[2120]],[2098,[2118,[2119]]],[2099,[2116],[2117]],[2100,[2114,[2115]]],[2101,[2112],[2113]],[2102,[2110,[2111]]],[2103,[2109]],[2104,[2105],[2106],[2107],[2108]]],[1760,[1998],[1999,[2085]],[2000,[2084]],[2001,[2082,[2083]]],[2002,[2081]],[2003,[2057],[2058,[2073],[2074],[2075],[2076],[2077],[2078],[2079],[2080]],[2059,[2071,[2072]]],[2060,[2069],[2070]],[2061,[2062],[2063],[2064],[2065],[2066],[2067],[2068]]],[2004,[2040],[2041,[2056]],[2042,[2055]],[2043,[2053,[2054]]],[2044,[2050],[2051],[2052]],[2045,[2046],[2047],[2048],[2049]]],[2005,[2022],[2023,[2038],[2039]],[2024,[2036,[2037]]],[2025,[2033],[2034],[2035]],[2026,[2027],[2028],[2029],[2030],[2031],[2032]]],[2006,[2007],[2008,[2021]],[2009,[2010,[2011,[2018,[2019,[2020]]]],[2012,[2015,[2016,[2017]]]],[2013,[2014]]]]]],[1761,[1951],[1952,[1995],[1996],[1997]],[1953,[1991],[1992],[1993],[1994]],[1954,[1984,[1985,[1989,[1990]]],[1986,[1987,[1988]]]]],[1955,[1983]],[1956,[1981,[1982]]],[1957,[1979],[1980]],[1958,[1977,[1978]]],[1959,[1975],[1976]],[1960,[1974]],[1961,[1972,[1973]]],[1962,[1967],[1968],[1969],[1970],[1971]],[1963,[1964],[1965],[1966]]],[1762,[1927],[1928],[1929,[1948],[1949],[1950]],[1930],[1931,[1946,[1947]]],[1932,[1945]],[1933,[1943,[1944]]],[1934,[1942]],[1935,[1940,[1941]]],[1936,[1937],[1938],[1939]]],[1763,[1879],[1880,[1923],[1924],[1925],[1926]],[1881,[1895],[1896,[1920],[1921],[1922]],[1897,[1917],[1918],[1919]],[1898,[1915],[1916]],[1899,[1906],[1907],[1908],[1909],[1910],[1911],[1912],[1913],[1914]],[1900,[1904],[1905]],[1901,[1902,[1903]]]],[1882,[1883],[1884,[1890],[1891],[1892],[1893],[1894]],[1885,[1886],[1887],[1888],[1889]]]],[1764,[1765],[1766,[1877],[1878]],[1767,[1875],[1876]],[1768,[1769,[1770,[1771,[1870],[1871],[1872],[1873],[1874]],[1772,[1864,[1865],[1866],[1867],[1868],[1869]]],[1773,[1774,[1857,[1862,[1863]]],[1858],[1859],[1860],[1861]],[1775,[1846,[1855,[1856]]],[1847,[1854]],[1848,[1853]],[1849,[1852]],[1850,[1851]]],[1776,[1835,[1844,[1845]]],[1836,[1843]],[1837,[1842]],[1838,[1841]],[1839,[1840]]],[1777,[1823,[1833,[1834]]],[1824,[1832]],[1825,[1831]],[1826,[1830]],[1827,[1828,[1829]]]],[1778,[1812,[1821,[1822]]],[1813,[1820]],[1814,[1819]],[1815,[1818]],[1816,[1817]]],[1779,[1805,[1810,[1811]]],[1806],[1807],[1808],[1809]],[1780,[1794,[1803,[1804]]],[1795,[1802]],[1796,[1801]],[1797,[1800]],[1798,[1799]]],[1781,[1782,[1792,[1793]]],[1783,[1791]],[1784,[1790]],[1785,[1789]],[1786,[1787,[1788]]]]]]]]]],[14,[1231],[1232],[1233],[1234],[1235,[1467],[1468,[1755]],[1469],[1470,[1754]],[1471,[1747,[1748,[1749],[1750],[1751],[1752],[1753]]]],[1472,[1746]],[1473,[1734,[1735,[1736],[1737],[1738],[1739],[1740],[1741],[1742],[1743],[1744],[1745]]]],[1474,[1733]],[1475,[1724,[1725,[1726],[1727],[1728],[1729],[1730],[1731],[1732]]]],[1476,[1723]],[1477,[1719,[1720,[1721],[1722]]]],[1478,[1701],[1702,[1718]],[1703,[1708,[1709,[1710],[1711],[1712],[1713],[1714],[1715],[1716],[1717]]]],[1704,[1707]],[1705,[1706]]],[1479,[1688],[1689],[1690,[1698],[1699],[1700]],[1691,[1694,[1695,[1696],[1697]]]],[1692],[1693]],[1480,[1613],[1614],[1615,[1687]],[1616],[1617,[1686]],[1618,[1685]],[1619,[1679,[1680,[1681],[1682],[1683],[1684]]]],[1620,[1678]],[1621,[1674,[1675,[1676],[1677]]]],[1622,[1673]],[1623,[1672]],[1624,[1664,[1665,[1666],[1667],[1668],[1669],[1670],[1671]]]],[1625,[1662],[1663]],[1626,[1661]],[1627,[1660]],[1628,[1655,[1656,[1657],[1658],[1659]]]],[1629],[1630,[1652],[1653],[1654]],[1631,[1647,[1648,[1649],[1650],[1651]]]],[1632,[1646]],[1633,[1641,[1642,[1643],[1644],[1645]]]],[1634,[1640]],[1635,[1636,[1637,[1638],[1639]]]]],[1481,[1546],[1547],[1548],[1549,[1609,[1610,[1611],[1612]]]],[1550,[1605],[1606],[1607],[1608]],[1551,[1601,[1602,[1603],[1604]]]],[1552],[1553,[1593,[1594,[1595],[1596],[1597],[1598],[1599],[1600]]]],[1554],[1555],[1556,[1591],[1592]],[1557,[1587],[1588],[1589],[1590]],[1558,[1583,[1584,[1585],[1586]]]],[1559],[1560,[1574,[1575,[1576],[1577],[1578],[1579],[1580],[1581],[1582]]]],[1561,[1572],[1573]],[1562,[1568,[1569,[1570],[1571]]]],[1563,[1565],[1566],[1567]],[1564]],[1482,[1520],[1521,[1545]],[1522,[1544]],[1523,[1537,[1538,[1539],[1540],[1541],[1542],[1543]]]],[1524],[1525,[1535],[1536]],[1526,[1530,[1531,[1532],[1533],[1534]]]],[1527,[1528],[1529]]],[1483,[1484],[1485,[1519]],[1486,[1518]],[1487,[1513,[1514,[1515],[1516],[1517]]]],[1488],[1489,[1511],[1512]],[1490,[1510]],[1491,[1504,[1505,[1506],[1507],[1508],[1509]]]],[1492],[1493,[1500],[1501],[1502],[1503]],[1494,[1495,[1496,[1497],[1498],[1499]]]]]],[1236,[1367],[1368],[1369,[1466]],[1370,[1463,[1465]],[1464]],[1371],[1372,[1437],[1438,[1461],[1462]],[1439,[1457,[1460]],[1458,[1459]]],[1440,[1454],[1455],[1456]],[1441,[1445,[1446,[1451,[1452],[1453]]],[1447,[1450]],[1448,[1449]]]],[1442,[1443],[1444]]],[1373,[1374],[1375],[1376,[1433,[1434,[1435],[1436]]]],[1377,[1425],[1426],[1427],[1428],[1429],[1430],[1431],[1432]],[1378],[1379,[1421,[1424]],[1422,[1423]]],[1380,[1416],[1417],[1418],[1419],[1420]],[1381,[1412,[1413,[1414],[1415]]]],[1382,[1408],[1409],[1410],[1411]],[1383,[1405,[1407]],[1406]],[1384,[1404]],[1385,[1399,[1400,[1401],[1402],[1403]]]],[1386,[1396,[1398]],[1397]],[1387,[1388],[1389],[1390],[1391],[1392],[1393],[1394],[1395]]]],[1237,[1238],[1239],[1240,[1318],[1319,[1364],[1365],[1366]],[1320,[1361],[1362],[1363]],[1321],[1322],[1323,[1357,[1358,[1359],[1360]]]],[1324,[1355],[1356]],[1325,[1351,[1352,[1353],[1354]]]],[1326],[1327,[1349],[1350]],[1328,[1347],[1348]],[1329],[1330,[1341,[1342,[1343],[1344],[1345],[1346]]]],[1331],[1332,[1333],[1334],[1335],[1336],[1337],[1338],[1339],[1340]]],[1241,[1242],[1243],[1244],[1245],[1246,[1312,[1313,[1314],[1315],[1316],[1317]]]],[1247,[1310],[1311]],[1248,[1304,[1305,[1306],[1307],[1308],[1309]]]],[1249],[1250,[1296],[1297],[1298],[1299],[1300],[1301],[1302],[1303]],[1251,[1292,[1293,[1294],[1295]]]],[1252],[1253,[1287,[1288,[1289],[1290],[1291]]]],[1254,[1284],[1285],[1286]],[1255,[1279,[1280,[1281],[1282],[1283]]]],[1256,[1277],[1278]],[1257,[1276]],[1258,[1272],[1273],[1274],[1275]],[1259,[1268,[1269,[1270],[1271]]]],[1260,[1266],[1267]],[1261,[1262,[1263,[1264],[1265]]]]]]],[15,[1070],[1071,[1230]],[1072,[1228],[1229]],[1073],[1074],[1075,[1227]],[1076,[1223,[1224,[1225],[1226]]]],[1077,[1222]],[1078],[1079,[1218,[1219,[1220],[1221]]]],[1080],[1081,[1216,[1217]]],[1082],[1083,[1212,[1213,[1214],[1215]]]],[1084,[1209],[1210],[1211]],[1085,[1196,[1197,[1198],[1199],[1200],[1201],[1202],[1203],[1204],[1205],[1206],[1207],[1208]]]],[1086,[1194],[1195]],[1087,[1190,[1191,[1192],[1193]]]],[1088,[1189]],[1089,[1184,[1185,[1186],[1187],[1188]]]],[1090,[1182],[1183]],[1091,[1178,[1179,[1180],[1181]]]],[1092,[1176],[1177]],[1093,[1171,[1172,[1173],[1174],[1175]]]],[1094,[1170]],[1095],[1096,[1165,[1166,[1167],[1168],[1169]]]],[1097],[1098,[1163,[1164]]],[1099,[1161],[1162]],[1100,[1157,[1158,[1159],[1160]]]],[1101],[1102,[1152,[1153,[1154],[1155],[1156]]]],[1103,[1151]],[1104,[1146,[1147,[1148],[1149],[1150]]]],[1105,[1145]],[1106,[1140,[1141,[1142],[1143],[1144]]]],[1107,[1138,[1139]]],[1108,[1137]],[1109,[1130,[1131,[1132],[1133],[1134],[1135],[1136]]]],[1110,[1128],[1129]],[1111,[1122,[1123,[1124],[1125],[1126],[1127]]]],[1112,[1121]],[1113,[1116,[1117,[1118],[1119],[1120]]]],[1114,[1115]]],[16,[986],[987],[988,[1045],[1046,[1068],[1069]],[1047,[1064,[1065,[1066],[1067]]]],[1048,[1062],[1063]],[1049,[1056],[1057],[1058],[1059],[1060],[1061]],[1050,[1052,[1053,[1054],[1055]]]],[1051]],[989,[990],[991,[1043],[1044]],[992,[1040],[1041],[1042]],[993,[1034,[1035,[1036],[1037],[1038],[1039]]]],[994,[1033]],[995,[1029,[1030,[1031],[1032]]]],[996,[1028]],[997,[1024,[1025,[1026],[1027]]]],[998],[999,[1020,[1021,[1022],[1023]]]],[1000,[1019]],[1001,[1015,[1016,[1017],[1018]]]],[1002,[1013],[1014]],[1003,[1008,[1009,[1010],[1011],[1012]]]],[1004,[1005],[1006],[1007]]]],[17,[526],[527],[528],[529],[530,[929],[930],[931,[985]],[932,[981,[982,[983],[984]]]],[933],[934,[980]],[935,[976,[977,[978],[979]]]],[936,[975]],[937,[971,[972,[973],[974]]]],[938,[970]],[939,[967,[968,[969]]]],[940,[965],[966]],[941,[961,[962,[963],[964]]]],[942,[960]],[943,[958],[959]],[944,[954,[955,[956],[957]]]],[945],[946,[949,[950,[951],[952],[953]]]],[947,[948]]],[531,[897],[898],[899,[920,[921,[922],[923],[924],[925],[926],[927],[928]]]],[900,[917],[918],[919]],[901,[912,[913,[914],[915],[916]]]],[902,[911]],[903,[909],[910]],[904,[905,[906,[907],[908]]]]],[532,[642],[643],[644,[822],[823],[824,[895],[896]],[825,[890,[891,[892],[893],[894]]]],[826,[886],[887],[888],[889]],[827,[881,[882,[883],[884],[885]]]],[828],[829,[880]],[830,[876,[877,[878],[879]]]],[831,[872],[873],[874],[875]],[832,[867,[868,[869],[870],[871]]]],[833,[866]],[834,[865]],[835,[861,[862,[863],[864]]]],[836,[860]],[837,[855,[856,[857],[858],[859]]]],[838,[854]],[839,[850,[851,[852],[853]]]],[840,[849]],[841,[845,[846,[847],[848]]]],[842,[843],[844]]],[645,[762],[763],[764],[765,[821]],[766,[820]],[767],[768,[816,[817,[818],[819]]]],[769,[814],[815]],[770,[810,[811,[812],[813]]]],[771,[809]],[772,[802,[803,[804],[805],[806],[807],[808]]]],[773],[774,[798,[799,[800],[801]]]],[775,[796],[797]],[776,[792,[793,[794],[795]]]],[777,[791]],[778],[779,[787,[788,[789],[790]]]],[780],[781,[783,[784,[785],[786]]]],[782]],[646,[737],[738],[739,[758,[759,[760],[761]]]],[740],[741,[755],[756],[757]],[742,[751,[752,[753],[754]]]],[743],[744],[745,[747,[748,[749],[750]]]],[746]],[647,[648],[649],[650],[651],[652,[733,[734,[735],[736]]]],[653],[654,[732]],[655,[728,[729,[730],[731]]]],[656,[724],[725],[726],[727]],[657],[658,[723]],[659,[716,[717,[718],[719],[720],[721],[722]]]],[660],[661,[699,[700,[701],[702],[703],[704],[705],[706],[707],[708],[709],[710],[711],[712],[713],[714],[715]]]],[662,[688,[689,[698]],[690,[697]],[691,[696]],[692,[695]],[693,[694]]]],[663],[664,[687]],[665,[685],[686]],[666],[667,[681,[682,[683],[684]]]],[668,[680]],[669,[671,[672,[673],[674],[675],[676],[677],[678],[679]]]],[670]]],[533,[597],[598],[599,[617],[618,[641]],[619],[620,[636,[637,[638],[639],[640]]]],[621],[622,[631,[632,[633],[634],[635]]]],[623],[624,[626,[627,[628],[629],[630]]]],[625]],[600,[601],[602,[616]],[603,[607,[608,[609],[610],[611],[612],[613],[614],[615]]]],[604,[605],[606]]]],[534,[535],[536],[537],[538,[588,[589,[590],[591],[592],[593],[594],[595],[596]]]],[539,[587]],[540,[579,[580,[581],[582],[583],[584],[585],[586]]]],[541],[542,[578]],[543,[573,[574,[575],[576],[577]]]],[544,[572]],[545,[567,[568,[569],[570],[571]]]],[546],[547,[563,[564,[565],[566]]]],[548,[562]],[549,[558,[559,[560],[561]]]],[550,[554],[555],[556],[557]],[551,[553]],[552]]],[18,[421],[422],[423,[525]],[424,[522],[523],[524]],[425],[426,[518,[519,[520],[521]]]],[427,[517]],[428,[513,[514,[515],[516]]]],[429,[510],[511],[512]],[430,[509]],[431,[508]],[432,[502,[503,[504],[505],[506],[507]]]],[433,[501]],[434],[435,[497,[498,[499],[500]]]],[436],[437,[493],[494],[495],[496]],[438,[489,[490,[491],[492]]]],[439,[488]],[440,[484,[485,[486],[487]]]],[441,[483]],[442,[482]],[443,[478,[479,[480],[481]]]],[444,[477]],[445,[473,[474,[475],[476]]]],[446],[447,[469,[470,[471],[472]]]],[448,[464],[465],[466],[467],[468]],[449,[460,[461,[462],[463]]]],[450,[458],[459]],[451,[454,[455,[456],[457]]]],[452,[453]]],[19,[284],[285],[286,[420]],[287,[419]],[288,[418]],[289],[290,[414,[415,[416],[417]]]],[291],[292,[412,[413]]],[293],[294,[407,[408,[409],[410],[411]]]],[295,[405,[406]]],[296,[403],[404]],[297,[398,[399,[400],[401],[402]]]],[298],[299,[394,[395,[396],[397]]]],[300],[301,[392],[393]],[302,[387,[388,[389],[390],[391]]]],[303,[382,[383,[384],[385],[386]]]],[304,[380,[381]]],[305,[376],[377],[378],[379]],[306,[372,[373,[374],[375]]]],[307,[370,[371]]],[308],[309],[310,[362,[363,[364],[365],[366],[367],[368],[369]]]],[311,[360],[361]],[312,[355,[356,[357],[358],[359]]]],[313,[353],[354]],[314,[349,[350,[351],[352]]]],[315,[348]],[316,[344,[345,[346],[347]]]],[317,[342],[343]],[318,[340,[341]]],[319,[337],[338],[339]],[320,[333,[334,[335],[336]]]],[321,[330],[331],[332]],[322],[323,[325,[326,[327],[328],[329]]]],[324]],[20,[24],[25],[26],[27,[272,[273,[283]],[274,[282]],[275,[281]],[276,[280]],[277,[278,[279]]]]],[28],[29,[268,[269,[270],[271]]]],[30,[266],[267]],[31,[262,[263,[264],[265]]]],[32,[260],[261]],[33,[254,[255,[256],[257],[258],[259]]]],[34,[135],[136,[253]],[137,[252]],[138,[242,[243,[244],[245],[246],[247],[248],[249],[250],[251]]]],[139,[231,[232,[241]],[233,[240]],[234,[239]],[235,[238]],[236,[237]]]],[140,[230]],[141,[192,[193,[194,[228],[229]],[195,[225,[226],[227]]],[196,[197,[219,[223,[224]]],[220,[221,[222]]]],[198,[213,[217,[218]]],[214,[215,[216]]]],[199,[207,[211,[212]]],[208,[209,[210]]]],[200,[201,[205,[206]]],[202,[203,[204]]]]]]]],[142,[190],[191]],[143,[180,[181,[188,[189]]],[182,[186,[187]]],[183,[184,[185]]]]],[144,[177],[178],[179]],[145],[146],[147,[169,[170,[171],[172],[173],[174],[175],[176]]]],[148,[158,[159,[166],[167],[168]],[160,[164],[165]],[161,[162],[163]]]],[149,[157]],[150,[155,[156]]],[151,[152],[153],[154]]],[35,[36],[37,[133],[134]],[38,[122,[123,[129,[130],[131],[132]]],[124,[127,[128]]],[125,[126]]]],[39],[40,[70,[71,[72],[73],[74],[75],[76],[77],[78],[79],[80],[81],[82],[83],[84],[85],[86],[87],[88],[89],[90],[91],[92],[93],[94],[95],[96],[97],[98],[99],[100],[101],[102],[103],[104],[105],[106],[107],[108],[109],[110],[111],[112],[113],[114],[115],[116],[117],[118],[119],[120],[121]]]],[41,[57,[58,[68],[69]],[59,[66],[67]],[60,[64],[65]],[61,[62],[63]]]],[42,[55],[56]],[43,[51,[52,[53],[54]]]],[44],[45,[47,[48,[49],[50]]]],[46]]],[21,[22],[23]]]]],"tag_map":[{"a":[["lang","en"]],"n":"html"},{"x":"\n    ","n":"head","l":"\n  "},{"a":[["class","calibre1 pcalibre1 pcalibre"]],"x":"\n","n":"body","l":"\n"},{"a":[["class","chapter pcalibre1 pcalibre"],["id","ch07-git-tools"],["title","Git 工具"],["type","chapter"]],"x":"\n","n":"section","l":"\n"},{"a":[["class","chapter pcalibre1 pcalibre"],["id","BE6O2-78ecc950e459438e8d0462081a6fa7a8"]],"x":"\n","n":"header","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"现在，你已经学习了管理或者维护 Git 仓库、实现代码控制所需的大多数日常命令和工作流程。\n你已经尝试了跟踪和提交文件的基本操作，并且发挥了暂存区和轻量级的分支及合并的威力。","n":"p","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"接下来你将学习一些 Git 的强大功能，这些功能你可能并不会在日常操作中使用，但在某些时候你可能会需要。","n":"p","l":"\n"},{"a":[["class","chapter pcalibre1 pcalibre"],["title","选择修订版本"]],"x":"\n","n":"section","l":"\n"},{"a":[["class","chapter pcalibre1 pcalibre"],["title","交互式暂存"]],"x":"\n","n":"section","l":"\n"},{"a":[["class","chapter pcalibre1 pcalibre"],["title","储藏与清理"]],"x":"\n","n":"section","l":"\n"},{"a":[["class","chapter pcalibre1 pcalibre"],["title","签署工作"]],"x":"\n","n":"section","l":"\n"},{"a":[["class","chapter pcalibre1 pcalibre"],["title","搜索"]],"x":"\n","n":"section","l":"\n"},{"a":[["class","chapter pcalibre1 pcalibre"],["title","重写历史"]],"x":"\n","n":"section","l":"\n"},{"a":[["class","chapter pcalibre1 pcalibre"],["title","重置揭密"]],"x":"\n","n":"section","l":"\n"},{"a":[["class","chapter pcalibre1 pcalibre"],["title","高级合并"]],"x":"\n","n":"section","l":"\n"},{"a":[["class","chapter pcalibre1 pcalibre"],["title","Rerere"]],"x":"\n","n":"section","l":"\n"},{"a":[["class","chapter pcalibre1 pcalibre"],["title","使用 Git 调试"]],"x":"\n","n":"section","l":"\n"},{"a":[["class","chapter pcalibre1 pcalibre"],["title","子模块"]],"x":"\n","n":"section","l":"\n"},{"a":[["class","chapter pcalibre1 pcalibre"],["title","打包"]],"x":"\n","n":"section","l":"\n"},{"a":[["class","chapter pcalibre1 pcalibre"],["title","替换"]],"x":"\n","n":"section","l":"\n"},{"a":[["class","chapter pcalibre1 pcalibre"],["title","凭证存储"]],"x":"\n","n":"section","l":"\n"},{"a":[["class","chapter pcalibre1 pcalibre"],["title","总结"]],"x":"\n","n":"section","l":"\n"},{"a":[["class","calibre6 pcalibre1 pcalibre"],["id","_总结_2"]],"x":"总结","n":"h2","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"你已经接触了很多能够精确地操控提交和暂存区的高级工具。\n当你碰到问题时，你应该可以很容易找出是哪个分支在什么时候由谁引入了它们。\n如果你想在项目中使用子项目，你也已经知道如何来满足这些需求。\n到此，你应该能毫无压力地在命令行中使用 Git 来完成日常中的大部分事情。","n":"p","l":"\n"},{"a":[["class","calibre6 pcalibre1 pcalibre"],["id","r_credential_caching"]],"x":"凭证存储","n":"h2","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"\n\n如果你使用的是 SSH 方式连接远端，并且设置了一个没有口令的密钥，这样就可以在不输入用户名和密码的情况下安全地传输数据。\n然而，这对 HTTP 协议来说是不可能的 —— 每一个连接都是需要用户名和密码的。\n这在使用双重认证的情况下会更麻烦，因为你需要输入一个随机生成并且毫无规律的 token 作为密码。","n":"p","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"幸运的是，Git 拥有一个凭证系统来处理这个事情。\n下面有一些 Git 的选项：","n":"p","l":"\n"},{"a":[["class","content pcalibre1 pcalibre"]],"x":"\n","n":"div","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"你可以设置 Git 的配置来选择上述的一种方式","n":"p","l":"\n"},{"a":[["class","listing pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"部分辅助工具有一些选项。\n“store” 模式可以接受一个 ","n":"p","l":"\n"},{"a":[["class","listing pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"Git 甚至允许你配置多个辅助工具。\n当查找特定服务器的凭证时，Git 会按顺序查询，并且在找到第一个回答时停止查询。\n当保存凭证时，Git 会将用户名和密码发送给 ","n":"p","l":"\n"},{"a":[["class","listing pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","chapter pcalibre1 pcalibre"],["title","底层实现"]],"x":"\n","n":"section","l":"\n"},{"a":[["class","chapter pcalibre1 pcalibre"],["title","自定义凭证缓存"]],"x":"\n","n":"section","l":"\n"},{"a":[["class","pcalibre1 calibre7 pcalibre"],["id","_自定义凭证缓存"]],"x":"自定义凭证缓存","n":"h3","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"已经知道 ","n":"p","l":"\n"},{"a":[["class","content pcalibre1 pcalibre"]],"x":"\n","n":"div","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"我们再一次使用 Ruby 来编写这个扩展，但只要 Git 能够执行最终的程序，任何语言都是可以的。\n这是我们的凭证辅助工具的完整代码：","n":"p","l":"\n"},{"a":[["class","listing pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","content pcalibre1 pcalibre"]],"x":"\n","n":"div","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"我们把这个辅助工具保存为 ","n":"p","l":"\n"},{"a":[["class","listing pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"由于这个的名字是 “git-” 开头，所以我们可以在配置值中使用简便的语法：","n":"p","l":"\n"},{"a":[["class","listing pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"正如你看到的，扩展这个系统是相当简单的，并且可以为你和你的团队解决一些常见问题。","n":"p","l":"\n"},{"a":[["class","source pcalibre1 pcalibre"]],"n":"pre","l":"\n"},{"a":[["class","calibre13 pcalibre1 pcalibre"]],"n":"code"},{"a":[["class","calibre14 pcalibre1 pcalibre"]],"n":"span"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git config --global credential.helper read-only --file /mnt/shared/creds"},{"a":[["class","source pcalibre1 pcalibre"]],"n":"pre","l":"\n"},{"a":[["class","calibre13 pcalibre1 pcalibre"]],"n":"code"},{"a":[["class","calibre14 pcalibre1 pcalibre"]],"n":"span"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git credential-read-only --file=/mnt/shared/creds get\nprotocol=https\nhost=mygithost\n\nprotocol=https\nhost=mygithost\nusername=bob\npassword=s3cre7"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"git-credential-read-only","n":"code","l":"，放到我们的 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"PATH","n":"code","l":" 路径下并且给予执行权限。\n一个交互式会话类似："},{"a":[["class","calibre30 pcalibre1 pcalibre"]],"x":"\n","n":"ol","l":"\n"},{"a":[["class","calibre31 pcalibre1 pcalibre"]],"n":"li","l":"\n"},{"a":[["class","calibre31 pcalibre1 pcalibre"]],"n":"li","l":"\n"},{"a":[["class","calibre31 pcalibre1 pcalibre"]],"n":"li","l":"\n"},{"a":[["class","calibre31 pcalibre1 pcalibre"]],"n":"li","l":"\n"},{"a":[["class","conum1 pcalibre1 pcalibre"],["data-value","4"]],"x":"④","n":"i","l":" 这个循环读取存储文件中的内容，寻找匹配的行。\n如果 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"known","n":"code","l":" 中的协议和主机名与该行相匹配，这个程序输出结果并退出。"},{"a":[["class","conum1 pcalibre1 pcalibre"],["data-value","3"]],"x":"③","n":"i","l":" 这个循环从标准输入读取数据，直到读取到第一个空行。\n输入的数据被保存到 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"known","n":"code","l":" 哈希表中，之后需要用到。"},{"a":[["class","conum1 pcalibre1 pcalibre"],["data-value","2"]],"x":"②","n":"i","l":" 这个程序只有在接受到 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"get","n":"code","l":" 行为的请求并且后端存储的文件存在时才会有输出。"},{"a":[["class","conum1 pcalibre1 pcalibre"],["data-value","1"]],"x":"①","n":"i","l":" 我们在这里解析命令行参数，允许用户指定输入文件，默认是 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"~/.git-credentials","n":"code","l":"."},{"a":[["class","source pcalibre1 pcalibre"]],"n":"pre","l":"\n"},{"a":[["class","calibre13 pcalibre1 pcalibre"]],"n":"code"},{"a":[["class","calibre14 pcalibre1 pcalibre"]],"n":"span"},{"a":[["class","pcalibre1 pcalibre calibre17"]],"x":"#!/usr/bin/env ruby","n":"span","l":"\n\nrequire "},{"a":[["class","pcalibre1 pcalibre calibre17"]],"x":"'optparse'","n":"span","l":"\n\npath = File.expand_path "},{"a":[["class","pcalibre1 pcalibre calibre17"]],"x":"'~/.git-credentials'","n":"span","l":" "},{"a":[["class","conum pcalibre1 pcalibre"],["data-value","1"]],"x":"①","n":"i","l":"\nOptionParser.new "},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"do","n":"span","l":" |opts|\n    opts.banner = "},{"a":[["class","pcalibre1 pcalibre calibre17"]],"x":"'USAGE: git-credential-read-only [options] <action>'","n":"span","l":"\n    opts.on("},{"a":[["class","pcalibre1 pcalibre calibre17"]],"x":"'-f'","n":"span","l":", "},{"a":[["class","pcalibre1 pcalibre calibre17"]],"x":"'--file PATH'","n":"span","l":", "},{"a":[["class","pcalibre1 pcalibre calibre17"]],"x":"'Specify path for backing store'","n":"span","l":") "},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"do","n":"span","l":" |argpath|\n        path = File.expand_path argpath\n    "},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"end","n":"span","l":"\n"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"end","n":"span","l":".parse!\n\nexit(0) "},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"unless","n":"span","l":" ARGV[0].downcase == "},{"a":[["class","pcalibre1 pcalibre calibre17"]],"x":"'get'","n":"span","l":" "},{"a":[["class","conum pcalibre1 pcalibre"],["data-value","2"]],"x":"②","n":"i","l":"\nexit(0) "},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"unless","n":"span","l":" File.exists? path\n\nknown = {} "},{"a":[["class","conum pcalibre1 pcalibre"],["data-value","3"]],"x":"③","n":"i","l":"\n"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"while","n":"span","l":" line = STDIN.gets\n    "},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"break","n":"span","l":" "},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"if","n":"span","l":" line.strip == "},{"a":[["class","pcalibre1 pcalibre calibre17"]],"x":"''","n":"span","l":"\n    k,v = line.strip.split "},{"a":[["class","pcalibre1 pcalibre calibre17"]],"x":"'='","n":"span","l":", 2\n    known[k] = v\n"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"end","n":"span","l":"\n\nFile.readlines(path).each "},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"do","n":"span","l":" |fileline| "},{"a":[["class","conum pcalibre1 pcalibre"],["data-value","4"]],"x":"④","n":"i","l":"\n    prot,user,pass,host = fileline.scan("},{"a":[["class","pcalibre1 pcalibre calibre17"]],"x":"/^(.*?):\\/\\/(.*?):(.*?)@(.*)$/","n":"span","l":").first\n    "},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"if","n":"span","l":" prot == known["},{"a":[["class","pcalibre1 pcalibre calibre17"]],"x":"'protocol'","n":"span","l":"] "},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"and","n":"span","l":" host == known["},{"a":[["class","pcalibre1 pcalibre calibre17"]],"x":"'host'","n":"span","l":"] "},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"then","n":"span","l":"\n        puts "},{"a":[["class","pcalibre1 pcalibre calibre17"]],"x":"\"protocol=","n":"span"},{"a":[["class","pcalibre1 pcalibre calibre16"]],"x":"#{","n":"span","l":"prot"},{"a":[["class","pcalibre1 pcalibre calibre16"]],"x":"}","n":"span"},{"a":[["class","pcalibre1 pcalibre calibre17"]],"x":"\"","n":"span","l":"\n        puts "},{"a":[["class","pcalibre1 pcalibre calibre17"]],"x":"\"host=","n":"span"},{"a":[["class","pcalibre1 pcalibre calibre16"]],"x":"#{","n":"span","l":"host"},{"a":[["class","pcalibre1 pcalibre calibre16"]],"x":"}","n":"span"},{"a":[["class","pcalibre1 pcalibre calibre17"]],"x":"\"","n":"span","l":"\n        puts "},{"a":[["class","pcalibre1 pcalibre calibre17"]],"x":"\"username=","n":"span"},{"a":[["class","pcalibre1 pcalibre calibre16"]],"x":"#{","n":"span","l":"user"},{"a":[["class","pcalibre1 pcalibre calibre16"]],"x":"}","n":"span"},{"a":[["class","pcalibre1 pcalibre calibre17"]],"x":"\"","n":"span","l":"\n        puts "},{"a":[["class","pcalibre1 pcalibre calibre17"]],"x":"\"password=","n":"span"},{"a":[["class","pcalibre1 pcalibre calibre16"]],"x":"#{","n":"span","l":"pass"},{"a":[["class","pcalibre1 pcalibre calibre16"]],"x":"}","n":"span"},{"a":[["class","pcalibre1 pcalibre calibre17"]],"x":"\"","n":"span","l":"\n        exit(0)\n    "},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"end","n":"span","l":"\n"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"end","n":"span"},{"a":[["class","arabic pcalibre1 pcalibre"]],"x":"\n","n":"ol","l":"\n"},{"a":[["class","calibre11 pcalibre1 pcalibre"]],"x":"\n","n":"li","l":"\n"},{"a":[["class","calibre11 pcalibre1 pcalibre"]],"x":"\n","n":"li","l":"\n"},{"a":[["class","calibre11 pcalibre1 pcalibre"]],"x":"\n","n":"li","l":"\n"},{"a":[["class","pcalibre1 pcalibre principal"]],"x":"凭证文件的路径一般是固定的，但我们应该允许用户传入一个自定义路径以防万一。","n":"span","l":"\n"},{"a":[["class","pcalibre1 pcalibre principal"]],"x":"共享的凭证文件格式和 ","n":"span","l":"\n"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"git-credential-store","n":"code","l":" 使用的格式相同。"},{"a":[["class","pcalibre1 pcalibre principal"]],"x":"我们唯一需要关注的行为是 ","n":"span","l":"\n"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"get","n":"code","l":"；"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"store","n":"code","l":" 和 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"erase","n":"code","l":" 是写操作，所以当接受到这两个请求时我们直接退出即可。"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"git-credential-store","n":"code","l":" 之类的是和 Git 是相互独立的程序，就不难理解 Git 凭证辅助工具可以是 "},{"a":[["class","pcalibre1 pcalibre calibre4"]],"x":"任意","n":"em","l":" 程序。\n虽然 Git 提供的辅助工具覆盖了大多数常见的使用场景，但并不能满足所有情况。\n比如，假设你的整个团队共享一些凭证，也许是在部署时使用。\n这些凭证是保存在一个共享目录里，由于这些凭证经常变更，所以你不想把它们复制到你自己的凭证仓库中。\n现有的辅助工具无法满足这种情况；来看看我们如何自己实现一个。\n这个程序应该拥有几个核心功能："},{"a":[["class","pcalibre1 calibre7 pcalibre"],["id","_底层实现"]],"x":"底层实现","n":"h3","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"这些是如何实现的呢？\nGit 凭证辅助工具系统的命令是 ","n":"p","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"举一个例子更容易理解。\n我们假设已经配置好一个凭证辅助工具，这个辅助工具保存了 ","n":"p","l":"\n"},{"a":[["class","listing pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","content pcalibre1 pcalibre"]],"x":"\n","n":"div","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"凭证系统实际调用的程序和 Git 本身是分开的；具体是哪一个以及如何调用与 ","n":"p","l":"\n"},{"a":[["class","content pcalibre1 pcalibre"]],"x":"\n","n":"div","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"上面描述的辅助工具可以被称做 ","n":"p","l":"\n"},{"a":[["class","content pcalibre1 pcalibre"]],"x":"\n","n":"div","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"对于 ","n":"p","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"如果辅助工具没有任何有用的信息，它可以直接退出而不需要输出任何东西，但如果它有这些信息，它在提供的信息后面增加它所拥有的信息。\n这些输出会被视为一系列的赋值语句；每一个提供的数据都会将 Git 已有的数据替换掉。","n":"p","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"这有一个和上面一样的例子，但是跳过了 git-credential 这一步，直接到 git-credential-store:","n":"p","l":"\n"},{"a":[["class","listing pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","content pcalibre1 pcalibre"]],"x":"\n","n":"div","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"n":"p","l":"\n"},{"a":[["class","listing pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"仅仅是一系列包含凭证信息URL组成的行。\n","n":"p","l":"\n"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"osxkeychain","n":"code","l":" 和 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"winstore","n":"code","l":" 辅助工具使用它们后端存储的原生格式，而 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"cache","n":"code","l":" 使用它的内存格式（其他进程无法读取）。"},{"a":[["class","source pcalibre1 pcalibre"]],"n":"pre","l":"\n"},{"a":[["class","calibre13 pcalibre1 pcalibre"]],"x":"https://bob:s3cre7@mygithost","n":"code"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"~/git.store","n":"code","l":" 文件的内容类似："},{"a":[["class","calibre30 pcalibre1 pcalibre"]],"x":"\n","n":"ol","l":"\n"},{"a":[["class","calibre31 pcalibre1 pcalibre"]],"n":"li","l":"\n"},{"a":[["class","calibre31 pcalibre1 pcalibre"]],"n":"li","l":"\n"},{"a":[["class","calibre31 pcalibre1 pcalibre"]],"n":"li","l":"\n"},{"a":[["class","conum1 pcalibre1 pcalibre"],["data-value","3"]],"x":"③","n":"i","l":" "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"git-credential-store","n":"code","l":" 输出我们之前保存的用户名和密码。"},{"a":[["class","conum1 pcalibre1 pcalibre"],["data-value","2"]],"x":"②","n":"i","l":" 现在我们取出这个凭证。\n我们提供连接这部分的信息（"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"https://mygithost","n":"code","l":"）以及一个空行。"},{"a":[["class","conum1 pcalibre1 pcalibre"],["data-value","1"]],"x":"①","n":"i","l":" 我们告诉 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"git-credential-store","n":"code","l":" 去保存凭证：当访问 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"https://mygithost","n":"code","l":" 时使用用户名 “bob”，密码是 “s3cre7”。"},{"a":[["class","source pcalibre1 pcalibre"]],"n":"pre","l":"\n"},{"a":[["class","calibre13 pcalibre1 pcalibre"]],"n":"code"},{"a":[["class","calibre14 pcalibre1 pcalibre"]],"n":"span"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git credential-store --file ~/git.store store "},{"a":[["class","conum pcalibre1 pcalibre"],["data-value","1"]],"x":"①","n":"i","l":"\nprotocol=https\nhost=mygithost\nusername=bob\npassword=s3cre7\n"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git credential-store --file ~/git.store get "},{"a":[["class","conum pcalibre1 pcalibre"],["data-value","2"]],"x":"②","n":"i","l":"\nprotocol=https\nhost=mygithost\n\nusername=bob "},{"a":[["class","conum pcalibre1 pcalibre"],["data-value","3"]],"x":"③","n":"i","l":"\npassword=s3cre7"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"store","n":"code","l":" 和 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"erase","n":"code","l":" 两个行为是不需要返回数据的（Git 也会忽略掉）。\n然而对于 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"get","n":"code","l":"，Git 对辅助工具的返回信息十分感兴趣。"},{"a":[["class","calibre10 pcalibre1 pcalibre"]],"x":"\n","n":"ul","l":"\n"},{"a":[["class","pcalibre7 calibre11 pcalibre1"]],"x":"\n","n":"li","l":"\n"},{"a":[["class","pcalibre7 calibre11 pcalibre1"]],"x":"\n","n":"li","l":"\n"},{"a":[["class","pcalibre7 calibre11 pcalibre1"]],"x":"\n","n":"li","l":"\n"},{"a":[["class","pcalibre1 pcalibre principal"]],"n":"span","l":"\n"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"erase","n":"code","l":" 会将给定的证书从辅助工具内存中清除。"},{"a":[["class","pcalibre1 pcalibre principal"]],"n":"span","l":"\n"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"store","n":"code","l":" 是请求保存一个凭证到辅助工具的内存。"},{"a":[["class","pcalibre1 pcalibre principal"]],"n":"span","l":"\n"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"get","n":"code","l":" 是请求输入一对用户名和密码。"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"git-credential-cache","n":"code","l":"、"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"git-credential-store","n":"code","l":" 之类，我们可以配置它们来接受命令行参数。\n通常的格式是 “git-credential-foo [args] <action>.”\n标准输入/输出协议和 git-credential 一样，但它们使用的是一套稍微不太一样的行为："},{"a":[["class","content pcalibre1 pcalibre"]],"x":"\n","n":"div","l":"\n"},{"a":[["class","pcalibre1 table pcalibre"]],"x":"\n","n":"table","l":"\n"},{"a":[["class","pcalibre1 calibre20 pcalibre"]],"x":"\n","n":"colgroup","l":"\n"},{"a":[["class","pcalibre1 pcalibre calibre22"]],"x":"\n","n":"thead","l":"\n"},{"a":[["class","calibre25 pcalibre1 pcalibre"]],"x":"\n","n":"tbody","l":"\n"},{"a":[["class","pcalibre1 pcalibre calibre23"]],"x":"\n","n":"tr","l":"\n"},{"a":[["class","pcalibre1 pcalibre calibre23"]],"x":"\n","n":"tr","l":"\n"},{"a":[["class","pcalibre1 pcalibre calibre23"]],"x":"\n","n":"tr","l":"\n"},{"a":[["class","pcalibre1 pcalibre calibre23"]],"x":"\n","n":"tr","l":"\n"},{"a":[["class","calibre26 pcalibre1 pcalibre"]],"n":"td","l":"\n"},{"a":[["class","calibre26 pcalibre1 pcalibre"]],"n":"td","l":"\n"},{"a":[["class","calibre27 pcalibre1 pcalibre"]],"n":"p"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"!","n":"code","l":" 后面的代码会在shell执行"},{"a":[["class","calibre27 pcalibre1 pcalibre"]],"n":"p"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"!f() { echo \"password=s3cre7\"; }; f","n":"code"},{"a":[["class","calibre26 pcalibre1 pcalibre"]],"n":"td","l":"\n"},{"a":[["class","calibre26 pcalibre1 pcalibre"]],"n":"td","l":"\n"},{"a":[["class","calibre27 pcalibre1 pcalibre"]],"x":"执行 ","n":"p"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"/absolute/path/foo -xyz","n":"code"},{"a":[["class","calibre27 pcalibre1 pcalibre"]],"n":"p"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"/absolute/path/foo -xyz","n":"code"},{"a":[["class","calibre26 pcalibre1 pcalibre"]],"n":"td","l":"\n"},{"a":[["class","calibre26 pcalibre1 pcalibre"]],"n":"td","l":"\n"},{"a":[["class","calibre27 pcalibre1 pcalibre"]],"x":"执行 ","n":"p"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"git-credential-foo -a --opt=bcd","n":"code"},{"a":[["class","calibre27 pcalibre1 pcalibre"]],"n":"p"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"foo -a --opt=bcd","n":"code"},{"a":[["class","calibre26 pcalibre1 pcalibre"]],"n":"td","l":"\n"},{"a":[["class","calibre26 pcalibre1 pcalibre"]],"n":"td","l":"\n"},{"a":[["class","calibre27 pcalibre1 pcalibre"]],"x":"执行 ","n":"p"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"git-credential-foo","n":"code"},{"a":[["class","calibre27 pcalibre1 pcalibre"]],"n":"p"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"foo","n":"code"},{"a":[["class","pcalibre1 pcalibre calibre23"]],"x":"\n","n":"tr","l":"\n"},{"a":[["class","calibre24 pcalibre1 pcalibre"]],"x":"配置值","n":"th","l":"\n"},{"a":[["class","calibre24 pcalibre1 pcalibre"]],"x":"行为","n":"th","l":"\n"},{"a":[["class","calibre21 pcalibre1 pcalibre"]],"n":"col","l":"\n"},{"a":[["class","calibre21 pcalibre1 pcalibre"]],"n":"col","l":"\n"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"credential.helper","n":"code","l":" 配置的值有关。\n这个配置有多种格式："},{"a":[["class","calibre30 pcalibre1 pcalibre"]],"x":"\n","n":"ol","l":"\n"},{"a":[["class","calibre31 pcalibre1 pcalibre"]],"n":"li","l":"\n"},{"a":[["class","calibre31 pcalibre1 pcalibre"]],"n":"li","l":"\n"},{"a":[["class","calibre31 pcalibre1 pcalibre"]],"n":"li","l":"\n"},{"a":[["class","calibre31 pcalibre1 pcalibre"]],"n":"li","l":"\n"},{"a":[["class","calibre31 pcalibre1 pcalibre"]],"n":"li","l":"\n"},{"a":[["class","conum1 pcalibre1 pcalibre"],["data-value","5"]],"x":"⑤","n":"i","l":" 如果没有找到对应的凭证，Git 会询问用户的用户名和密码，我们将这些信息输入到在标准输出的地方（这个例子中是同一个控制台）。"},{"a":[["class","conum1 pcalibre1 pcalibre"],["data-value","4"]],"x":"④","n":"i","l":" 接下来由 Git-credential 接管，并且将找到的信息打印到标准输出。"},{"a":[["class","conum1 pcalibre1 pcalibre"],["data-value","3"]],"x":"③","n":"i","l":" 一个空行代表输入已经完成，凭证系统应该输出它所知道的信息。"},{"a":[["class","conum1 pcalibre1 pcalibre"],["data-value","2"]],"x":"②","n":"i","l":" Git-credential 接下来会等待标准输入。\n我们提供我们所知道的信息：协议和主机名。"},{"a":[["class","conum1 pcalibre1 pcalibre"],["data-value","1"]],"x":"①","n":"i","l":" 这是开始交互的命令。"},{"a":[["class","source pcalibre1 pcalibre"]],"n":"pre","l":"\n"},{"a":[["class","calibre13 pcalibre1 pcalibre"]],"n":"code"},{"a":[["class","calibre14 pcalibre1 pcalibre"]],"n":"span"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git credential fill "},{"a":[["class","conum pcalibre1 pcalibre"],["data-value","1"]],"x":"①","n":"i","l":"\nprotocol=https "},{"a":[["class","conum pcalibre1 pcalibre"],["data-value","2"]],"x":"②","n":"i","l":"\nhost=mygithost\n "},{"a":[["class","conum pcalibre1 pcalibre"],["data-value","3"]],"x":"③","n":"i","l":"\nprotocol=https "},{"a":[["class","conum pcalibre1 pcalibre"],["data-value","4"]],"x":"④","n":"i","l":"\nhost=mygithost\nusername=bob\npassword=s3cre7\n"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git credential fill "},{"a":[["class","conum pcalibre1 pcalibre"],["data-value","5"]],"x":"⑤","n":"i","l":"\nprotocol=https\nhost=unknownhost\n\nUsername for 'https://unknownhost': bob\nPassword for 'https://bob@unknownhost':\nprotocol=https\nhost=unknownhost\nusername=bob\npassword=s3cre7"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"mygithost","n":"code","l":" 的凭证信息。\n下面是一个使用 “fill” 命令的会话，当 Git 尝试寻找一个服务器的凭证时就会被调用。"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"git credential","n":"code","l":"，这个命令接收一个参数，并通过标准输入获取更多的参数。"},{"a":[["class","source pcalibre1 pcalibre"]],"n":"pre","l":"\n"},{"a":[["class","calibre13 pcalibre1 pcalibre"]],"n":"code"},{"a":[["class","calibre14 pcalibre1 pcalibre"]],"n":"span"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"[credential]","n":"span","l":"\n    helper = "},{"a":[["class","pcalibre1 pcalibre calibre17"]],"x":"store --file /mnt/thumbdrive/.git-credentials","n":"span","l":"\n"},{"a":[["class","pcalibre1 pcalibre calibre17"]],"x":"    helper = cache --timeout 30000","n":"span"},{"a":[["class","calibre12 pcalibre1 pcalibre"]],"x":"所有","n":"strong","l":" 配置列表中的辅助工具，它们会按自己的方式处理用户名和密码。\n如果你在闪存上有一个凭证文件，但又希望在该闪存被拔出的情况下使用内存缓存来保存用户名密码，"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":".gitconfig","n":"code","l":" 配置文件如下："},{"a":[["class","source pcalibre1 pcalibre"]],"n":"pre","l":"\n"},{"a":[["class","calibre13 pcalibre1 pcalibre"]],"n":"code"},{"a":[["class","calibre14 pcalibre1 pcalibre"]],"n":"span"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git config --global credential.helper store --file ~/.my-credentials"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"--file <path>","n":"code","l":" 参数，可以自定义存放密码的文件路径（默认是`~/.git-credentials`）。\n“cache” 模式有 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"--timeout <seconds>","n":"code","l":" 参数，可以设置后台进程的存活时间（默认是 “900”，也就是 15 分钟）。\n下面是一个配置 “store” 模式自定义路径的例子："},{"a":[["class","source pcalibre1 pcalibre"]],"n":"pre","l":"\n"},{"a":[["class","calibre13 pcalibre1 pcalibre"]],"n":"code"},{"a":[["class","calibre14 pcalibre1 pcalibre"]],"n":"span"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git config --global credential.helper cache"},{"a":[["class","calibre10 pcalibre1 pcalibre"]],"x":"\n","n":"ul","l":"\n"},{"a":[["class","pcalibre7 calibre11 pcalibre1"]],"x":"\n","n":"li","l":"\n"},{"a":[["class","pcalibre7 calibre11 pcalibre1"]],"x":"\n","n":"li","l":"\n"},{"a":[["class","pcalibre7 calibre11 pcalibre1"]],"x":"\n","n":"li","l":"\n"},{"a":[["class","pcalibre7 calibre11 pcalibre1"]],"x":"\n","n":"li","l":"\n"},{"a":[["class","pcalibre7 calibre11 pcalibre1"]],"x":"\n","n":"li","l":"\n"},{"a":[["class","pcalibre1 pcalibre principal"]],"x":"如果你使用的是 Windows，你可以安装一个叫做 “winstore” 的辅助工具。\n这和上面说的 “osxkeychain” 十分类似，但是是使用 Windows Credential Store 来控制敏感信息。\n可以在 ","n":"span","l":"\n"},{"a":[["class","link pcalibre5 pcalibre4 pcalibre3 pcalibre2 pcalibre1 pcalibre"],["href","https://gitcredentialstore.codeplex.com"],["target","_blank"],["rel","noopener noreferrer"]],"x":"https://gitcredentialstore.codeplex.com","n":"a","l":" 下载。"},{"a":[["class","pcalibre1 pcalibre principal"]],"x":"如果你使用的是 Mac，Git 还有一种 “osxkeychain” 模式，它会将凭证缓存到你系统用户的钥匙串中。\n这种方式将凭证存放在磁盘中，并且永不过期，但是是被加密的，这种加密方式与存放 HTTPS 凭证以及 Safari 的自动填写是相同的。","n":"span","l":"\n"},{"a":[["class","pcalibre1 pcalibre principal"]],"x":"“store” 模式会将凭证用明文的形式存放在磁盘中，并且永不过期。\n这意味着除非你修改了你在 Git 服务器上的密码，否则你永远不需要再次输入你的凭证信息。\n这种方式的缺点是你的密码是用明文的方式存放在你的 home 目录下。","n":"span","l":"\n"},{"a":[["class","pcalibre1 pcalibre principal"]],"x":"“cache” 模式会将凭证存放在内存中一段时间。\n密码永远不会被存储在磁盘中，并且在15分钟后从内存中清除。","n":"span","l":"\n"},{"a":[["class","pcalibre1 pcalibre principal"]],"x":"默认所有都不缓存。\n每一次连接都会询问你的用户名和密码。","n":"span","l":"\n"},{"a":[["class","calibre6 pcalibre1 pcalibre"],["id","r_replace"]],"x":"替换","n":"h2","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"Git 对象是不可改变的，但它提供一种有趣的方式来用其他对象假装替换数据库中的 Git 对象。","n":"p","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"n":"p","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"例如，你有一个大型的代码历史并想把自己的仓库分成一个短的历史和一个更大更长久的历史，短历史供新的开发者使用，后者给喜欢数据挖掘的人使用。\n你可以通过用新仓库中最早的提交 ","n":"p","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"让我们来试试吧。\n首先获取一个已经存在的仓库，并将其分成两个仓库，一个是最近的仓库，一个是历史版本的仓库，然后我们将看到如何在不更改仓库 SHA 值的情况下通过 ","n":"p","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"我们将使用一个拥有 5 个提交的简单仓库：","n":"p","l":"\n"},{"a":[["class","listing pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"我们想将其分成拆分成两条历史。\n第一个到第四个提交的作为第一个历史版本。\n第四、第五个提交的作为最近的第二个历史版本。","n":"p","l":"\n"},{"a":[["class","image pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"创建历史版本的历史很容易，我们可以只将一个历史中的分支推送到一个新的远程仓库的 master 分支。","n":"p","l":"\n"},{"a":[["class","listing pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","image pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"现在我们可以把这个新的 ","n":"p","l":"\n"},{"a":[["class","listing pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"这样一来，我们的历史版本就发布了。\n稍难的部分则是删减我们最近的历史来让它变得更小。\n我们需要一个重叠以便于用一个相等的提交来替换另一个提交，这样一来，我们将截断到第四、五个提交。","n":"p","l":"\n"},{"a":[["class","listing pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"在这种情况下，创建一个能够指导扩展历史的基础提交是很有用的。\n这样一来，如果其他的开发者想要修改第一次提交或者其他操作时就知道要做些什么，因此，接下来我们要做的是用命令创建一个最初的提交对象，然后将剩下的提交（第四、第五个提交）变基到它的上面。","n":"p","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"为了这么做，我们需要选择一个点去拆分，对于我们而言是第三个提交（SHA 是 ","n":"p","l":"\n"},{"a":[["class","listing pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","admonition pcalibre1 pcalibre8"],["title","Note"],["type","note"]],"x":"\n","n":"aside","l":"\n"},{"a":[["class","image pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"现在我们已经有一个基础提交了，我们可以通过 ","n":"p","l":"\n"},{"a":[["class","listing pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","image pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"我们已经用基础提交重写了最近的历史，基础提交包括如何重新组成整个历史的说明。\n我们可以将新历史推送到新项目中，当其他人克隆这个仓库时，他们仅能看到最近两次提交以及一个包含上述说明的基础提交。","n":"p","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"现在我们将以想获得整个历史的人的身份来初次克隆这个项目。\n在克隆这个截断后的仓库后为了得到历史数据，需要添加第二个远程的历史版本库并对其做获取操作：","n":"p","l":"\n"},{"a":[["class","listing pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"现在，协作者在 ","n":"p","l":"\n"},{"a":[["class","listing pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"为了合并它们，你可以使用 ","n":"p","l":"\n"},{"a":[["class","listing pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"现在，查看 ","n":"p","l":"\n"},{"a":[["class","listing pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"很酷，是不是？不用改变上游的 SHA-1 我们就能用一个提交来替换历史中的所有不同的提交，并且所有的工具（","n":"p","l":"\n"},{"a":[["class","image pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"有趣的是，即使是使用了 ","n":"p","l":"\n"},{"a":[["class","listing pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"请记住，","n":"p","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"另一个有趣的事情是数据将会以以下引用显示：","n":"p","l":"\n"},{"a":[["class","listing pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"这意味着我们可以轻而易举的和其他人分享替换，因为我们可以将替换推送到服务器中并且其他人可以轻松地下载。\n也许在历史移植情况下不是很有用（既然每个人都乐意下载最新版本和历史版本，为何还要拆分他们呢？），但在其他情况下仍然很有用。","n":"p","l":"\n"},{"a":[["class","source pcalibre1 pcalibre"]],"n":"pre","l":"\n"},{"a":[["class","calibre13 pcalibre1 pcalibre"]],"n":"code"},{"a":[["class","calibre14 pcalibre1 pcalibre"]],"n":"span"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git "},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"for","n":"span","l":"-each-ref\ne146b5f14e79d4935160c0e83fb9ebe526b8da0d commit\trefs/heads/master\nc6e1e95051d41771a649f3145423f8809d1a74d4 commit\trefs/remotes/history/master\ne146b5f14e79d4935160c0e83fb9ebe526b8da0d commit\trefs/remotes/origin/HEAD\ne146b5f14e79d4935160c0e83fb9ebe526b8da0d commit\trefs/remotes/origin/master\nc6e1e95051d41771a649f3145423f8809d1a74d4 commit\trefs/replace/81a708dd0e167a3f691541c7a6463343bc457040"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"81a708d","n":"code","l":" 真正的父提交是 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"622e882","n":"code","l":" 占位提交，而非呈现的 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"9c68fdce","n":"code","l":" 提交。"},{"a":[["class","source pcalibre1 pcalibre"]],"n":"pre","l":"\n"},{"a":[["class","calibre13 pcalibre1 pcalibre"]],"n":"code"},{"a":[["class","calibre14 pcalibre1 pcalibre"]],"n":"span"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git cat-file -p 81a708d\ntree 7bc544cf438903b65ca9104a1e30345eee6c083d\nparent 9c68fdceee073230f19ebb8b5e7fc71b479c0252\nauthor Scott Chacon <schacon@gmail.com> 1268712581 -0700\ncommitter Scott Chacon <schacon@gmail.com> 1268712581 -0700\n\nfourth commit"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"c6e1e95","n":"code","l":" 提交数据来进行替换，它的 SHA-1 仍显示为 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"81a708d","n":"code","l":"。\n即使你运行了 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"cat-file","n":"code","l":" 命令，它仍会显示你替换的数据："},{"a":[["class","content pcalibre1 pcalibre"]],"x":"\n","n":"div","l":"\n"},{"a":[["alt","replace5"],["class","calibre8 pcalibre1 pcalibre"],["src","ezPJKgrMLI5iYpd7vlZT7E|aW1hZ2VzLzAwMDc1LmpwZWc=|"],["data-calibre-src","images/00075.jpeg"]],"n":"img","l":"\n"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"bisect","n":"code","l":"，"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"blame","n":"code","l":" 等）也都奏效。"},{"a":[["class","source pcalibre1 pcalibre"]],"n":"pre","l":"\n"},{"a":[["class","calibre13 pcalibre1 pcalibre"]],"n":"code"},{"a":[["class","calibre14 pcalibre1 pcalibre"]],"n":"span"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git log --oneline master\ne146b5f fifth commit\n81a708d fourth commit\n9c68fdc third commit\n945704c second commit\nc1822cf first commit"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"master","n":"code","l":" 分支中的历史信息，显示如下："},{"a":[["class","source pcalibre1 pcalibre"]],"n":"pre","l":"\n"},{"a":[["class","calibre13 pcalibre1 pcalibre"]],"n":"code"},{"a":[["class","calibre14 pcalibre1 pcalibre"]],"n":"span"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git replace 81a708d c6e1e95"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"git replace","n":"code","l":" 命令加上你想替换的提交信息来进行替换。\n这样一来，我们就可以将 master 分支中的第四个提交替换为 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"project-history/master","n":"code","l":" 分支中的“第四个”提交。"},{"a":[["class","source pcalibre1 pcalibre"]],"n":"pre","l":"\n"},{"a":[["class","calibre13 pcalibre1 pcalibre"]],"n":"code"},{"a":[["class","calibre14 pcalibre1 pcalibre"]],"n":"span"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git log --oneline master\ne146b5f fifth commit\n81a708d fourth commit\n622e88e get history from blah blah blah\n\n"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git log --oneline project-history/master\nc6e1e95 fourth commit\n9c68fdc third commit\n945704c second commit\nc1822cf first commit"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"master","n":"code","l":" 分支中拥有他们最近的提交并且在 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"project-history/master","n":"code","l":" 分支中拥有过去的提交。"},{"a":[["class","source pcalibre1 pcalibre"]],"n":"pre","l":"\n"},{"a":[["class","calibre13 pcalibre1 pcalibre"]],"n":"code"},{"a":[["class","calibre14 pcalibre1 pcalibre"]],"n":"span"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git clone https://github.com/schacon/project\n"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" cd project\n\n"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git log --oneline master\ne146b5f fifth commit\n81a708d fourth commit\n622e88e get history from blah blah blah\n\n"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git remote add project-history https://github.com/schacon/project-history\n"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git fetch project-history\nFrom https://github.com/schacon/project-history\n * [new branch]      master     -> project-history/master"},{"a":[["class","content pcalibre1 pcalibre"]],"x":"\n","n":"div","l":"\n"},{"a":[["alt","replace4"],["class","calibre8 pcalibre1 pcalibre"],["src","ezPJKgrMLI5iYpd7vlZT7E|aW1hZ2VzLzAwMDg2LmpwZWc=|"],["data-calibre-src","images/00086.jpeg"]],"n":"img","l":"\n"},{"a":[["class","source pcalibre1 pcalibre"]],"n":"pre","l":"\n"},{"a":[["class","calibre13 pcalibre1 pcalibre"]],"n":"code"},{"a":[["class","calibre14 pcalibre1 pcalibre"]],"n":"span"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git rebase --onto 622e88 9c68fdc\nFirst, rewinding head to replay your work on top of it...\nApplying: fourth commit\nApplying: fifth commit"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"git rebase --onto","n":"code","l":" 命令来将剩余的历史变基到基础提交之上。"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"--onto","n":"code","l":" 参数是刚才 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"commit-tree","n":"code","l":" 命令返回的 SHA 值，变基点会成为第三个提交（我们想留下的第一个提交的父提交，"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"9c68fdc","n":"code","l":"）："},{"a":[["class","content pcalibre1 pcalibre"]],"x":"\n","n":"div","l":"\n"},{"a":[["alt","replace3"],["class","calibre8 pcalibre1 pcalibre"],["src","ezPJKgrMLI5iYpd7vlZT7E|aW1hZ2VzLzAwMTI5LmpwZWc=|"],["data-calibre-src","images/00129.jpeg"]],"n":"img","l":"\n"},{"a":[["class","content1 pcalibre1 pcalibre"]],"x":"\n","n":"div","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"n":"p","l":"\n"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"commit-tree","n":"code","l":" 命令属于底层指令。有许多指令并非直接使用，而是被 "},{"a":[["class","calibre12 pcalibre1 pcalibre"]],"x":"其他的","n":"strong","l":" Git 命令用来做更小一些的工作。有时当我们做一些像这样的奇怪事情时，它们允许我们做一些不适用于日常使用但真正底层的东西。更多关于底层命令的内容请参见 "},{"a":[["class","link pcalibre5 pcalibre4 pcalibre3 pcalibre2 pcalibre1 pcalibre"],["href","javascript:void(0)"],["id","xref--ch10-git-internals--r_plumbing_porcelain"],["data-ezPJKgrMLI5iYpd7vlZT7E","{\"frag\": \"r_plumbing_porcelain\", \"name\": \"text/part0015.html\"}"]],"x":"底层命令和高层命令","n":"a"},{"a":[["class","source pcalibre1 pcalibre"]],"n":"pre","l":"\n"},{"a":[["class","calibre13 pcalibre1 pcalibre"]],"n":"code"},{"a":[["class","calibre14 pcalibre1 pcalibre"]],"n":"span"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" echo "},{"a":[["class","pcalibre1 pcalibre calibre17"]],"x":"'get history from blah blah blah'","n":"span","l":" | git commit-tree 9c68fdc^{tree}\n622e88e9cbfbacfb75b5279245b9fb38dfea10cf"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"9c68fdc","n":"code","l":"）。因此我们的提交将基于此提交树。我们可以使用 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"commit-tree","n":"code","l":" 命令来创建基础提交，这样我们就有了一个树，并返回一个全新的、无父节点的 SHA 提交对象。"},{"a":[["class","source pcalibre1 pcalibre"]],"n":"pre","l":"\n"},{"a":[["class","calibre13 pcalibre1 pcalibre"]],"n":"code"},{"a":[["class","calibre14 pcalibre1 pcalibre"]],"n":"span"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git log --oneline --decorate\nef989d8 (HEAD, master) fifth commit\nc6e1e95 (history) fourth commit\n9c68fdc third commit\n945704c second commit\nc1822cf first commit"},{"a":[["class","source pcalibre1 pcalibre"]],"n":"pre","l":"\n"},{"a":[["class","calibre13 pcalibre1 pcalibre"]],"n":"code"},{"a":[["class","calibre14 pcalibre1 pcalibre"]],"n":"span"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git remote add project-history https://github.com/schacon/project-history\n"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git push project-history history:master\nCounting objects: 12, done.\nDelta compression using up to 2 threads.\nCompressing objects: 100% (4/4), done.\nWriting objects: 100% (12/12), 907 bytes, done.\nTotal 12 (delta 0), reused 0 (delta 0)\nUnpacking objects: 100% (12/12), done.\nTo git@github.com:schacon/project-history.git\n * [new branch]      history -> master"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"history","n":"code","l":" 分支推送到我们新仓库的 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"master","n":"code","l":" 分支："},{"a":[["class","content pcalibre1 pcalibre"]],"x":"\n","n":"div","l":"\n"},{"a":[["alt","replace2"],["class","calibre8 pcalibre1 pcalibre"],["src","ezPJKgrMLI5iYpd7vlZT7E|aW1hZ2VzLzAwMTgwLmpwZWc=|"],["data-calibre-src","images/00180.jpeg"]],"n":"img","l":"\n"},{"a":[["class","source pcalibre1 pcalibre"]],"n":"pre","l":"\n"},{"a":[["class","calibre13 pcalibre1 pcalibre"]],"n":"code"},{"a":[["class","calibre14 pcalibre1 pcalibre"]],"n":"span"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git branch history c6e1e95\n"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git log --oneline --decorate\nef989d8 (HEAD, master) fifth commit\nc6e1e95 (history) fourth commit\n9c68fdc third commit\n945704c second commit\nc1822cf first commit"},{"a":[["class","content pcalibre1 pcalibre"]],"x":"\n","n":"div","l":"\n"},{"a":[["alt","replace1"],["class","calibre8 pcalibre1 pcalibre"],["src","ezPJKgrMLI5iYpd7vlZT7E|aW1hZ2VzLzAwMDI2LmpwZWc=|"],["data-calibre-src","images/00026.jpeg"]],"n":"img","l":"\n"},{"a":[["class","source pcalibre1 pcalibre"]],"n":"pre","l":"\n"},{"a":[["class","calibre13 pcalibre1 pcalibre"]],"n":"code"},{"a":[["class","calibre14 pcalibre1 pcalibre"]],"n":"span"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git log --oneline\nef989d8 fifth commit\nc6e1e95 fourth commit\n9c68fdc third commit\n945704c second commit\nc1822cf first commit"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"replace","n":"code","l":" 命令来合并他们。"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"replace","n":"code","l":" 老仓库中最新的提交来连接历史，这种方式可以把一条历史移植到其他历史上。\n这意味着你不用在新历史中真正替换每一个提交（因为历史来源会影响 SHA 的值），你可以加入他们。"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"replace","n":"code","l":" 命令可以让你在 Git 中指定一个对象并可以声称“每次你遇到这个 Git 对象时，假装它是其他的东西”。\n在你用一个不同的提交替换历史中的一个提交时，这会非常有用。"},{"a":[["class","calibre6 pcalibre1 pcalibre"],["id","r_bundling"]],"x":"打包","n":"h2","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"虽然我们已经了解了网络传输 Git 数据的常用方法（如 HTTP，SSH 等），但还有另外一种不太常见却又十分有用的方式。","n":"p","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"Git 可以将它的数据 “打包” 到一个文件中。\n这在许多场景中都很有用。\n有可能你的网络中断了，但你又希望将你的提交传给你的合作者们。\n可能你不在办公网中并且出于安全考虑没有给你接入内网的权限。\n可能你的无线、有线网卡坏掉了。\n可能你现在没有共享服务器的权限，你又希望通过邮件将更新发送给别人，却不希望通过 ","n":"p","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"这些情况下 ","n":"p","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"来看看一个简单的例子。\n假设你有一个包含两个提交的仓库：","n":"p","l":"\n"},{"a":[["class","listing pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"如果你想把这个仓库发送给其他人但你没有其他仓库的权限，或者就是懒得新建一个仓库，你就可以用 ","n":"p","l":"\n"},{"a":[["class","listing pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"然后你就会有一个名为 ","n":"p","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"你可以将这个 ","n":"p","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"另一方面，假设别人传给你一个 ","n":"p","l":"\n"},{"a":[["class","listing pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"如果你在打包时没有包含 HEAD 引用，你还需要在命令后指定一个 ","n":"p","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"现在假设你提交了 3 个修订，并且要用邮件或者U盘将新的提交放在一个包里传回去。","n":"p","l":"\n"},{"a":[["class","listing pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"首先我们需要确认我们希望被打包的提交区间。\n和网络协议不太一样，网络协议会自动计算出所需传输的最小数据集，而我们需要手动计算。\n当然你可以像上面那样将整个仓库打包，但最好仅仅打包变更的部分 —— 就是我们刚刚在本地做的 3 个提交。","n":"p","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"为了实现这个目标，你需要计算出差别。\n就像我们在 ","n":"p","l":"\n"},{"a":[["class","listing pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"这样就获取到我们希望被打包的提交列表，让我们将这些提交打包。\n我们可以用 ","n":"p","l":"\n"},{"a":[["class","listing pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"现在在我们的目录下会有一个 ","n":"p","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"当她拿到这个包时，她可以在导入到仓库之前查看这个包里包含了什么内容。\n","n":"p","l":"\n"},{"a":[["class","listing pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"如果打包工具仅仅把最后两个提交打包，而不是三个，原始的仓库是无法导入这个包的，因为这个包缺失了必要的提交记录。这时候 ","n":"p","l":"\n"},{"a":[["class","listing pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"而我们的第一个包是合法的，所以我们可以从这个包里提取出提交。\n如果你想查看这边包里可以导入哪些分支，同样有一个命令可以列出这些顶端：","n":"p","l":"\n"},{"a":[["class","listing pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"n":"p","l":"\n"},{"a":[["class","listing pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"可以看到我们已经将提交导入到 ","n":"p","l":"\n"},{"a":[["class","listing pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"因此，当你在没有合适的网络或者可共享仓库的情况下，","n":"p","l":"\n"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"git bundle","n":"code","l":" 很适合用于共享或者网络类型的操作。"},{"a":[["class","source pcalibre1 pcalibre"]],"n":"pre","l":"\n"},{"a":[["class","calibre13 pcalibre1 pcalibre"]],"n":"code"},{"a":[["class","calibre14 pcalibre1 pcalibre"]],"n":"span"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git log --oneline --decorate --graph --all\n* 8255d41 (HEAD, master) third commit - first repo\n| * 71b84da (other-master) last commit - second repo\n| * c99cf5b fourth commit - second repo\n| * 7011d3d third commit - second repo\n|/\n* 9a466c5 second commit\n* b1ec324 first commit"},{"a":[["class","pcalibre1 pcalibre calibre4"]],"x":"other-master","n":"em","l":" 分支，以及在这期间我们自己在 "},{"a":[["class","pcalibre1 pcalibre calibre4"]],"x":"master","n":"em","l":" 分支上的提交。"},{"a":[["class","source pcalibre1 pcalibre"]],"n":"pre","l":"\n"},{"a":[["class","calibre13 pcalibre1 pcalibre"]],"n":"code"},{"a":[["class","calibre14 pcalibre1 pcalibre"]],"n":"span"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git fetch ../commits.bundle master:other-master\nFrom ../commits.bundle\n * [new branch]      master     -> other-master"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"verify","n":"code","l":" 子命令同样可以告诉你有哪些顶端。\n该功能的目的是查看哪些是可以被拉入的，所以你可以使用 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"fetch","n":"code","l":" 或者 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"pull","n":"code","l":" 命令从包中导入提交。\n这里我们要从包中取出 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"master","n":"code","l":" 分支到我们仓库中的 "},{"a":[["class","pcalibre1 pcalibre calibre4"]],"x":"other-master","n":"em","l":" 分支："},{"a":[["class","source pcalibre1 pcalibre"]],"n":"pre","l":"\n"},{"a":[["class","calibre13 pcalibre1 pcalibre"]],"n":"code"},{"a":[["class","calibre14 pcalibre1 pcalibre"]],"n":"span"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git bundle list-heads ../commits.bundle\n71b84daaf49abed142a373b6e5c59a22dc6560dc refs/heads/master"},{"a":[["class","source pcalibre1 pcalibre"]],"n":"pre","l":"\n"},{"a":[["class","calibre13 pcalibre1 pcalibre"]],"n":"code"},{"a":[["class","calibre14 pcalibre1 pcalibre"]],"n":"span"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git bundle verify ../commits-bad.bundle\nerror: Repository lacks these prerequisite commits:\nerror: 7011d3d8fc200abe0ad561c011c3852a4b7bbe95 third commit - second repo"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"verify","n":"code","l":" 的输出类似："},{"a":[["class","source pcalibre1 pcalibre"]],"n":"pre","l":"\n"},{"a":[["class","calibre13 pcalibre1 pcalibre"]],"n":"code"},{"a":[["class","calibre14 pcalibre1 pcalibre"]],"n":"span"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git bundle verify ../commits.bundle\nThe bundle contains 1 ref\n71b84daaf49abed142a373b6e5c59a22dc6560dc refs/heads/master\nThe bundle requires these 1 ref\n9a466c572fe88b195efd356c3f2bbeccdb504102 second commit\n../commits.bundle is okay"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"bundle verify","n":"code","l":" 命令可以检查这个文件是否是一个合法的 Git 包，是否拥有共同的祖先来导入。"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"commits.bundle","n":"code","l":" 文件。\n如果我们把这个文件发送给我们的合作者，她可以将这个文件导入到原始的仓库中，即使在这期间已经有其他的工作提交到这个仓库中。"},{"a":[["class","source pcalibre1 pcalibre"]],"n":"pre","l":"\n"},{"a":[["class","calibre13 pcalibre1 pcalibre"]],"n":"code"},{"a":[["class","calibre14 pcalibre1 pcalibre"]],"n":"span"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git bundle create commits.bundle master ^9a466c5\nCounting objects: 11, done.\nDelta compression using up to 2 threads.\nCompressing objects: 100% (3/3), done.\nWriting objects: 100% (9/9), 775 bytes, done.\nTotal 9 (delta 0), reused 0 (delta 0)"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"git bundle create","n":"code","l":" 命令，加上我们想用的文件名，以及要打包的提交区间。"},{"a":[["class","source pcalibre1 pcalibre"]],"n":"pre","l":"\n"},{"a":[["class","calibre13 pcalibre1 pcalibre"]],"n":"code"},{"a":[["class","calibre14 pcalibre1 pcalibre"]],"n":"span"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git log --oneline master ^origin/master\n71b84da last commit - second repo\nc99cf5b fourth commit - second repo\n7011d3d third commit - second repo"},{"a":[["class","link pcalibre5 pcalibre4 pcalibre3 pcalibre2 pcalibre1 pcalibre"],["href","javascript:void(0)"],["id","xref-r_commit_ranges"],["data-ezPJKgrMLI5iYpd7vlZT7E","{\"frag\": \"r_commit_ranges\", \"name\": \"text/part0012.html\"}"]],"x":"提交区间","n":"a","l":" 介绍的，你有很多种方式去指明一个提交区间。\n我们可以使用 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"origin/master..master","n":"code","l":" 或者 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"master ^origin/master","n":"code","l":" 之类的方法来获取那 3 个在我们的 master 分支而不在原始仓库中的提交。\n你可以用 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"log","n":"code","l":" 命令来测试。"},{"a":[["class","source pcalibre1 pcalibre"]],"n":"pre","l":"\n"},{"a":[["class","calibre13 pcalibre1 pcalibre"]],"n":"code"},{"a":[["class","calibre14 pcalibre1 pcalibre"]],"n":"span"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git log --oneline\n71b84da last commit - second repo\nc99cf5b fourth commit - second repo\n7011d3d third commit - second repo\n9a466c5 second commit\nb1ec324 first commit"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"-b master","n":"code","l":" 或者其他被引入的分支，否则 Git 不知道应该检出哪一个分支。"},{"a":[["class","source pcalibre1 pcalibre"]],"n":"pre","l":"\n"},{"a":[["class","calibre13 pcalibre1 pcalibre"]],"n":"code"},{"a":[["class","calibre14 pcalibre1 pcalibre"]],"n":"span"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git clone repo.bundle repo\nInitialized empty Git repository in /private/tmp/bundle/repo/.git/\n"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" cd repo\n"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git log --oneline\n9a466c5 second commit\nb1ec324 first commit"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"repo.bundle","n":"code","l":" 文件并希望你在这个项目上工作。\n你可以从这个二进制文件中克隆出一个目录，就像从一个 URL 克隆一样。"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"repo.bundle","n":"code","l":" 文件通过邮件或者U盘传给别人。"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"repo.bundle","n":"code","l":" 的文件，该文件包含了所有重建该仓库 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"master","n":"code","l":" 分支所需的数据。\n在使用 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"bundle","n":"code","l":" 命令时，你需要列出所有你希望打包的引用或者提交的区间。\n如果你希望这个仓库可以在别处被克隆，你应该像例子中那样增加一个 HEAD 引用。"},{"a":[["class","source pcalibre1 pcalibre"]],"n":"pre","l":"\n"},{"a":[["class","calibre13 pcalibre1 pcalibre"]],"n":"code"},{"a":[["class","calibre14 pcalibre1 pcalibre"]],"n":"span"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git bundle create repo.bundle HEAD master\nCounting objects: 6, done.\nDelta compression using up to 2 threads.\nCompressing objects: 100% (2/2), done.\nWriting objects: 100% (6/6), 441 bytes, done.\nTotal 6 (delta 0), reused 0 (delta 0)"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"git bundle create","n":"code","l":" 命令来打包。"},{"a":[["class","source pcalibre1 pcalibre"]],"n":"pre","l":"\n"},{"a":[["class","calibre13 pcalibre1 pcalibre"]],"n":"code"},{"a":[["class","calibre14 pcalibre1 pcalibre"]],"n":"span"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git log\ncommit 9a466c572fe88b195efd356c3f2bbeccdb504102\nAuthor: Scott Chacon <schacon@gmail.com>\nDate:   Wed Mar 10 07:34:10 2010 -0800\n\n    second commit\n\ncommit b1ec3248f39900d2a406049d762aa68e9641be25\nAuthor: Scott Chacon <schacon@gmail.com>\nDate:   Wed Mar 10 07:34:01 2010 -0800\n\n    first commit"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"git bundle","n":"code","l":" 就会很有用。\n"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"bundle","n":"code","l":" 命令会将 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"git push","n":"code","l":" 命令所传输的所有内容打包成一个二进制文件，你可以将这个文件通过邮件或者闪存传给其他人，然后解包到其他的仓库中。"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"format-patch","n":"code","l":" 的方式传输 40 个提交。"},{"a":[["class","calibre6 pcalibre1 pcalibre"],["id","r_git_submodules"]],"x":"子模块","n":"h2","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"有种情况我们经常会遇到：某个工作中的项目需要包含并使用另一个项目。\n也许是第三方库，或者你独立开发的，用于多个父项目的库。\n现在问题来了：你想要把它们当做两个独立的项目，同时又想在一个项目中使用另一个。","n":"p","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"我们举一个例子。\n假设你正在开发一个网站然后创建了 Atom 订阅。\n你决定使用一个库，而不是写自己的 Atom 生成代码。\n你可能不得不通过 CPAN 安装或 Ruby gem 来包含共享库中的代码，或者将源代码直接拷贝到自己的项目中。\n如果将这个库包含进来，那么无论用何种方式都很难定制它，部署则更加困难，因为你必须确保每一个客户端都包含该库。\n如果将代码复制到自己的项目中，那么你做的任何自定义修改都会使合并上游的改动变得困难。","n":"p","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"Git 通过子模块来解决这个问题。\n子模块允许你将一个 Git 仓库作为另一个 Git 仓库的子目录。\n它能让你将另一个仓库克隆到自己的项目中，同时还保持提交的独立。","n":"p","l":"\n"},{"a":[["class","chapter pcalibre1 pcalibre"],["title","开始使用子模块"]],"x":"\n","n":"section","l":"\n"},{"a":[["class","chapter pcalibre1 pcalibre"],["title","克隆含有子模块的项目"]],"x":"\n","n":"section","l":"\n"},{"a":[["class","chapter pcalibre1 pcalibre"],["title","在包含子模块的项目上工作"]],"x":"\n","n":"section","l":"\n"},{"a":[["class","chapter pcalibre1 pcalibre"],["title","子模块技巧"]],"x":"\n","n":"section","l":"\n"},{"a":[["class","chapter pcalibre1 pcalibre"],["title","子模块的问题"]],"x":"\n","n":"section","l":"\n"},{"a":[["class","pcalibre1 calibre7 pcalibre"],["id","_子模块的问题"]],"x":"子模块的问题","n":"h3","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"然而使用子模块还是有一些小问题。","n":"p","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"例如在有子模块的项目中切换分支可能会造成麻烦。\n如果你创建一个新分支，在其中添加一个子模块，之后切换到没有该子模块的分支上时，你仍然会有一个还未跟踪的子模块目录。","n":"p","l":"\n"},{"a":[["class","listing pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"移除那个目录并不困难，但是有一个目录在那儿会让人有一点困惑。\n如果你移除它然后切换回有那个子模块的分支，需要运行 ","n":"p","l":"\n"},{"a":[["class","listing pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"再说一遍，这真的不难，只是会让人有点儿困惑。","n":"p","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"另一个主要的告诫是许多人遇到了将子目录转换为子模块的问题。\n如果你在项目中已经跟踪了一些文件，然后想要将它们移动到一个子模块中，那么请务必小心，否则 Git 会对你发脾气。\n假设项目内有一些文件在子目录中，你想要将其转换为一个子模块。\n如果删除子目录然后运行 ","n":"p","l":"\n"},{"a":[["class","listing pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"你必须要先取消暂存 ","n":"p","l":"\n"},{"a":[["class","listing pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"现在假设你在一个分支下做了这样的工作。\n如果尝试切换回的分支中那些文件还在子目录而非子模块中时 - 你会得到这个错误：","n":"p","l":"\n"},{"a":[["class","listing pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"你可以通过 ","n":"p","l":"\n"},{"a":[["class","listing pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"当你切换回来之后，因为某些原因你得到了一个空的 ","n":"p","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"要特别注意的是，近来子模块会将它们的所有 Git 数据保存在顶级项目的 ","n":"p","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"拥有了这些工具，使用子模块会成为可以在几个相关但却分离的项目上同时开发的相当简单有效的方法。","n":"p","l":"\n"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":".git","n":"code","l":" 目录中，所以不像旧版本的 Git，摧毁一个子模块目录并不会丢失任何提交或分支。"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"CryptoLibrary","n":"code","l":" 目录，并且 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"git submodule update","n":"code","l":" 也无法修复它。\n你需要进入到子模块目录中运行 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"git checkout .","n":"code","l":" 来找回所有的文件。\n你也可以通过 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"submodule foreach","n":"code","l":" 脚本来为多个子模块运行它。"},{"a":[["class","source pcalibre1 pcalibre"]],"n":"pre","l":"\n"},{"a":[["class","calibre13 pcalibre1 pcalibre"]],"n":"code"},{"a":[["class","calibre14 pcalibre1 pcalibre"]],"n":"span"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git checkout -f master\nwarning: unable to rmdir CryptoLibrary: Directory not empty\nSwitched to branch 'master'"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"checkout -f","n":"code","l":" 来强制切换，但是要小心，如果其中还有未保存的修改，这个命令会把它们覆盖掉。"},{"a":[["class","source pcalibre1 pcalibre"]],"n":"pre","l":"\n"},{"a":[["class","calibre13 pcalibre1 pcalibre"]],"n":"code"},{"a":[["class","calibre14 pcalibre1 pcalibre"]],"n":"span"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git checkout master\nerror: The following untracked working tree files would be overwritten by checkout:\n  CryptoLibrary/Makefile\n  CryptoLibrary/includes/crypto.h\n  ...\nPlease move or remove them before you can switch branches.\nAborting"},{"a":[["class","source pcalibre1 pcalibre"]],"n":"pre","l":"\n"},{"a":[["class","calibre13 pcalibre1 pcalibre"]],"n":"code"},{"a":[["class","calibre14 pcalibre1 pcalibre"]],"n":"span"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git rm -r CryptoLibrary\n"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git submodule add https://github.com/chaconinc/CryptoLibrary\nCloning into 'CryptoLibrary'...\nremote: Counting objects: 11, done.\nremote: Compressing objects: 100% (10/10), done.\nremote: Total 11 (delta 0), reused 11 (delta 0)\nUnpacking objects: 100% (11/11), done.\nChecking connectivity... done."},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"CryptoLibrary","n":"code","l":" 目录。\n然后才可以添加子模块："},{"a":[["class","source pcalibre1 pcalibre"]],"n":"pre","l":"\n"},{"a":[["class","calibre13 pcalibre1 pcalibre"]],"n":"code"},{"a":[["class","calibre14 pcalibre1 pcalibre"]],"n":"span"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" rm -Rf CryptoLibrary/\n"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git submodule add https://github.com/chaconinc/CryptoLibrary\n'CryptoLibrary' already exists in the index"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"submodule add","n":"code","l":"，Git 会朝你大喊："},{"a":[["class","source pcalibre1 pcalibre"]],"n":"pre","l":"\n"},{"a":[["class","calibre13 pcalibre1 pcalibre"]],"n":"code"},{"a":[["class","calibre14 pcalibre1 pcalibre"]],"n":"span"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git clean -fdx\nRemoving CryptoLibrary/\n\n"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git checkout add-crypto\nSwitched to branch 'add-crypto'\n\n"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" ls CryptoLibrary/\n\n"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git submodule update --init\nSubmodule path 'CryptoLibrary': checked out 'b8dda6aa182ea4464f3f3264b11e0268545172af'\n\n"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" ls CryptoLibrary/\nMakefile\tincludes\tscripts\t\tsrc"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"submodule update --init","n":"code","l":" 来重新建立和填充。"},{"a":[["class","source pcalibre1 pcalibre"]],"n":"pre","l":"\n"},{"a":[["class","calibre13 pcalibre1 pcalibre"]],"n":"code"},{"a":[["class","calibre14 pcalibre1 pcalibre"]],"n":"span"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git checkout -b add-crypto\nSwitched to a new branch 'add-crypto'\n\n"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git submodule add https://github.com/chaconinc/CryptoLibrary\nCloning into 'CryptoLibrary'...\n...\n\n"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git commit -am "},{"a":[["class","pcalibre1 pcalibre calibre17"]],"x":"'adding crypto library'","n":"span","l":"\n[add-crypto 4445836] adding crypto library\n 2 files changed, 4 insertions(+)\n create mode 160000 CryptoLibrary\n\n"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git checkout master\nwarning: unable to rmdir CryptoLibrary: Directory not empty\nSwitched to branch 'master'\nYour branch is up-to-date with 'origin/master'.\n\n"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git status\nOn branch master\nYour branch is up-to-date with 'origin/master'.\n\nUntracked files:\n  (use \"git add <file>...\" to include in what will be committed)\n\n\tCryptoLibrary/\n\nnothing added to commit but untracked files present (use \"git add\" to track)"},{"a":[["class","pcalibre1 calibre7 pcalibre"],["id","_子模块技巧"]],"x":"子模块技巧","n":"h3","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"你可以做几件事情来让用子模块工作轻松一点儿。","n":"p","l":"\n"},{"a":[["class","chapter pcalibre1 pcalibre"],["title","子模块遍历"]],"x":"\n","n":"section","l":"\n"},{"a":[["class","chapter pcalibre1 pcalibre"],["title","有用的别名"]],"x":"\n","n":"section","l":"\n"},{"a":[["class","calibre29 pcalibre1 pcalibre"],["id","_有用的别名"]],"x":"有用的别名","n":"h4","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"你可能想为其中一些命令设置别名，因为它们可能会非常长而你又不能设置选项作为它们的默认选项。\n我们在 ","n":"p","l":"\n"},{"a":[["class","listing pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"这样当你想要更新子模块时可以简单地运行 ","n":"p","l":"\n"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"git supdate","n":"code","l":"，或 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"git spush","n":"code","l":" 检查子模块依赖后推送。"},{"a":[["class","source pcalibre1 pcalibre"]],"n":"pre","l":"\n"},{"a":[["class","calibre13 pcalibre1 pcalibre"]],"n":"code"},{"a":[["class","calibre14 pcalibre1 pcalibre"]],"n":"span"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git config alias.sdiff "},{"a":[["class","pcalibre1 pcalibre calibre17"]],"x":"'!'\"git diff && git submodule foreach 'git diff'\"","n":"span","l":"\n"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git config alias.spush "},{"a":[["class","pcalibre1 pcalibre calibre17"]],"x":"'push --recurse-submodules=on-demand'","n":"span","l":"\n"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git config alias.supdate "},{"a":[["class","pcalibre1 pcalibre calibre17"]],"x":"'submodule update --remote --merge'","n":"span"},{"a":[["class","link pcalibre5 pcalibre4 pcalibre3 pcalibre2 pcalibre1 pcalibre"],["href","javascript:void(0)"],["id","xref--ch02-git-basics--r_git_aliases"],["data-ezPJKgrMLI5iYpd7vlZT7E","{\"frag\": \"r_git_aliases\", \"name\": \"text/part0007.html\"}"]],"x":"Git 别名","n":"a","l":" 介绍了设置 Git 别名，但是如果你计划在 Git 中大量使用子模块的话，这里有一些例子。"},{"a":[["class","calibre29 pcalibre1 pcalibre"],["id","_子模块遍历"]],"x":"子模块遍历","n":"h4","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"有一个 ","n":"p","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"例如，假设我们想要开始开发一项新功能或者修复一些错误，并且需要在几个子模块内工作。\n我们可以轻松地保存所有子模块的工作进度。","n":"p","l":"\n"},{"a":[["class","listing pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"然后我们可以创建一个新分支，并将所有子模块都切换过去。","n":"p","l":"\n"},{"a":[["class","listing pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"你应该明白。\n能够生成一个主项目与所有子项目的改动的统一差异是非常有用的。","n":"p","l":"\n"},{"a":[["class","listing pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"在这里，我们看到子模块中定义了一个函数并在主项目中调用了它。\n这明显是个简化了的例子，但是希望它能让你明白这种方法的用处。","n":"p","l":"\n"},{"a":[["class","source pcalibre1 pcalibre"]],"n":"pre","l":"\n"},{"a":[["class","calibre13 pcalibre1 pcalibre"]],"n":"code"},{"a":[["class","calibre14 pcalibre1 pcalibre"]],"n":"span"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git diff; git submodule foreach "},{"a":[["class","pcalibre1 pcalibre calibre17"]],"x":"'git diff'","n":"span","l":"\nSubmodule DbConnector contains modified content\ndiff --git a/src/main.c b/src/main.c\nindex 210f1ae..1f0acdc 100644\n--- a/src/main.c\n+++ b/src/main.c\n@@ -245,6 +245,8 @@ static int handle_alias(int *argcp, const char ***argv)\n\n      commit_pager_choice();\n\n+     url = url_decode(url_orig);\n+\n      /* build alias_argv */\n      alias_argv = xmalloc(sizeof(*alias_argv) * (argc + 1));\n      alias_argv[0] = alias_string + 1;\nEntering 'DbConnector'\ndiff --git a/src/db.c b/src/db.c\nindex 1aaefb6..5297645 100644\n--- a/src/db.c\n+++ b/src/db.c\n@@ -93,6 +93,11 @@ char *url_decode_mem(const char *url, int len)\n        return url_decode_internal(&url, len, NULL, &out, 0);\n }\n\n+char *url_decode(const char *url)\n+{\n+       return url_decode_mem(url, strlen(url));\n+}\n+\n char *url_decode_parameter_name(const char **query)\n {\n        struct strbuf out = STRBUF_INIT;"},{"a":[["class","source pcalibre1 pcalibre"]],"n":"pre","l":"\n"},{"a":[["class","calibre13 pcalibre1 pcalibre"]],"n":"code"},{"a":[["class","calibre14 pcalibre1 pcalibre"]],"n":"span"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git submodule foreach "},{"a":[["class","pcalibre1 pcalibre calibre17"]],"x":"'git checkout -b featureA'","n":"span","l":"\nEntering 'CryptoLibrary'\nSwitched to a new branch 'featureA'\nEntering 'DbConnector'\nSwitched to a new branch 'featureA'"},{"a":[["class","source pcalibre1 pcalibre"]],"n":"pre","l":"\n"},{"a":[["class","calibre13 pcalibre1 pcalibre"]],"n":"code"},{"a":[["class","calibre14 pcalibre1 pcalibre"]],"n":"span"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git submodule foreach "},{"a":[["class","pcalibre1 pcalibre calibre17"]],"x":"'git stash'","n":"span","l":"\nEntering 'CryptoLibrary'\nNo local changes to save\nEntering 'DbConnector'\nSaved working directory and index state WIP on stable: 82d2ad3 Merge from origin/stable\nHEAD is now at 82d2ad3 Merge from origin/stable"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"foreach","n":"code","l":" 子模块命令，它能在每一个子模块中运行任意命令。\n如果项目中包含了大量子模块，这会非常有用。"},{"a":[["class","pcalibre1 calibre7 pcalibre"],["id","_在包含子模块的项目上工作"]],"x":"在包含子模块的项目上工作","n":"h3","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"现在我们有一份包含子模块的项目副本，我们将会同时在主项目和子模块项目上与队员协作。","n":"p","l":"\n"},{"a":[["class","chapter pcalibre1 pcalibre"],["title","拉取上游修改"]],"x":"\n","n":"section","l":"\n"},{"a":[["class","chapter pcalibre1 pcalibre"],["title","在子模块上工作"]],"x":"\n","n":"section","l":"\n"},{"a":[["class","chapter pcalibre1 pcalibre"],["title","发布子模块改动"]],"x":"\n","n":"section","l":"\n"},{"a":[["class","chapter pcalibre1 pcalibre"],["title","合并子模块改动"]],"x":"\n","n":"section","l":"\n"},{"a":[["class","calibre29 pcalibre1 pcalibre"],["id","_合并子模块改动"]],"x":"合并子模块改动","n":"h4","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"如果你其他人同时改动了一个子模块引用，那么可能会遇到一些问题。\n也就是说，如果子模块的历史已经分叉并且在父项目中分别提交到了分叉的分支上，那么你需要做一些工作来修复它。","n":"p","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"如果一个提交是另一个的直接祖先（一个快进式合并），那么 Git 会简单地选择之后的提交来合并，这样没什么问题。","n":"p","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"不过，Git 甚至不会尝试去进行一次简单的合并。\n如果子模块提交已经分叉且需要合并，那你会得到类似下面的信息：","n":"p","l":"\n"},{"a":[["class","listing pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"所以本质上 Git 在这里指出了子模块历史中的两个分支记录点已经分叉并且需要合并。\n它将其解释为 “merge following commits not found”（未找到接下来需要合并的提交），虽然这有点令人困惑，不过之后我们会解释为什么是这样。","n":"p","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"为了解决这个问题，你需要弄清楚子模块应该处于哪种状态。\n奇怪的是，Git 并不会给你多少能帮你摆脱困境的信息，甚至连两边提交历史中的 SHA-1 值都没有。\n幸运的是，这很容易解决。\n如果你运行 ","n":"p","l":"\n"},{"a":[["class","listing pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"所以，在本例中，","n":"p","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"来自另一边的提交的 SHA-1 值比较重要。\n它是需要你来合并解决的。\n你可以尝试直接通过 SHA-1 合并，也可以为它创建一个分支然后尝试合并。\n我们建议后者，哪怕只是为了一个更漂亮的合并提交信息。","n":"p","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"所以，我们将会进入子模块目录，基于 ","n":"p","l":"\n"},{"a":[["class","listing pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"我们在这儿得到了一个真正的合并冲突，所以如果想要解决并提交它，那么只需简单地通过结果来更新主项目。","n":"p","l":"\n"},{"a":[["class","listing pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","content pcalibre1 pcalibre"]],"x":"\n","n":"div","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"这可能会让你有点儿困惑，但它确实不难。","n":"p","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"有趣的是，Git 还能处理另一种情况。\n如果子模块目录中存在着这样一个合并提交，它的历史中包含了的","n":"p","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"这就是为什么前面的错误信息是 “merge following commits not found”，因为它不能 ","n":"p","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"如果它找到了一个可以接受的合并提交，你会看到类似下面的信息：","n":"p","l":"\n"},{"a":[["class","listing pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"它会建议你更新索引，就像你运行了 ","n":"p","l":"\n"},{"a":[["class","listing pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"这些命令完成了同一件事，但是通过这种方式你至少可以验证工作是否有效，以及当你在完成时可以确保子模块目录中有你的代码。","n":"p","l":"\n"},{"a":[["class","source pcalibre1 pcalibre"]],"n":"pre","l":"\n"},{"a":[["class","calibre13 pcalibre1 pcalibre"]],"n":"code"},{"a":[["class","calibre14 pcalibre1 pcalibre"]],"n":"span"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" cd DbConnector/\n"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git merge 9fd905e\nUpdating eb41d76..9fd905e\nFast-forward\n\n"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" cd ..\n"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git add DbConnector\n"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git commit -am "},{"a":[["class","pcalibre1 pcalibre calibre17"]],"x":"'Fast forwarded to a common submodule child'","n":"span"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"git add","n":"code","l":" 那样，这样会清除冲突然后提交。不过你可能不应该这样做。你可以轻松地进入子模块目录，查看差异是什么，快进到这次提交，恰当地测试，然后提交它。"},{"a":[["class","source pcalibre1 pcalibre"]],"n":"pre","l":"\n"},{"a":[["class","calibre13 pcalibre1 pcalibre"]],"n":"code"},{"a":[["class","calibre14 pcalibre1 pcalibre"]],"n":"span"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git merge origin/master\nwarning: Failed to merge submodule DbConnector (not fast-forward)\nFound a possible merge resolution for the submodule:\n 9fd905e5d7f45a0d4cbc43d1ee550f16a30e825a: > merged our changes\nIf this is correct simply add it to the index for example\nby using:\n\n  git update-index --cacheinfo 160000 9fd905e5d7f45a0d4cbc43d1ee550f16a30e825a \"DbConnector\"\n\nwhich will accept this suggestion.\nAuto-merging DbConnector\nCONFLICT (submodule): Merge conflict in DbConnector\nAutomatic merge failed; fix conflicts and then commit the result."},{"a":[["class","calibre12 pcalibre1 pcalibre"]],"x":"这样","n":"strong","l":" 做。\n它让人困惑是因为"},{"a":[["class","calibre12 pcalibre1 pcalibre"]],"x":"谁能想到它会尝试这样做？","n":"strong"},{"a":[["class","calibre12 pcalibre1 pcalibre"]],"x":"两边","n":"strong","l":"的提交，那么 Git 会建议你将它作为一个可行的解决方案。\n它看到有人在子模块项目的某一点上合并了包含这两次提交的分支，所以你可能想要那个。"},{"a":[["class","calibre30 pcalibre1 pcalibre"]],"x":"\n","n":"ol","l":"\n"},{"a":[["class","calibre31 pcalibre1 pcalibre"]],"n":"li","l":"\n"},{"a":[["class","calibre31 pcalibre1 pcalibre"]],"n":"li","l":"\n"},{"a":[["class","calibre31 pcalibre1 pcalibre"]],"n":"li","l":"\n"},{"a":[["class","calibre31 pcalibre1 pcalibre"]],"n":"li","l":"\n"},{"a":[["class","calibre31 pcalibre1 pcalibre"]],"n":"li","l":"\n"},{"a":[["class","conum1 pcalibre1 pcalibre"],["data-value","5"]],"x":"⑤","n":"i","l":" 提交我们的合并"},{"a":[["class","conum1 pcalibre1 pcalibre"],["data-value","4"]],"x":"④","n":"i","l":" 解决冲突的子模块记录"},{"a":[["class","conum1 pcalibre1 pcalibre"],["data-value","3"]],"x":"③","n":"i","l":" 再次检查 SHA-1 值"},{"a":[["class","conum1 pcalibre1 pcalibre"],["data-value","2"]],"x":"②","n":"i","l":" 然后返回到主项目目录中"},{"a":[["class","conum1 pcalibre1 pcalibre"],["data-value","1"]],"x":"①","n":"i","l":" 首先解决冲突"},{"a":[["class","source pcalibre1 pcalibre"]],"n":"pre","l":"\n"},{"a":[["class","calibre13 pcalibre1 pcalibre"]],"n":"code"},{"a":[["class","calibre14 pcalibre1 pcalibre"]],"n":"span"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" vim src/main.c "},{"a":[["class","conum pcalibre1 pcalibre"],["data-value","1"]],"x":"①","n":"i","l":"\n"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git add src/main.c\n"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git commit -am "},{"a":[["class","pcalibre1 pcalibre calibre17"]],"x":"'merged our changes'","n":"span","l":"\nRecorded resolution for 'src/main.c'.\n[master 9fd905e] merged our changes\n\n"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" cd .. "},{"a":[["class","conum pcalibre1 pcalibre"],["data-value","2"]],"x":"②","n":"i","l":"\n"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git diff "},{"a":[["class","conum pcalibre1 pcalibre"],["data-value","3"]],"x":"③","n":"i","l":"\ndiff --cc DbConnector\nindex eb41d76,c771610..0000000\n--- a/DbConnector\n+++ b/DbConnector\n@@@ -1,1 -1,1 +1,1 @@@\n- Subproject commit eb41d764bccf88be77aced643c13a7fa86714135\n -Subproject commit c77161012afbbe1f58b5053316ead08f4b7e6d1d\n++Subproject commit 9fd905e5d7f45a0d4cbc43d1ee550f16a30e825a\n"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git add DbConnector "},{"a":[["class","conum pcalibre1 pcalibre"],["data-value","4"]],"x":"④","n":"i","l":"\n\n"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git commit -m "},{"a":[["class","pcalibre1 pcalibre calibre17"]],"x":"\"Merge Tom's Changes\"","n":"span","l":" "},{"a":[["class","conum pcalibre1 pcalibre"],["data-value","5"]],"x":"⑤","n":"i","l":"\n[master 10d2c60] Merge Tom's Changes"},{"a":[["class","source pcalibre1 pcalibre"]],"n":"pre","l":"\n"},{"a":[["class","calibre13 pcalibre1 pcalibre"]],"n":"code"},{"a":[["class","calibre14 pcalibre1 pcalibre"]],"n":"span"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" cd DbConnector\n\n"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git rev-parse HEAD\neb41d764bccf88be77aced643c13a7fa86714135\n\n"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git branch try-merge c771610\n"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"(DbConnector) $","n":"span","l":" git merge try-merge\nAuto-merging src/main.c\nCONFLICT (content): Merge conflict in src/main.c\nRecorded preimage for 'src/main.c'\nAutomatic merge failed; fix conflicts and then commit the result."},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"git diff","n":"code","l":" 的第二个 SHA 创建一个分支然后手动合并。"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"eb41d76","n":"code","l":" 是我们的子模块中"},{"a":[["class","calibre12 pcalibre1 pcalibre"]],"x":"大家共有","n":"strong","l":"的提交，而 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"c771610","n":"code","l":" 是上游拥有的提交。\n如果我们进入子模块目录中，它应该已经在 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"eb41d76","n":"code","l":" 上了，因为合并没有动过它。\n如果不是的话，无论什么原因，你都可以简单地创建并检出一个指向它的分支。"},{"a":[["class","source pcalibre1 pcalibre"]],"n":"pre","l":"\n"},{"a":[["class","calibre13 pcalibre1 pcalibre"]],"n":"code"},{"a":[["class","calibre14 pcalibre1 pcalibre"]],"n":"span"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git diff\ndiff --cc DbConnector\nindex eb41d76,c771610..0000000\n--- a/DbConnector\n+++ b/DbConnector"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"git diff","n":"code","l":"，就会得到试图合并的两个分支中记录的提交的 SHA-1 值。"},{"a":[["class","source pcalibre1 pcalibre"]],"n":"pre","l":"\n"},{"a":[["class","calibre13 pcalibre1 pcalibre"]],"n":"code"},{"a":[["class","calibre14 pcalibre1 pcalibre"]],"n":"span"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git pull\nremote: Counting objects: 2, done.\nremote: Compressing objects: 100% (1/1), done.\nremote: Total 2 (delta 1), reused 2 (delta 1)\nUnpacking objects: 100% (2/2), done.\nFrom https://github.com/chaconinc/MainProject\n   9a377d1..eb974f8  master     -> origin/master\nFetching submodule DbConnector\nwarning: Failed to merge submodule DbConnector (merge following commits not found)\nAuto-merging DbConnector\nCONFLICT (submodule): Merge conflict in DbConnector\nAutomatic merge failed; fix conflicts and then commit the result."},{"a":[["class","calibre29 pcalibre1 pcalibre"],["id","r_publishing_submodules"]],"x":"发布子模块改动","n":"h4","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"现在我们的子模块目录中有一些改动。\n其中有一些是我们通过更新从上游引入的，而另一些是本地生成的，由于我们还没有推送它们，所以对任何其他人都不可用。","n":"p","l":"\n"},{"a":[["class","listing pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"如果我们在主项目中提交并推送但并不推送子模块上的改动，其他尝试检出我们修改的人会遇到麻烦，因为他们无法得到依赖的子模块改动。\n那些改动只存在于我们本地的拷贝中。","n":"p","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"为了确保这不会发生，你可以让 Git 在推送到主项目前检查所有子模块是否已推送。\n","n":"p","l":"\n"},{"a":[["class","listing pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"如你所见，它也给我们了一些有用的建议，指导接下来该如何做。\n最简单的选项是进入每一个子模块中然后手动推送到远程仓库，确保它们能被外部访问到，之后再次尝试这次推送。","n":"p","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"另一个选项是使用 “on-demand” 值，它会尝试为你这样做。","n":"p","l":"\n"},{"a":[["class","listing pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"如你所见，Git 进入到 DbConnector 模块中然后在推送主项目前推送了它。\n如果那个子模块因为某些原因推送失败，主项目也会推送失败。","n":"p","l":"\n"},{"a":[["class","source pcalibre1 pcalibre"]],"n":"pre","l":"\n"},{"a":[["class","calibre13 pcalibre1 pcalibre"]],"n":"code"},{"a":[["class","calibre14 pcalibre1 pcalibre"]],"n":"span"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git push --recurse-submodules=on-demand\nPushing submodule 'DbConnector'\nCounting objects: 9, done.\nDelta compression using up to 8 threads.\nCompressing objects: 100% (8/8), done.\nWriting objects: 100% (9/9), 917 bytes | 0 bytes/s, done.\nTotal 9 (delta 3), reused 0 (delta 0)\nTo https://github.com/chaconinc/DbConnector\n   c75e92a..82d2ad3  stable -> stable\nCounting objects: 2, done.\nDelta compression using up to 8 threads.\nCompressing objects: 100% (2/2), done.\nWriting objects: 100% (2/2), 266 bytes | 0 bytes/s, done.\nTotal 2 (delta 1), reused 0 (delta 0)\nTo https://github.com/chaconinc/MainProject\n   3d6d338..9a377d1  master -> master"},{"a":[["class","source pcalibre1 pcalibre"]],"n":"pre","l":"\n"},{"a":[["class","calibre13 pcalibre1 pcalibre"]],"n":"code"},{"a":[["class","calibre14 pcalibre1 pcalibre"]],"n":"span"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git push --recurse-submodules=check\nThe following submodule paths contain changes that can\nnot be found on any remote:\n  DbConnector\n\nPlease try\n\n\tgit push --recurse-submodules=on-demand\n\nor cd to the path and use\n\n\tgit push\n\nto push them to a remote."},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"git push","n":"code","l":" 命令接受可以设置为 “check” 或 “on-demand” 的 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"--recurse-submodules","n":"code","l":" 参数。\n如果任何提交的子模块改动没有推送那么 “check” 选项会直接使 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"push","n":"code","l":" 操作失败。"},{"a":[["class","source pcalibre1 pcalibre"]],"n":"pre","l":"\n"},{"a":[["class","calibre13 pcalibre1 pcalibre"]],"n":"code"},{"a":[["class","calibre14 pcalibre1 pcalibre"]],"n":"span"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git diff\nSubmodule DbConnector c87d55d..82d2ad3:\n  > Merge from origin/stable\n  > updated setup script\n  > unicode support\n  > remove unnecessary method\n  > add new option for conn pooling"},{"a":[["class","calibre29 pcalibre1 pcalibre"],["id","_在子模块上工作"]],"x":"在子模块上工作","n":"h4","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"你很有可能正在使用子模块，因为你确实想在子模块中编写代码的同时，还想在主项目上编写代码（或者跨子模块工作）。\n否则你大概只能用简单的依赖管理系统（如 Maven 或 Rubygems）来替代了。","n":"p","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"现在我们将通过一个例子来演示如何在子模块与主项目中同时做修改，以及如何同时提交与发布那些修改。","n":"p","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"到目前为止，当我们运行 ","n":"p","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"为了将子模块设置得更容易进入并修改，你需要做两件事。\n首先，进入每个子模块并检出其相应的工作分支。\n接着，若你做了更改就需要告诉 Git 它该做什么，然后运行 ","n":"p","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"首先，让我们进入子模块目录然后检出一个分支。","n":"p","l":"\n"},{"a":[["class","listing pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"然后尝试用 “merge” 选项。\n为了手动指定它，我们只需给 ","n":"p","l":"\n"},{"a":[["class","listing pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"如果我们进入 DbConnector 目录，可以发现新的改动已经合并入本地 ","n":"p","l":"\n"},{"a":[["class","listing pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"如果我们现在更新子模块，就会看到当我们在本地做了更改时上游也有一个改动，我们需要将它并入本地。","n":"p","l":"\n"},{"a":[["class","listing pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"如果你忘记 ","n":"p","l":"\n"},{"a":[["class","listing pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"即便这真的发生了也不要紧，你只需回到目录中再次检出你的分支（即还包含着你的工作的分支）然后手动地合并或变基 ","n":"p","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"如果你没有提交子模块的改动，那么运行一个子模块更新也不会出现问题，此时 Git 会只抓取更改而并不会覆盖子模块目录中未保存的工作。","n":"p","l":"\n"},{"a":[["class","listing pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"如果你做了一些与上游改动冲突的改动，当运行更新时 Git 会让你知道。","n":"p","l":"\n"},{"a":[["class","listing pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"你可以进入子模块目录中然后就像平时那样修复冲突。","n":"p","l":"\n"},{"a":[["class","source pcalibre1 pcalibre"]],"n":"pre","l":"\n"},{"a":[["class","calibre13 pcalibre1 pcalibre"]],"n":"code"},{"a":[["class","calibre14 pcalibre1 pcalibre"]],"n":"span"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git submodule update --remote --merge\nAuto-merging scripts/setup.sh\nCONFLICT (content): Merge conflict in scripts/setup.sh\nRecorded preimage for 'scripts/setup.sh'\nAutomatic merge failed; fix conflicts and then commit the result.\nUnable to merge 'c75e92a2b3855c9e5b66f915308390d9db204aca' in submodule path 'DbConnector'"},{"a":[["class","source pcalibre1 pcalibre"]],"n":"pre","l":"\n"},{"a":[["class","calibre13 pcalibre1 pcalibre"]],"n":"code"},{"a":[["class","calibre14 pcalibre1 pcalibre"]],"n":"span"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git submodule update --remote\nremote: Counting objects: 4, done.\nremote: Compressing objects: 100% (3/3), done.\nremote: Total 4 (delta 0), reused 4 (delta 0)\nUnpacking objects: 100% (4/4), done.\nFrom https://github.com/chaconinc/DbConnector\n   5d60ef9..c75e92a  stable     -> origin/stable\nerror: Your local changes to the following files would be overwritten by checkout:\n\tscripts/setup.sh\nPlease, commit your changes or stash them before you can switch branches.\nAborting\nUnable to checkout 'c75e92a2b3855c9e5b66f915308390d9db204aca' in submodule path 'DbConnector'"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"origin/stable","n":"code","l":"（或任何一个你想要的远程分支）就行了。"},{"a":[["class","source pcalibre1 pcalibre"]],"n":"pre","l":"\n"},{"a":[["class","calibre13 pcalibre1 pcalibre"]],"n":"code"},{"a":[["class","calibre14 pcalibre1 pcalibre"]],"n":"span"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git submodule update --remote\nSubmodule path 'DbConnector': checked out '5d60ef9bbebf5a0c1c1050f242ceeb54ad58da94'"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"--rebase","n":"code","l":" 或 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"--merge","n":"code","l":"，Git 会将子模块更新为服务器上的状态。并且会将项目重置为一个游离的 HEAD 状态。"},{"a":[["class","source pcalibre1 pcalibre"]],"n":"pre","l":"\n"},{"a":[["class","calibre13 pcalibre1 pcalibre"]],"n":"code"},{"a":[["class","calibre14 pcalibre1 pcalibre"]],"n":"span"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git submodule update --remote --rebase\nFirst, rewinding head to replay your work on top of it...\nApplying: unicode support\nSubmodule path 'DbConnector': rebased into '5d60ef9bbebf5a0c1c1050f242ceeb54ad58da94'"},{"a":[["class","source pcalibre1 pcalibre"]],"n":"pre","l":"\n"},{"a":[["class","calibre13 pcalibre1 pcalibre"]],"n":"code"},{"a":[["class","calibre14 pcalibre1 pcalibre"]],"n":"span"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" cd DbConnector/\n"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" vim src/db.c\n"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git commit -am "},{"a":[["class","pcalibre1 pcalibre calibre17"]],"x":"'unicode support'","n":"span","l":"\n[stable f906e16] unicode support\n 1 file changed, 1 insertion(+)"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"stable","n":"code","l":" 分支。\n现在让我们看看当我们对库做一些本地的改动而同时其他人推送另外一个修改到上游时会发生什么。"},{"a":[["class","source pcalibre1 pcalibre"]],"n":"pre","l":"\n"},{"a":[["class","calibre13 pcalibre1 pcalibre"]],"n":"code"},{"a":[["class","calibre14 pcalibre1 pcalibre"]],"n":"span"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git submodule update --remote --merge\nremote: Counting objects: 4, done.\nremote: Compressing objects: 100% (2/2), done.\nremote: Total 4 (delta 2), reused 4 (delta 2)\nUnpacking objects: 100% (4/4), done.\nFrom https://github.com/chaconinc/DbConnector\n   c87d55d..92c7337  stable     -> origin/stable\nUpdating c87d55d..92c7337\nFast-forward\n src/main.c | 1 +\n 1 file changed, 1 insertion(+)\nSubmodule path 'DbConnector': merged in '92c7337b30ef9e0893e758dac2459d07362ab5ea'"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"update","n":"code","l":" 添加 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"--merge","n":"code","l":" 选项即可。\n这时我们将会看到服务器上的这个子模块有一个改动并且它被合并了进来。"},{"a":[["class","source pcalibre1 pcalibre"]],"n":"pre","l":"\n"},{"a":[["class","calibre13 pcalibre1 pcalibre"]],"n":"code"},{"a":[["class","calibre14 pcalibre1 pcalibre"]],"n":"span"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git checkout stable\nSwitched to branch 'stable'"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"git submodule update --remote","n":"code","l":" 来从上游拉取新工作。\n你可以选择将它们合并到你的本地工作中，也可以尝试将你的工作变基到新的更改上。"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"git submodule update","n":"code","l":" 从子模块仓库中抓取修改时，Git 将会获得这些改动并更新子目录中的文件，但是会将子仓库留在一个称作 “游离的 HEAD” 的状态。\n这意味着没有本地工作分支（例如 “master”）跟踪改动。\n所以你做的任何改动都不会被跟踪。"},{"a":[["class","calibre29 pcalibre1 pcalibre"],["id","_拉取上游修改"]],"x":"拉取上游修改","n":"h4","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"在项目中使用子模块的最简模型，就是只使用子项目并不时地获取更新，而并不在你的检出中进行任何更改。\n我们来看一个简单的例子。","n":"p","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"如果想要在子模块中查看新工作，可以进入到目录中运行 ","n":"p","l":"\n"},{"a":[["class","listing pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"如果你现在返回到主项目并运行 ","n":"p","l":"\n"},{"a":[["class","listing pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"如果在此时提交，那么你会将子模块锁定为其他人更新时的新代码。","n":"p","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"如果你不想在子目录中手动抓取与合并，那么还有种更容易的方式。\n运行 ","n":"p","l":"\n"},{"a":[["class","listing pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"此命令默认会假定你想要更新并检出子模块仓库的 ","n":"p","l":"\n"},{"a":[["class","listing pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"如果不用 ","n":"p","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"这时我们运行 ","n":"p","l":"\n"},{"a":[["class","listing pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"如果你设置了配置选项 ","n":"p","l":"\n"},{"a":[["class","listing pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"这时如果运行 ","n":"p","l":"\n"},{"a":[["class","listing pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"这非常有趣，因为我们可以直接看到将要提交到子模块中的提交日志。\n提交之后，你也可以运行 ","n":"p","l":"\n"},{"a":[["class","listing pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"当运行 ","n":"p","l":"\n"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"git submodule update --remote","n":"code","l":" 时，Git 默认会尝试更新"},{"a":[["class","calibre12 pcalibre1 pcalibre"]],"x":"所有","n":"strong","l":"子模块，所以如果有很多子模块的话，你可以传递想要更新的子模块的名字。"},{"a":[["class","source pcalibre1 pcalibre"]],"n":"pre","l":"\n"},{"a":[["class","calibre13 pcalibre1 pcalibre"]],"n":"code"},{"a":[["class","calibre14 pcalibre1 pcalibre"]],"n":"span"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git log -p --submodule\ncommit 0a24cfc121a8a3c118e0105ae4ae4c00281cf7ae\nAuthor: Scott Chacon <schacon@gmail.com>\nDate:   Wed Sep 17 16:37:02 2014 +0200\n\n    updating DbConnector for bug fixes\n\ndiff --git a/.gitmodules b/.gitmodules\nindex 6fc0b3d..fd1cc29 100644\n--- a/.gitmodules\n+++ b/.gitmodules\n@@ -1,3 +1,4 @@\n [submodule \"DbConnector\"]\n        path = DbConnector\n        url = https://github.com/chaconinc/DbConnector\n+       branch = stable\nSubmodule DbConnector c3f01dc..c87d55d:\n  > catch non-null terminated lines\n  > more robust error handling\n  > more efficient db routine\n  > better connection routine"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"git log -p","n":"code","l":" 查看这个信息。"},{"a":[["class","source pcalibre1 pcalibre"]],"n":"pre","l":"\n"},{"a":[["class","calibre13 pcalibre1 pcalibre"]],"n":"code"},{"a":[["class","calibre14 pcalibre1 pcalibre"]],"n":"span"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git diff\ndiff --git a/.gitmodules b/.gitmodules\nindex 6fc0b3d..fd1cc29 100644\n--- a/.gitmodules\n+++ b/.gitmodules\n@@ -1,3 +1,4 @@\n [submodule \"DbConnector\"]\n        path = DbConnector\n        url = https://github.com/chaconinc/DbConnector\n+       branch = stable\n Submodule DbConnector c3f01dc..c87d55d:\n  > catch non-null terminated lines\n  > more robust error handling\n  > more efficient db routine\n  > better connection routine"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"git diff","n":"code","l":"，可以看到我们修改了 .gitmodules 文件，同时还有几个已拉取的提交需要提交到我们自己的子模块项目中。"},{"a":[["class","source pcalibre1 pcalibre"]],"n":"pre","l":"\n"},{"a":[["class","calibre13 pcalibre1 pcalibre"]],"n":"code"},{"a":[["class","calibre14 pcalibre1 pcalibre"]],"n":"span"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git config status.submodulesummary 1\n\n"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git status\nOn branch master\nYour branch is up-to-date with 'origin/master'.\n\nChanges not staged for commit:\n  (use \"git add <file>...\" to update what will be committed)\n  (use \"git checkout -- <file>...\" to discard changes in working directory)\n\n\tmodified:   .gitmodules\n\tmodified:   DbConnector (new commits)\n\nSubmodules changed but not updated:\n\n* DbConnector c3f01dc...c87d55d (4):\n  > catch non-null terminated lines"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"status.submodulesummary","n":"code","l":"，Git 也会显示你的子模块的更改摘要："},{"a":[["class","source pcalibre1 pcalibre"]],"n":"pre","l":"\n"},{"a":[["class","calibre13 pcalibre1 pcalibre"]],"n":"code"},{"a":[["class","calibre14 pcalibre1 pcalibre"]],"n":"span"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git status\nOn branch master\nYour branch is up-to-date with 'origin/master'.\n\nChanges not staged for commit:\n  (use \"git add <file>...\" to update what will be committed)\n  (use \"git checkout -- <file>...\" to discard changes in working directory)\n\n  modified:   .gitmodules\n  modified:   DbConnector (new commits)\n\nno changes added to commit (use \"git add\" and/or \"git commit -a\")"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"git status","n":"code","l":"，Git 会显示子模块中有 “新提交”。"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"-f .gitmodules","n":"code","l":" 选项，那么它只会为你做修改。但是在仓库中保留跟踪信息更有意义一些，因为其他人也可以得到同样的效果。"},{"a":[["class","source pcalibre1 pcalibre"]],"n":"pre","l":"\n"},{"a":[["class","calibre13 pcalibre1 pcalibre"]],"n":"code"},{"a":[["class","calibre14 pcalibre1 pcalibre"]],"n":"span"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git config -f .gitmodules submodule.DbConnector.branch stable\n\n"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git submodule update --remote\nremote: Counting objects: 4, done.\nremote: Compressing objects: 100% (2/2), done.\nremote: Total 4 (delta 2), reused 4 (delta 2)\nUnpacking objects: 100% (4/4), done.\nFrom https://github.com/chaconinc/DbConnector\n   27cf5d3..c87d55d  stable -> origin/stable\nSubmodule path 'DbConnector': checked out 'c87d55d4c6d4b05ee34fbc8cb6f7bf4585ae6687'"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"master","n":"code","l":" 分支。\n不过你也可以设置为想要的其他分支。\n例如，你想要 DbConnector 子模块跟踪仓库的 “stable” 分支，那么既可以在 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":".gitmodules","n":"code","l":" 文件中设置（这样其他人也可以跟踪它），也可以只在本地的 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":".git/config","n":"code","l":" 文件中设置。\n让我们在 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":".gitmodules","n":"code","l":" 文件中设置它："},{"a":[["class","source pcalibre1 pcalibre"]],"n":"pre","l":"\n"},{"a":[["class","calibre13 pcalibre1 pcalibre"]],"n":"code"},{"a":[["class","calibre14 pcalibre1 pcalibre"]],"n":"span"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git submodule update --remote DbConnector\nremote: Counting objects: 4, done.\nremote: Compressing objects: 100% (2/2), done.\nremote: Total 4 (delta 2), reused 4 (delta 2)\nUnpacking objects: 100% (4/4), done.\nFrom https://github.com/chaconinc/DbConnector\n   3f19983..d0354fc  master     -> origin/master\nSubmodule path 'DbConnector': checked out 'd0354fc054692d3906c85c3af05ddce39a1c0644'"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"git submodule update --remote","n":"code","l":"，Git 将会进入子模块然后抓取并更新。"},{"a":[["class","source pcalibre1 pcalibre"]],"n":"pre","l":"\n"},{"a":[["class","calibre13 pcalibre1 pcalibre"]],"n":"code"},{"a":[["class","calibre14 pcalibre1 pcalibre"]],"n":"span"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git config --global diff.submodule log\n"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git diff\nSubmodule DbConnector c3f01dc..d0354fc:\n  > more efficient db routine\n  > better connection routine"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"git diff --submodule","n":"code","l":"，就会看到子模块被更新的同时获得了一个包含新添加提交的列表。\n如果你不想每次运行 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"git diff","n":"code","l":" 时都输入 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"--submodle","n":"code","l":"，那么可以将 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"diff.submodule","n":"code","l":" 设置为 “log” 来将其作为默认行为。"},{"a":[["class","source pcalibre1 pcalibre"]],"n":"pre","l":"\n"},{"a":[["class","calibre13 pcalibre1 pcalibre"]],"n":"code"},{"a":[["class","calibre14 pcalibre1 pcalibre"]],"n":"span"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git fetch\nFrom https://github.com/chaconinc/DbConnector\n   c3f01dc..d0354fc  master     -> origin/master\n"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git merge origin/master\nUpdating c3f01dc..d0354fc\nFast-forward\n scripts/connect.sh | 1 +\n src/db.c           | 1 +\n 2 files changed, 2 insertions(+)"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"git fetch","n":"code","l":" 与 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"git merge","n":"code","l":"，合并上游分支来更新本地代码。"},{"a":[["class","pcalibre1 calibre7 pcalibre"],["id","r_cloning_submodules"]],"x":"克隆含有子模块的项目","n":"h3","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"接下来我们将会克隆一个含有子模块的项目。\n当你在克隆这样的项目时，默认会包含该子模块目录，但其中还没有任何文件：","n":"p","l":"\n"},{"a":[["class","listing pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"其中有 ","n":"p","l":"\n"},{"a":[["class","listing pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"现在 ","n":"p","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"不过还有更简单一点的方式。\n如果给 ","n":"p","l":"\n"},{"a":[["class","listing pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","source pcalibre1 pcalibre"]],"n":"pre","l":"\n"},{"a":[["class","calibre13 pcalibre1 pcalibre"]],"n":"code"},{"a":[["class","calibre14 pcalibre1 pcalibre"]],"n":"span"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git clone --recursive https://github.com/chaconinc/MainProject\nCloning into 'MainProject'...\nremote: Counting objects: 14, done.\nremote: Compressing objects: 100% (13/13), done.\nremote: Total 14 (delta 1), reused 13 (delta 0)\nUnpacking objects: 100% (14/14), done.\nChecking connectivity... done.\nSubmodule 'DbConnector' (https://github.com/chaconinc/DbConnector) registered for path 'DbConnector'\nCloning into 'DbConnector'...\nremote: Counting objects: 11, done.\nremote: Compressing objects: 100% (10/10), done.\nremote: Total 11 (delta 0), reused 11 (delta 0)\nUnpacking objects: 100% (11/11), done.\nChecking connectivity... done.\nSubmodule path 'DbConnector': checked out 'c3f01dc8862123d317dd46284b05b6892c7b29bc'"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"git clone","n":"code","l":" 命令传递 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"--recursive","n":"code","l":" 选项，它就会自动初始化并更新仓库中的每一个子模块。"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"DbConnector","n":"code","l":" 子目录是处在和之前提交时相同的状态了。"},{"a":[["class","source pcalibre1 pcalibre"]],"n":"pre","l":"\n"},{"a":[["class","calibre13 pcalibre1 pcalibre"]],"n":"code"},{"a":[["class","calibre14 pcalibre1 pcalibre"]],"n":"span"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git submodule init\nSubmodule 'DbConnector' (https://github.com/chaconinc/DbConnector) registered for path 'DbConnector'\n"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git submodule update\nCloning into 'DbConnector'...\nremote: Counting objects: 11, done.\nremote: Compressing objects: 100% (10/10), done.\nremote: Total 11 (delta 0), reused 11 (delta 0)\nUnpacking objects: 100% (11/11), done.\nChecking connectivity... done.\nSubmodule path 'DbConnector': checked out 'c3f01dc8862123d317dd46284b05b6892c7b29bc'"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"DbConnector","n":"code","l":" 目录，不过是空的。\n你必须运行两个命令："},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"git submodule init","n":"code","l":" 用来初始化本地配置文件，而 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"git submodule update","n":"code","l":" 则从该项目中抓取所有数据并检出父项目中列出的合适的提交。"},{"a":[["class","source pcalibre1 pcalibre"]],"n":"pre","l":"\n"},{"a":[["class","calibre13 pcalibre1 pcalibre"]],"n":"code"},{"a":[["class","calibre14 pcalibre1 pcalibre"]],"n":"span"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git clone https://github.com/chaconinc/MainProject\nCloning into 'MainProject'...\nremote: Counting objects: 14, done.\nremote: Compressing objects: 100% (13/13), done.\nremote: Total 14 (delta 1), reused 13 (delta 0)\nUnpacking objects: 100% (14/14), done.\nChecking connectivity... done.\n"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" cd MainProject\n"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" ls -la\ntotal 16\ndrwxr-xr-x   9 schacon  staff  306 Sep 17 15:21 .\ndrwxr-xr-x   7 schacon  staff  238 Sep 17 15:21 ..\ndrwxr-xr-x  13 schacon  staff  442 Sep 17 15:21 .git\n-rw-r--r--   1 schacon  staff   92 Sep 17 15:21 .gitmodules\ndrwxr-xr-x   2 schacon  staff   68 Sep 17 15:21 DbConnector\n-rw-r--r--   1 schacon  staff  756 Sep 17 15:21 Makefile\ndrwxr-xr-x   3 schacon  staff  102 Sep 17 15:21 includes\ndrwxr-xr-x   4 schacon  staff  136 Sep 17 15:21 scripts\ndrwxr-xr-x   4 schacon  staff  136 Sep 17 15:21 src\n"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" cd DbConnector/\n"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" ls\n"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span"},{"a":[["class","pcalibre1 calibre7 pcalibre"],["id","r_starting_submodules"]],"x":"开始使用子模块","n":"h3","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"我们将要演示如何在一个被分成一个主项目与几个子项目的项目上开发。","n":"p","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"我们首先将一个已存在的 Git 仓库添加为正在工作的仓库的子模块。\n你可以通过在 ","n":"p","l":"\n"},{"a":[["class","listing pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"默认情况下，子模块会将子项目放到一个与仓库同名的目录中，本例中是 “DbConnector”。\n如果你想要放到其他地方，那么可以在命令结尾添加一个不同的路径。","n":"p","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"如果这时运行 ","n":"p","l":"\n"},{"a":[["class","listing pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"首先应当注意到新的 ","n":"p","l":"\n"},{"a":[["class","listing pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"如果有多个子模块，该文件中就会有多条记录。\n要重点注意的是，该文件也像 ","n":"p","l":"\n"},{"a":[["class","admonition pcalibre1 pcalibre8"],["title","Note"],["type","note"]],"x":"\n","n":"aside","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"在 ","n":"p","l":"\n"},{"a":[["class","listing pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"虽然 ","n":"p","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"如果你想看到更漂亮的差异输出，可以给 ","n":"p","l":"\n"},{"a":[["class","listing pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"当你提交时，会看到类似下面的信息：","n":"p","l":"\n"},{"a":[["class","listing pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"注意 DbConnector 记录的 ","n":"p","l":"\n"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"160000","n":"code","l":" 模式。\n这是 Git 中的一种特殊模式，它本质上意味着你是将一次提交记作一项目录记录的，而非将它记录成一个子目录或者一个文件。"},{"a":[["class","source pcalibre1 pcalibre"]],"n":"pre","l":"\n"},{"a":[["class","calibre13 pcalibre1 pcalibre"]],"n":"code"},{"a":[["class","calibre14 pcalibre1 pcalibre"]],"n":"span"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git commit -am "},{"a":[["class","pcalibre1 pcalibre calibre17"]],"x":"'added DbConnector module'","n":"span","l":"\n[master fb9093c] added DbConnector module\n 2 files changed, 4 insertions(+)\n create mode 100644 .gitmodules\n create mode 160000 DbConnector"},{"a":[["class","source pcalibre1 pcalibre"]],"n":"pre","l":"\n"},{"a":[["class","calibre13 pcalibre1 pcalibre"]],"n":"code"},{"a":[["class","calibre14 pcalibre1 pcalibre"]],"n":"span"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git diff --cached --submodule\ndiff --git a/.gitmodules b/.gitmodules\nnew file mode 100644\nindex 0000000..71fc376\n--- /dev/null\n+++ b/.gitmodules\n@@ -0,0 +1,3 @@\n+[submodule \"DbConnector\"]\n+       path = DbConnector\n+       url = https://github.com/chaconinc/DbConnector\nSubmodule DbConnector 0000000...c3f01dc (new submodule)"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"git diff","n":"code","l":" 传递 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"--submodule","n":"code","l":" 选项。"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"DbConnector","n":"code","l":" 是工作目录中的一个子目录，但 Git 还是会将它视作一个子模块。当你不在那个目录中时，Git 并不会跟踪它的内容，\n而是将它看作该仓库中的一个特殊提交。"},{"a":[["class","source pcalibre1 pcalibre"]],"n":"pre","l":"\n"},{"a":[["class","calibre13 pcalibre1 pcalibre"]],"n":"code"},{"a":[["class","calibre14 pcalibre1 pcalibre"]],"n":"span"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git diff --cached DbConnector\ndiff --git a/DbConnector b/DbConnector\nnew file mode 160000\nindex 0000000..c3f01dc\n--- /dev/null\n+++ b/DbConnector\n@@ -0,0 +1 @@\n+Subproject commit c3f01dc8862123d317dd46284b05b6892c7b29bc"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"git status","n":"code","l":" 输出中列出的另一个是项目文件夹记录。\n如果你运行 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"git diff","n":"code","l":"，会看到类似下面的信息："},{"a":[["class","content1 pcalibre1 pcalibre"]],"x":"\n","n":"div","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"由于 .gitmodules 文件中的 URL 是人们首先尝试克隆/拉取的地方，因此请尽可能确保你使用的URL 大家都能访问。\n例如，若你要使用的推送 URL 与他人的拉取 URL 不同，那么请使用他人能访问到的 URL。\n你也可以根据自己的需要，通过在本地执行 ","n":"p","l":"\n"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"git config submodule.DbConnector.url <私有URL>","n":"code","l":" 来覆盖这个选项的值。\n如果可行的话，一个相对路径会很有帮助。"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":".gitignore","n":"code","l":" 文件一样受到（通过）版本控制。\n它会和该项目的其他部分一同被拉取推送。\n这就是克隆该项目的人知道去哪获得子模块的原因。"},{"a":[["class","source pcalibre1 pcalibre"]],"n":"pre","l":"\n"},{"a":[["class","calibre13 pcalibre1 pcalibre"]],"n":"code"},{"a":[["class","calibre14 pcalibre1 pcalibre"]],"n":"span"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" cat .gitmodules\n[submodule \"DbConnector\"]\n\tpath = DbConnector\n\turl = https://github.com/chaconinc/DbConnector"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":".gitmodules","n":"code","l":" 文件。\n该配置文件保存了项目 URL 与已经拉取的本地目录之间的映射："},{"a":[["class","source pcalibre1 pcalibre"]],"n":"pre","l":"\n"},{"a":[["class","calibre13 pcalibre1 pcalibre"]],"n":"code"},{"a":[["class","calibre14 pcalibre1 pcalibre"]],"n":"span"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git status\nOn branch master\nYour branch is up-to-date with 'origin/master'.\n\nChanges to be committed:\n  (use \"git reset HEAD <file>...\" to unstage)\n\n\tnew file:   .gitmodules\n\tnew file:   DbConnector"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"git status","n":"code","l":"，你会注意到几件事。"},{"a":[["class","source pcalibre1 pcalibre"]],"n":"pre","l":"\n"},{"a":[["class","calibre13 pcalibre1 pcalibre"]],"n":"code"},{"a":[["class","calibre14 pcalibre1 pcalibre"]],"n":"span"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git submodule add https://github.com/chaconinc/DbConnector\nCloning into 'DbConnector'...\nremote: Counting objects: 11, done.\nremote: Compressing objects: 100% (10/10), done.\nremote: Total 11 (delta 0), reused 11 (delta 0)\nUnpacking objects: 100% (11/11), done.\nChecking connectivity... done."},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"git submodule add","n":"code","l":" 命令后面加上想要跟踪的项目 URL 来添加新的子模块。\n在本例中，我们将会添加一个名为 “DbConnector” 的库。"},{"a":[["class","calibre6 pcalibre1 pcalibre"],["id","_使用_git_调试"]],"x":"使用 Git 调试","n":"h2","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"Git 也提供了两个工具来辅助你调试项目中的问题。\n由于 Git 被设计成适用于几乎所有类型的项目，这些工具是比较通用的，但它们可以在出现问题的时候帮助你找到 bug 或者错误。","n":"p","l":"\n"},{"a":[["class","chapter pcalibre1 pcalibre"],["title","文件标注"]],"x":"\n","n":"section","l":"\n"},{"a":[["class","chapter pcalibre1 pcalibre"],["title","二分查找"]],"x":"\n","n":"section","l":"\n"},{"a":[["class","pcalibre1 calibre7 pcalibre"],["id","r_binary_search"]],"x":"二分查找","n":"h3","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"当你知道问题是在哪里引入的情况下文件标注可以帮助你查找问题。\n如果你不知道哪里出了问题，并且自从上次可以正常运行到现在已经有数十个或者上百个提交，这个时候你可以使用 ","n":"p","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"假设你刚刚在线上环境部署了你的代码，接着收到一些 bug 反馈，但这些 bug 在你之前的开发环境里没有出现过，这让你百思不得其解。\n你重新查看了你的代码，发现这个问题是可以被重现的，但是你不知道哪里出了问题。\n你可以用二分法来找到这个问题。\n首先执行 ","n":"p","l":"\n"},{"a":[["class","listing pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"Git 发现在你标记为正常的提交(v1.0)和当前的错误版本之间有大约12次提交，于是 Git 检出中间的那个提交。\n现在你可以执行测试，看看在这个提交下问题是不是还是存在。\n如果还存在，说明问题是在这个提交之前引入的；如果问题不存在，说明问题是在这个提交之后引入的。\n假设测试结果是没有问题的，你可以通过 ","n":"p","l":"\n"},{"a":[["class","listing pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"现在你在另一个提交上了，这个提交是刚刚那个测试通过的提交和有问题的提交的中点。\n你再一次执行测试，发现这个提交下是有问题的，因此你可以通过 ","n":"p","l":"\n"},{"a":[["class","listing pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"这个提交是正常的，现在 Git 拥有的信息已经可以确定引入问题的位置在哪里。\n它会告诉你第一个错误提交的 SHA-1 值并显示一些提交说明，以及哪些文件在那次提交里修改过，这样你可以找出引入 bug 的根源：","n":"p","l":"\n"},{"a":[["class","listing pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"当你完成这些操作之后，你应该执行 ","n":"p","l":"\n"},{"a":[["class","listing pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"这是一个可以帮助你在几分钟内从数百个提交中找到 bug 的强大工具。\n事实上，如果你有一个脚本在项目是正常的情况下返回 0，在不正常的情况下返回非 0，你可以使 ","n":"p","l":"\n"},{"a":[["class","listing pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"Git 会自动在每个被检出的提交里执行 ","n":"p","l":"\n"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"test-error.sh","n":"code","l":" 直到找到第一个项目不正常的提交。\n你也可以执行 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"make","n":"code","l":" 或者 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"make tests","n":"code","l":" 或者其他东西来进行自动化测试。"},{"a":[["class","source pcalibre1 pcalibre"]],"n":"pre","l":"\n"},{"a":[["class","calibre13 pcalibre1 pcalibre"]],"n":"code"},{"a":[["class","calibre14 pcalibre1 pcalibre"]],"n":"span"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git bisect start HEAD v1.0\n"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git bisect run test-error.sh"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"git bisect","n":"code","l":" 自动化这些操作。\n首先，你设定好项目正常以及不正常所在提交的二分查找范围。\n你可以通过 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"bisect start","n":"code","l":" 命令的参数来设定这两个提交，第一个参数是项目不正常的提交，第二个参数是项目正常的提交："},{"a":[["class","source pcalibre1 pcalibre"]],"n":"pre","l":"\n"},{"a":[["class","calibre13 pcalibre1 pcalibre"]],"n":"code"},{"a":[["class","calibre14 pcalibre1 pcalibre"]],"n":"span"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git bisect reset"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"git bisect reset","n":"code","l":" 重置你的 HEAD 指针到最开始的位置，否则你会停留在一个很奇怪的状态："},{"a":[["class","source pcalibre1 pcalibre"]],"n":"pre","l":"\n"},{"a":[["class","calibre13 pcalibre1 pcalibre"]],"n":"code"},{"a":[["class","calibre14 pcalibre1 pcalibre"]],"n":"span"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git bisect good\nb047b02ea83310a70fd603dc8cd7a6cd13d15c04 is first bad commit\ncommit b047b02ea83310a70fd603dc8cd7a6cd13d15c04\nAuthor: PJ Hyett <pjhyett@example.com>\nDate:   Tue Jan 27 14:48:32 2009 -0800\n\n    secure this thing\n\n:040000 040000 40ee3e7821b895e52c1695092db9bdc4c61d1730\nf24d3c6ebcfc639b1a3814550e62d60b8e68a8e4 M  config"},{"a":[["class","source pcalibre1 pcalibre"]],"n":"pre","l":"\n"},{"a":[["class","calibre13 pcalibre1 pcalibre"]],"n":"code"},{"a":[["class","calibre14 pcalibre1 pcalibre"]],"n":"span"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git bisect bad\nBisecting: 1 revisions left to test after this\n[f71ce38690acf49c1f3c9bea38e09d82a5ce6014] drop exceptions table"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"git bisect bad","n":"code","l":" 告诉 Git："},{"a":[["class","source pcalibre1 pcalibre"]],"n":"pre","l":"\n"},{"a":[["class","calibre13 pcalibre1 pcalibre"]],"n":"code"},{"a":[["class","calibre14 pcalibre1 pcalibre"]],"n":"span"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git bisect good\nBisecting: 3 revisions left to test after this\n[b047b02ea83310a70fd603dc8cd7a6cd13d15c04] secure this thing"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"git bisect good","n":"code","l":" 来告诉 Git，然后继续寻找。"},{"a":[["class","source pcalibre1 pcalibre"]],"n":"pre","l":"\n"},{"a":[["class","calibre13 pcalibre1 pcalibre"]],"n":"code"},{"a":[["class","calibre14 pcalibre1 pcalibre"]],"n":"span"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git bisect start\n"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git bisect bad\n"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git bisect good v1.0\nBisecting: 6 revisions left to test after this\n[ecb6e1bc347ccecc5f9350d878ce677feb13d3b2] error handling on repo"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"git bisect start","n":"code","l":" 来启动，接着执行 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"git bisect bad","n":"code","l":" 来告诉系统当前你所在的提交是有问题的。\n然后你必须告诉 bisect 已知的最后一次正常状态是哪次提交，使用 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"git bisect good [good_commit]","n":"code","l":"："},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"git bisect","n":"code","l":" 来帮助查找。\n"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"bisect","n":"code","l":" 命令会对你的提交历史进行二分查找来帮助你尽快找到是哪一个提交引入了问题。"},{"a":[["class","pcalibre1 calibre7 pcalibre"],["id","r_file_annotation"]],"x":"文件标注","n":"h3","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"如果你在追踪代码中的一个 bug，并且想知道是什么时候以及为何会引入，文件标注通常是最好用的工具。\n它展示了文件中每一行最后一次修改的提交。\n所以，如果你在代码中看到一个有问题的方法，你可以使用 ","n":"p","l":"\n"},{"a":[["class","listing pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"请注意，第一个字段是最后一次修改该行的提交的部分 SHA-1 值。\n接下来两个字段的值是从提交中提取出来的——作者的名字以及提交的时间——所以你就可以很轻易地找到是谁在什么时候修改了那一行。\n接下来就是行号和文件内容。\n注意一下 ","n":"p","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"另一件比较酷的事情是 Git 不会显式地记录文件的重命名。\n它会记录快照，然后在事后尝试计算出重命名的动作。\n这其中有一个很有意思的特性就是你可以让 Git 找出所有的代码移动。\n如果你在 ","n":"p","l":"\n"},{"a":[["class","listing pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"这个功能很有用。\n通常来说，你会认为复制代码过来的那个提交是最原始的提交，因为那是你第一次在这个文件中修改了这几行。\n但 Git 会告诉你，你第一次写这几行代码的那个提交才是原始提交，即使这是在另外一个文件里写的。","n":"p","l":"\n"},{"a":[["class","source pcalibre1 pcalibre"]],"n":"pre","l":"\n"},{"a":[["class","calibre13 pcalibre1 pcalibre"]],"n":"code"},{"a":[["class","calibre14 pcalibre1 pcalibre"]],"n":"span"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git blame -C -L 141,153 GITPackUpload.m\nf344f58d GITServerHandler.m (Scott 2009-01-04 141)\nf344f58d GITServerHandler.m (Scott 2009-01-04 142) - (void) gatherObjectShasFromC\nf344f58d GITServerHandler.m (Scott 2009-01-04 143) {\n70befddd GITServerHandler.m (Scott 2009-03-22 144)         //NSLog(@\"GATHER COMMI\nad11ac80 GITPackUpload.m    (Scott 2009-03-24 145)\nad11ac80 GITPackUpload.m    (Scott 2009-03-24 146)         NSString *parentSha;\nad11ac80 GITPackUpload.m    (Scott 2009-03-24 147)         GITCommit *commit = [g\nad11ac80 GITPackUpload.m    (Scott 2009-03-24 148)\nad11ac80 GITPackUpload.m    (Scott 2009-03-24 149)         //NSLog(@\"GATHER COMMI\nad11ac80 GITPackUpload.m    (Scott 2009-03-24 150)\n56ef2caf GITServerHandler.m (Scott 2009-01-05 151)         if(commit) {\n56ef2caf GITServerHandler.m (Scott 2009-01-05 152)                 [refDict setOb\n56ef2caf GITServerHandler.m (Scott 2009-01-05 153)"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"git blame","n":"code","l":" 后面加上一个 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"-C","n":"code","l":"，Git 会分析你正在标注的文件，并且尝试找出文件中从别的地方复制过来的代码片段的原始出处。\n比如，你将 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"GITServerHandler.m","n":"code","l":" 这个文件拆分为数个文件，其中一个文件是 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"GITPackUpload.m","n":"code","l":"。\n对 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"GITPackUpload.m","n":"code","l":" 执行带 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"-C","n":"code","l":" 参数的blame命令，你就可以看到代码块的原始出处："},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"^4832fe2","n":"code","l":" 这个提交的那些行，这些指的是这个文件第一次提交的那些行。\n这个提交是这个文件第一次加入到这个项目时的提交，并且这些行从未被修改过。\n这会带来小小的困惑，因为你已经至少看到三种 Git 使用 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"^","n":"code","l":" 来修饰一个提交的 SHA-1 值的不同含义，但这里确实就是这个意思。"},{"a":[["class","source pcalibre1 pcalibre"]],"n":"pre","l":"\n"},{"a":[["class","calibre13 pcalibre1 pcalibre"]],"n":"code"},{"a":[["class","calibre14 pcalibre1 pcalibre"]],"n":"span"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git blame -L 12,22 simplegit.rb\n^4832fe2 (Scott Chacon  2008-03-15 10:31:28 -0700 12)  def show(tree = 'master')\n^4832fe2 (Scott Chacon  2008-03-15 10:31:28 -0700 13)   command(\"git show #{tree}\")\n^4832fe2 (Scott Chacon  2008-03-15 10:31:28 -0700 14)  end\n^4832fe2 (Scott Chacon  2008-03-15 10:31:28 -0700 15)\n9f6560e4 (Scott Chacon  2008-03-17 21:52:20 -0700 16)  def log(tree = 'master')\n79eaf55d (Scott Chacon  2008-04-06 10:15:08 -0700 17)   command(\"git log #{tree}\")\n9f6560e4 (Scott Chacon  2008-03-17 21:52:20 -0700 18)  end\n9f6560e4 (Scott Chacon  2008-03-17 21:52:20 -0700 19)\n42cf2861 (Magnus Chacon 2008-04-13 10:45:01 -0700 20)  def blame(path)\n42cf2861 (Magnus Chacon 2008-04-13 10:45:01 -0700 21)   command(\"git blame #{path}\")\n42cf2861 (Magnus Chacon 2008-04-13 10:45:01 -0700 22)  end"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"git blame","n":"code","l":" 标注这个文件，查看这个方法每一行的最后修改时间以及是被谁修改的。\n这个例子使用 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"-L","n":"code","l":" 选项来限制输出范围在第12至22行："},{"a":[["class","calibre6 pcalibre1 pcalibre"],["id","r_rerere"]],"x":"Rerere","n":"h2","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"n":"p","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"有几种情形下这个功能会非常有用。\n在文档中提到的一个例子是如果你想要保证一个长期分支会干净地合并，但是又不想要一串中间的合并提交。\n将 ","n":"p","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"可以将同样的策略用在维持一个变基的分支时，这样就不用每次解决同样的变基冲突了。\n或者你将一个分支合并并修复了一堆冲突后想要用变基来替代合并 - 你可能并不想要再次解决相同的冲突。","n":"p","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"另一个情形是当你偶尔将一堆正在改进的特性分支合并到一个可测试的头时，就像 Git 项目自身经常做的。\n如果测试失败，你可以倒回合并之前然后在去除导致测试失败的那个特性分支后重做合并，而不用再次重新解决所有的冲突。","n":"p","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"为了启用 ","n":"p","l":"\n"},{"a":[["class","listing pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"也通过在特定的仓库中创建 ","n":"p","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"现在我们看一个简单的例子，类似之前的那个。\n假设有一个像这样的文件：","n":"p","l":"\n"},{"a":[["class","listing pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"在一个分支中修改单词 “hello” 为 “hola”，然后在另一个分支中修改 “world” 为 “mundo”，就像之前一样。","n":"p","l":"\n"},{"a":[["class","image pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"当合并两个分支到一起时，我们将会得到一个合并冲突：","n":"p","l":"\n"},{"a":[["class","listing pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"你会注意到那个新行 ","n":"p","l":"\n"},{"a":[["class","listing pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"然而，","n":"p","l":"\n"},{"a":[["class","listing pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"并且 ","n":"p","l":"\n"},{"a":[["class","listing pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"同样（这并不是真的与 ","n":"p","l":"\n"},{"a":[["class","listing pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"现在可以通过改为 ","n":"p","l":"\n"},{"a":[["class","listing pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"所以从本质上说，当 Git 看到一个 ","n":"p","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"现在我们可以将它标记为已解决并提交它：","n":"p","l":"\n"},{"a":[["class","listing pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"可以看到它 \"Recorded resolution for FILE\"。","n":"p","l":"\n"},{"a":[["class","image pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"现在，让我们撤消那个合并然后将它变基到 master 分支顶部来替代它。可以通过使用之前在 ","n":"p","l":"\n"},{"a":[["class","listing pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"我们的合并被撤消了。\n现在让我们变基特性分支。","n":"p","l":"\n"},{"a":[["class","listing pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"现在，正像我们期望的一样，得到了相同的合并冲突，但是看一下 ","n":"p","l":"\n"},{"a":[["class","listing pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"同样，","n":"p","l":"\n"},{"a":[["class","listing pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","image pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"也可以通过 ","n":"p","l":"\n"},{"a":[["class","listing pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"我们将会在 ","n":"p","l":"\n"},{"a":[["class","listing pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"我们通过 ","n":"p","l":"\n"},{"a":[["class","listing pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"所以，如果做了很多次重新合并，或者想要一个特性分支始终与你的 master 分支保持最新但却不想要一大堆合并，或者经常变基，打开 ","n":"p","l":"\n"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"rerere","n":"code","l":" 功能可以帮助你的生活变得更美好。"},{"a":[["class","source pcalibre1 pcalibre"]],"n":"pre","l":"\n"},{"a":[["class","calibre13 pcalibre1 pcalibre"]],"n":"code"},{"a":[["class","calibre14 pcalibre1 pcalibre"]],"n":"span"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git add hello.rb\n"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git rebase --continue\nApplying: i18n one word"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"rerere","n":"code","l":" 缓存的解决方案来自动重新解决了文件冲突。\n现在可以添加并继续变基来完成它。"},{"a":[["class","source pcalibre1 pcalibre"]],"n":"pre","l":"\n"},{"a":[["class","calibre13 pcalibre1 pcalibre"]],"n":"code"},{"a":[["class","calibre14 pcalibre1 pcalibre"]],"n":"span"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git rerere\nResolved 'hello.rb' using previous resolution.\n"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" cat hello.rb\n"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"#","n":"span","l":"! /usr/bin/env ruby\n\ndef hello\n  puts 'hola mundo'\nend"},{"a":[["class","link pcalibre5 pcalibre4 pcalibre3 pcalibre2 pcalibre1 pcalibre"],["href","javascript:void(0)"],["id","xref-r_advanced_merging"],["data-ezPJKgrMLI5iYpd7vlZT7E","{\"frag\": \"r_advanced_merging\", \"name\": \"text/part0012.html\"}"]],"x":"高级合并","n":"a","l":" 中看到这个的一个例子。\n然而现在，让我们通过运行 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"rerere","n":"code","l":" 来重新解决它："},{"a":[["class","source pcalibre1 pcalibre"]],"n":"pre","l":"\n"},{"a":[["class","calibre13 pcalibre1 pcalibre"]],"n":"code"},{"a":[["class","calibre14 pcalibre1 pcalibre"]],"n":"span"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git checkout --conflict=merge hello.rb\n"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" cat hello.rb\n"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"#","n":"span","l":"! /usr/bin/env ruby\n\ndef hello\n<<<<<<< ours\n  puts 'hola world'\n=======\n  puts 'hello mundo'\n"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":">","n":"span","l":">>>>>> theirs\nend"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"checkout","n":"code","l":" 命令重新恢复到冲突时候的文件状态："},{"a":[["class","content pcalibre1 pcalibre"]],"x":"\n","n":"div","l":"\n"},{"a":[["alt","rerere3"],["class","calibre8 pcalibre1 pcalibre"],["src","ezPJKgrMLI5iYpd7vlZT7E|aW1hZ2VzLzAwMTA5LmpwZWc=|"],["data-calibre-src","images/00109.jpeg"]],"n":"img","l":"\n"},{"a":[["class","source pcalibre1 pcalibre"]],"n":"pre","l":"\n"},{"a":[["class","calibre13 pcalibre1 pcalibre"]],"n":"code"},{"a":[["class","calibre14 pcalibre1 pcalibre"]],"n":"span"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git diff\ndiff --cc hello.rb\nindex a440db6,54336ba..0000000\n--- a/hello.rb\n+++ b/hello.rb\n@@@ -1,7 -1,7 +1,7 @@@\n"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"  #","n":"span","l":"! /usr/bin/env ruby\n\n  def hello\n-   puts 'hola world'\n -  puts 'hello mundo'\n++  puts 'hola mundo'\n  end"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"git diff","n":"code","l":" 将会显示出它是如何自动地重新解决的："},{"a":[["class","source pcalibre1 pcalibre"]],"n":"pre","l":"\n"},{"a":[["class","calibre13 pcalibre1 pcalibre"]],"n":"code"},{"a":[["class","calibre14 pcalibre1 pcalibre"]],"n":"span"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" cat hello.rb\n"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"#","n":"span","l":"! /usr/bin/env ruby\n\ndef hello\n  puts 'hola mundo'\nend"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"Resolved FILE using previous resolution","n":"code","l":" 这行。\n如果我们看这个文件，会发现它已经被解决了，而且在它里面没有合并冲突标记。"},{"a":[["class","source pcalibre1 pcalibre"]],"n":"pre","l":"\n"},{"a":[["class","calibre13 pcalibre1 pcalibre"]],"n":"code"},{"a":[["class","calibre14 pcalibre1 pcalibre"]],"n":"span"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git checkout i18n-world\nSwitched to branch 'i18n-world'\n\n"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git rebase master\nFirst, rewinding head to replay your work on top of it...\nApplying: i18n one word\nUsing index info to reconstruct a base tree...\nFalling back to patching base and 3-way merge...\nAuto-merging hello.rb\nCONFLICT (content): Merge conflict in hello.rb\nResolved 'hello.rb' using previous resolution.\nFailed to merge in the changes.\nPatch failed at 0001 i18n one word"},{"a":[["class","source pcalibre1 pcalibre"]],"n":"pre","l":"\n"},{"a":[["class","calibre13 pcalibre1 pcalibre"]],"n":"code"},{"a":[["class","calibre14 pcalibre1 pcalibre"]],"n":"span"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git reset --hard HEAD^\nHEAD is now at ad63f15 i18n the hello"},{"a":[["class","link pcalibre5 pcalibre4 pcalibre3 pcalibre2 pcalibre1 pcalibre"],["href","javascript:void(0)"],["data-ezPJKgrMLI5iYpd7vlZT7E","{\"frag\": \"r_git_reset\", \"name\": \"text/part0012.html\"}"]],"x":"重置揭密","n":"a","l":" 看到的 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"reset","n":"code","l":" 来回滚分支。"},{"a":[["class","content pcalibre1 pcalibre"]],"x":"\n","n":"div","l":"\n"},{"a":[["alt","rerere2"],["class","calibre8 pcalibre1 pcalibre"],["src","ezPJKgrMLI5iYpd7vlZT7E|aW1hZ2VzLzAwMTE0LmpwZWc=|"],["data-calibre-src","images/00114.jpeg"]],"n":"img","l":"\n"},{"a":[["class","source pcalibre1 pcalibre"]],"n":"pre","l":"\n"},{"a":[["class","calibre13 pcalibre1 pcalibre"]],"n":"code"},{"a":[["class","calibre14 pcalibre1 pcalibre"]],"n":"span"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git add hello.rb\n"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git commit\nRecorded resolution for 'hello.rb'.\n[master 68e16e5] Merge branch 'i18n'"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"hello.rb","n":"code","l":" 文件的一个块冲突中有 “hello mundo” 在一边与 “hola world” 在另一边，它会将其解决为 “hola mundo”。"},{"a":[["class","source pcalibre1 pcalibre"]],"n":"pre","l":"\n"},{"a":[["class","calibre13 pcalibre1 pcalibre"]],"n":"code"},{"a":[["class","calibre14 pcalibre1 pcalibre"]],"n":"span"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git rerere diff\n--- a/hello.rb\n+++ b/hello.rb\n@@ -1,11 +1,7 @@\n"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":" #","n":"span","l":"! /usr/bin/env ruby\n\n def hello\n-<<<<<<<\n-  puts 'hello mundo'\n-=======\n-  puts 'hola world'\n->>>>>>>\n+  puts 'hola mundo'\n end"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"puts 'hola mundo'","n":"code","l":" 来解决它，可以再次运行 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"rerere diff","n":"code","l":" 命令来查看 rerere 将会记住的内容："},{"a":[["class","source pcalibre1 pcalibre"]],"n":"pre","l":"\n"},{"a":[["class","calibre13 pcalibre1 pcalibre"]],"n":"code"},{"a":[["class","calibre14 pcalibre1 pcalibre"]],"n":"span"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git ls-files -u\n100644 39804c942a9c1f2c03dc7c5ebcd7f3e3a6b97519 1\thello.rb\n100644 a440db6e8d1fd76ad438a49025a9ad9ce746f581 2\thello.rb\n100644 54336ba847c3758ab604876419607e9443848474 3\thello.rb"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"rerere","n":"code","l":" 有关系），可以使用 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"ls-files -u","n":"code","l":" 来查看冲突文件的之前、左边与右边版本："},{"a":[["class","source pcalibre1 pcalibre"]],"n":"pre","l":"\n"},{"a":[["class","calibre13 pcalibre1 pcalibre"]],"n":"code"},{"a":[["class","calibre14 pcalibre1 pcalibre"]],"n":"span"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git rerere diff\n--- a/hello.rb\n+++ b/hello.rb\n@@ -1,11 +1,11 @@\n"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":" #","n":"span","l":"! /usr/bin/env ruby\n\n def hello\n-<<<<<<<\n-  puts 'hello mundo'\n-=======\n+<<<<<<< HEAD\n   puts 'hola world'\n->>>>>>>\n+=======\n+  puts 'hello mundo'\n+>>>>>>> i18n-world\n end"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"git rerere diff","n":"code","l":" 将会显示解决方案的当前状态 - 开始解决前与解决后的样子。"},{"a":[["class","source pcalibre1 pcalibre"]],"n":"pre","l":"\n"},{"a":[["class","calibre13 pcalibre1 pcalibre"]],"n":"code"},{"a":[["class","calibre14 pcalibre1 pcalibre"]],"n":"span"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git rerere status\nhello.rb"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"git rerere","n":"code","l":" 也会通过 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"git rerere status","n":"code","l":" 告诉你它记录的合并前状态。"},{"a":[["class","source pcalibre1 pcalibre"]],"n":"pre","l":"\n"},{"a":[["class","calibre13 pcalibre1 pcalibre"]],"n":"code"},{"a":[["class","calibre14 pcalibre1 pcalibre"]],"n":"span"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git status\n"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"#","n":"span","l":" On branch master\n"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"#","n":"span","l":" Unmerged paths:\n"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"#","n":"span","l":"   (use "},{"a":[["class","pcalibre1 pcalibre calibre17"]],"x":"\"git reset HEAD <file>...\"","n":"span","l":" to unstage)\n"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"#","n":"span","l":"   (use "},{"a":[["class","pcalibre1 pcalibre calibre17"]],"x":"\"git add <file>...\"","n":"span","l":" to mark resolution)\n"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"#","n":"span","l":"\n"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"#","n":"span","l":"\tboth modified:      hello.rb\n"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"#","n":"span"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"Recorded preimage for FILE","n":"code","l":"。\n除此之外它应该看起来就像一个普通的合并冲突。\n在这个时候，"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"rerere","n":"code","l":" 可以告诉我们几件事。\n和往常一样，在这个时候你可以运行 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"git status","n":"code","l":" 来查看所有冲突的内容："},{"a":[["class","source pcalibre1 pcalibre"]],"n":"pre","l":"\n"},{"a":[["class","calibre13 pcalibre1 pcalibre"]],"n":"code"},{"a":[["class","calibre14 pcalibre1 pcalibre"]],"n":"span"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git merge i18n-world\nAuto-merging hello.rb\nCONFLICT (content): Merge conflict in hello.rb\nRecorded preimage for 'hello.rb'\nAutomatic merge failed; fix conflicts and then commit the result."},{"a":[["class","content pcalibre1 pcalibre"]],"x":"\n","n":"div","l":"\n"},{"a":[["alt","rerere1"],["class","calibre8 pcalibre1 pcalibre"],["src","ezPJKgrMLI5iYpd7vlZT7E|aW1hZ2VzLzAwMTY0LmpwZWc=|"],["data-calibre-src","images/00164.jpeg"]],"n":"img","l":"\n"},{"a":[["class","source pcalibre1 pcalibre"]],"n":"pre","l":"\n"},{"a":[["class","calibre13 pcalibre1 pcalibre"]],"n":"code"},{"a":[["class","calibre14 pcalibre1 pcalibre"]],"n":"span"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"#","n":"span","l":"! /usr/bin/env ruby\n\ndef hello\n  puts 'hello world'\nend"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":".git/rr-cache","n":"code","l":" 目录来开启它，但是设置选项更干净并且可以应用到全局。"},{"a":[["class","source pcalibre1 pcalibre"]],"n":"pre","l":"\n"},{"a":[["class","calibre13 pcalibre1 pcalibre"]],"n":"code"},{"a":[["class","calibre14 pcalibre1 pcalibre"]],"n":"span"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git config --global rerere.enabled true"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"rerere","n":"code","l":" 功能，仅仅需要运行这个配置选项："},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"rerere","n":"code","l":" 功能打开后偶尔合并，解决冲突，然后返回到合并前。\n如果你持续这样做，那么最终的合并会很容易，因为 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"rerere","n":"code","l":" 可以为你自动做所有的事情。"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"git rerere","n":"code","l":" 功能是一个隐藏的功能。\n正如它的名字 “reuse recorded resolution” 所指，它允许你让 Git 记住解决一个块冲突的方法，这样在下一次看到相同冲突时，Git 可以为你自动地解决它。"},{"a":[["class","calibre6 pcalibre1 pcalibre"],["id","r_advanced_merging"]],"x":"高级合并","n":"h2","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"在 Git 中合并是相当容易的。\n因为 Git 使多次合并另一个分支变得很容易，这意味着你可以有一个始终保持最新的长期分支，经常解决小的冲突，比在一系列提交后解决一个巨大的冲突要好。","n":"p","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"然而，有时也会有棘手的冲突。\n不像其他的版本控制系统，Git 并不会尝试过于聪明的合并冲突解决方案。\nGit 的哲学是聪明地决定无歧义的合并方案，但是如果有冲突，它不会尝试智能地自动解决它。\n因此，如果很久之后才合并两个分叉的分支，你可能会撞上一些问题。","n":"p","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"在本节中，我们将会仔细查看那些问题是什么以及 Git 给了我们什么工具来帮助我们处理这些更难办的情形。我们也会了解你可以做的不同的、非标准类型的合并，也会看到如何后退到合并之前。","n":"p","l":"\n"},{"a":[["class","chapter pcalibre1 pcalibre"],["title","合并冲突"]],"x":"\n","n":"section","l":"\n"},{"a":[["class","chapter pcalibre1 pcalibre"],["title","撤消合并"]],"x":"\n","n":"section","l":"\n"},{"a":[["class","chapter pcalibre1 pcalibre"],["title","其他类型的合并"]],"x":"\n","n":"section","l":"\n"},{"a":[["class","pcalibre1 calibre7 pcalibre"],["id","_其他类型的合并"]],"x":"其他类型的合并","n":"h3","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"到目前为止我们介绍的都是通过一个叫作 “recursive” 的合并策略来正常处理的两个分支的正常合并。\n然而还有其他方式来合并两个分支到一起。\n让我们来快速介绍其中的几个。","n":"p","l":"\n"},{"a":[["class","chapter pcalibre1 pcalibre"],["title","我们的或他们的偏好"]],"x":"\n","n":"section","l":"\n"},{"a":[["class","chapter pcalibre1 pcalibre"],["title","子树合并"]],"x":"\n","n":"section","l":"\n"},{"a":[["class","calibre29 pcalibre1 pcalibre"],["id","r_subtree_merge"]],"x":"子树合并","n":"h4","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"子树合并的思想是你有两个项目，并且其中一个映射到另一个项目的一个子目录，或者反过来也行。\n当你执行一个子树合并时，Git 通常可以自动计算出其中一个是另外一个的子树从而实现正确的合并。","n":"p","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"我们来看一个例子如何将一个项目加入到一个已存在的项目中，然后将第二个项目的代码合并到第一个项目的子目录中。","n":"p","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"首先，我们将 Rack 应用添加到你的项目里。\n我们把 Rack 项目作为一个远程的引用添加到我们的项目里，然后检出到它自己的分支。","n":"p","l":"\n"},{"a":[["class","listing pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"现在在我们的 ","n":"p","l":"\n"},{"a":[["class","listing pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"这个是一个比较奇怪的概念。\n并不是仓库中的所有分支都是必须属于同一个项目的分支.\n这并不常见，因为没啥用，但是却是在不同分支里包含两条完全不同提交历史的最简单的方法。","n":"p","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"在这个例子中，我们希望将 Rack 项目拉到 ","n":"p","l":"\n"},{"a":[["class","listing pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"当我们提交时，那个子目录中拥有所有 Rack 项目的文件 —— 就像我们直接从压缩包里复制出来的一样。\n有趣的是你可以很容易地将一个分支的变更合并到另一个分支里。\n所以，当 Rack 项目有更新时，我们可以切换到那个分支来拉取上游的变更。","n":"p","l":"\n"},{"a":[["class","listing pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"接着，我们可以将这些变更合并回我们的 ","n":"p","l":"\n"},{"a":[["class","listing pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"Rack 项目中所有的改动都被合并了，等待被提交到本地。\n你也可以用相反的方法——在 master 分支上的 ","n":"p","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"这给我们提供了一种类似子模块工作流的工作方式，但是它并不需要用到子模块（有关子模块的内容我们会在 ","n":"p","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"另外一个有点奇怪的地方是，当你想查看 ","n":"p","l":"\n"},{"a":[["class","listing pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"或者，将你的 ","n":"p","l":"\n"},{"a":[["class","listing pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","source pcalibre1 pcalibre"]],"n":"pre","l":"\n"},{"a":[["class","calibre13 pcalibre1 pcalibre"]],"n":"code"},{"a":[["class","calibre14 pcalibre1 pcalibre"]],"n":"span"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git diff-tree -p rack_remote/master"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"rack","n":"code","l":" 子目和最近一次从服务器上抓取的 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"master","n":"code","l":" 分支进行比较，你可以运行："},{"a":[["class","source pcalibre1 pcalibre"]],"n":"pre","l":"\n"},{"a":[["class","calibre13 pcalibre1 pcalibre"]],"n":"code"},{"a":[["class","calibre14 pcalibre1 pcalibre"]],"n":"span"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git diff-tree -p rack_branch"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"rack","n":"code","l":" 子目录和 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"rack_branch","n":"code","l":" 分支的差异——来确定你是否需要合并它们——你不能使用普通的 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"diff","n":"code","l":" 命令。\n取而代之的是，你必须使用 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"git diff-tree","n":"code","l":" 来和你的目标分支做比较："},{"a":[["class","link pcalibre5 pcalibre4 pcalibre3 pcalibre2 pcalibre1 pcalibre"],["href","javascript:void(0)"],["id","xref-r_git_submodules"],["data-ezPJKgrMLI5iYpd7vlZT7E","{\"frag\": \"r_git_submodules\", \"name\": \"text/part0012.html\"}"]],"x":"子模块","n":"a","l":" 中介绍）。\n我们可以在自己的仓库中保持一些和其他项目相关的分支，偶尔使用子树合并将它们合并到我们的项目中。\n某些时候这种方式很有用，例如当所有的代码都提交到一个地方的时候。\n然而，它同时也有缺点，它更加复杂且更容易让人犯错，例如重复合并改动或者不小心将分支提交到一个无关的仓库上去。"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"rack","n":"code","l":" 子目录中做改动然后将它们合并入你的 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"rack_branch","n":"code","l":" 分支中，之后你可能将其提交给项目维护着或者将它们推送到上游。"},{"a":[["class","source pcalibre1 pcalibre"]],"n":"pre","l":"\n"},{"a":[["class","calibre13 pcalibre1 pcalibre"]],"n":"code"},{"a":[["class","calibre14 pcalibre1 pcalibre"]],"n":"span"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git checkout master\n"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git merge --squash -s recursive -Xsubtree=rack rack_branch\nSquash commit -- not updating HEAD\nAutomatic merge went well; stopped before committing as requested"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"master","n":"code","l":" 分支。\n使用 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"--squash","n":"code","l":" 选项和使用 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"-Xsubtree","n":"code","l":" 选项（它采用递归合并策略），都可以用来可以拉取变更并且预填充提交信息。\n（递归策略在这里是默认的，提到它是为了让读者有个清晰的概念。）"},{"a":[["class","source pcalibre1 pcalibre"]],"n":"pre","l":"\n"},{"a":[["class","calibre13 pcalibre1 pcalibre"]],"n":"code"},{"a":[["class","calibre14 pcalibre1 pcalibre"]],"n":"span"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git checkout rack_branch\n"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git pull"},{"a":[["class","source pcalibre1 pcalibre"]],"n":"pre","l":"\n"},{"a":[["class","calibre13 pcalibre1 pcalibre"]],"n":"code"},{"a":[["class","calibre14 pcalibre1 pcalibre"]],"n":"span"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git read-tree --prefix=rack/ -u rack_branch"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"master","n":"code","l":" 项目中作为一个子目录。\n我们可以在 Git 中执行 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"git read-tree","n":"code","l":" 来实现。\n你可以在 "},{"a":[["class","link pcalibre5 pcalibre4 pcalibre3 pcalibre2 pcalibre1 pcalibre"],["href","javascript:void(0)"],["data-ezPJKgrMLI5iYpd7vlZT7E","{\"frag\": \"E9OE2-78ecc950e459438e8d0462081a6fa7a8\", \"name\": \"text/part0015.html\"}"]],"x":"Git 内部原理","n":"a","l":" 中查看更多 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"read-tree","n":"code","l":" 的相关信息，现在你只需要知道它会读取一个分支的根目录树到当前的暂存区和工作目录里。\n先切回你的 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"master","n":"code","l":" 分支，将 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"rack_back","n":"code","l":" 分支拉取到我们项目的 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"master","n":"code","l":" 分支中的 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"rack","n":"code","l":" 子目录。"},{"a":[["class","source pcalibre1 pcalibre"]],"n":"pre","l":"\n"},{"a":[["class","calibre13 pcalibre1 pcalibre"]],"n":"code"},{"a":[["class","calibre14 pcalibre1 pcalibre"]],"n":"span"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" ls\nAUTHORS         KNOWN-ISSUES   Rakefile      contrib         lib\nCOPYING         README         bin           example         test\n"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git checkout master\nSwitched to branch \"master\"\n"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" ls\nREADME"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"rack_branch","n":"code","l":" 分支里就有 Rack 项目的根目录，而我们的项目则在 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"master","n":"code","l":" 分支里。\n如果你从一个分支切换到另一个分支，你可以看到它们的项目根目录是不同的："},{"a":[["class","source pcalibre1 pcalibre"]],"n":"pre","l":"\n"},{"a":[["class","calibre13 pcalibre1 pcalibre"]],"n":"code"},{"a":[["class","calibre14 pcalibre1 pcalibre"]],"n":"span"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git remote add rack_remote https://github.com/rack/rack\n"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git fetch rack_remote\nwarning: no common commits\nremote: Counting objects: 3184, done.\nremote: Compressing objects: 100% (1465/1465), done.\nremote: Total 3184 (delta 1952), reused 2770 (delta 1675)\nReceiving objects: 100% (3184/3184), 677.42 KiB | 4 KiB/s, done.\nResolving deltas: 100% (1952/1952), done.\nFrom https://github.com/rack/rack\n * [new branch]      build      -> rack_remote/build\n * [new branch]      master     -> rack_remote/master\n * [new branch]      rack-0.4   -> rack_remote/rack-0.4\n * [new branch]      rack-0.9   -> rack_remote/rack-0.9\n"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git checkout -b rack_branch rack_remote/master\nBranch rack_branch set up to track remote branch refs/remotes/rack_remote/master.\nSwitched to a new branch \"rack_branch\""},{"a":[["class","calibre29 pcalibre1 pcalibre"],["id","_我们的或他们的偏好"]],"x":"我们的或他们的偏好","n":"h4","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"首先，有另一种我们可以通过 “recursive” 合并模式做的有用工作。\n我们之前已经看到传递给 ","n":"p","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"默认情况下，当 Git 看到两个分支合并中的冲突时，它会将合并冲突标记添加到你的代码中并标记文件为冲突状态来让你解决。\n如果你希望 Git 简单地选择特定的一边并忽略另外一边而不是让你手动合并冲突，你可以传递给 ","n":"p","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"如果 Git 看到这个，它并不会增加冲突标记。\n任何可以合并的区别，它会直接合并。\n任何有冲突的区别，它会简单地选择你全局指定的一边，包括二进制文件。","n":"p","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"如果我们回到之前我们使用的 “hello world” 例子中，我们可以看到合并入我们的分支时引发了冲突。","n":"p","l":"\n"},{"a":[["class","listing pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"然而如果我们运行时增加 ","n":"p","l":"\n"},{"a":[["class","listing pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"在上例中，它并不会为 “hello mundo” 与 “hola world” 标记合并冲突，它只会简单地选取 “hola world”。\n然而，在那个分支上所有其他非冲突的改动都可以被成功地合并入。","n":"p","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"这个选项也可以传递给我们之前看到的 ","n":"p","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"如果想要做类似的事情但是甚至并不想让 Git 尝试合并另外一边的修改，有一个更严格的选项，它是 “ours” 合并 ","n":"p","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"这本质上会做一次假的合并。\n它会记录一个以两边分支作为父结点的新合并提交，但是它甚至根本不关注你正合并入的分支。\n它只会简单地把当前分支的代码当作合并结果记录下来。","n":"p","l":"\n"},{"a":[["class","listing pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"你可以看到合并后与合并前我们的分支并没有任何区别。","n":"p","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"当再次合并时从本质上欺骗 Git 认为那个分支已经合并过经常是很有用的。\n例如，假设你有一个分叉的 ","n":"p","l":"\n"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"release","n":"code","l":" 分支并且在上面做了一些你想要在未来某个时候合并回 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"master","n":"code","l":" 的工作。\n与此同时 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"master","n":"code","l":" 分支上的某些 bugfix 需要向后移植回 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"release","n":"code","l":" 分支。\n你可以合并 bugfix 分支进入 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"release","n":"code","l":" 分支同时也 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"merge -s ours","n":"code","l":" 合并进入你的 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"master","n":"code","l":" 分支（即使那个修复已经在那儿了）这样当你之后再次合并 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"release","n":"code","l":" 分支时，就不会有来自 bugfix 的冲突。"},{"a":[["class","source pcalibre1 pcalibre"]],"n":"pre","l":"\n"},{"a":[["class","calibre13 pcalibre1 pcalibre"]],"n":"code"},{"a":[["class","calibre14 pcalibre1 pcalibre"]],"n":"span"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git merge -s ours mundo\nMerge made by the 'ours' strategy.\n"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git diff HEAD HEAD~\n"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span"},{"a":[["class","pcalibre1 pcalibre calibre4"]],"x":"策略","n":"em","l":"。\n这与 “ours” recursive 合并 "},{"a":[["class","pcalibre1 pcalibre calibre4"]],"x":"选项","n":"em","l":" 不同。"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"git merge-file","n":"code","l":" 命令，通过运行类似 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"git merge-file --ours","n":"code","l":" 的命令来合并单个文件。"},{"a":[["class","source pcalibre1 pcalibre"]],"n":"pre","l":"\n"},{"a":[["class","calibre13 pcalibre1 pcalibre"]],"n":"code"},{"a":[["class","calibre14 pcalibre1 pcalibre"]],"n":"span"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git merge -Xours mundo\nAuto-merging hello.rb\nMerge made by the 'recursive' strategy.\n hello.rb | 2 +-\n test.sh  | 2 ++\n 2 files changed, 3 insertions(+), 1 deletion(-)\n create mode 100644 test.sh"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"-Xours","n":"code","l":" 或 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"-Xtheirs","n":"code","l":" 参数就不会有冲突。"},{"a":[["class","source pcalibre1 pcalibre"]],"n":"pre","l":"\n"},{"a":[["class","calibre13 pcalibre1 pcalibre"]],"n":"code"},{"a":[["class","calibre14 pcalibre1 pcalibre"]],"n":"span"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git merge mundo\nAuto-merging hello.rb\nCONFLICT (content): Merge conflict in hello.rb\nResolved 'hello.rb' using previous resolution.\nAutomatic merge failed; fix conflicts and then commit the result."},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"merge","n":"code","l":" 命令一个 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"-Xours","n":"code","l":" 或 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"-Xtheirs","n":"code","l":" 参数。"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"-X","n":"code","l":" 的 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"ignore-all-space","n":"code","l":" 与 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"ignore-space-change","n":"code","l":" 选项，但是我们也可以告诉 Git 当它看见一个冲突时直接选择一边。"},{"a":[["class","pcalibre1 calibre7 pcalibre"],["id","r_undoing_merges"]],"x":"撤消合并","n":"h3","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"虽然你已经知道如何创建一个合并提交，但有时出错是在所难免的。\n使用 Git 最棒的一件事情是犯错是可以的，因为有可能（大多数情况下都很容易）修复它们。","n":"p","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"合并提交并无不同。\n假设现在在一个特性分支上工作，不小心将其合并到 ","n":"p","l":"\n"},{"a":[["class","image pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"有两种方法来解决这个问题，这取决于你想要的结果是什么。","n":"p","l":"\n"},{"a":[["class","chapter pcalibre1 pcalibre"],["title","修复引用"]],"x":"\n","n":"section","l":"\n"},{"a":[["class","chapter pcalibre1 pcalibre"],["title","还原提交"]],"x":"\n","n":"section","l":"\n"},{"a":[["class","calibre29 pcalibre1 pcalibre"],["id","r_reverse_commit"]],"x":"还原提交","n":"h4","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"如果移动分支指针并不适合你，Git 给你一个生成一个新提交的选项，提交将会撤消一个已存在提交的所有修改。\nGit 称这个操作为 “还原”，在这个特定的场景下，你可以像这样调用它：","n":"p","l":"\n"},{"a":[["class","listing pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"n":"p","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"有还原提交的历史看起来像这样：","n":"p","l":"\n"},{"a":[["class","image pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"新的提交 ","n":"p","l":"\n"},{"a":[["class","listing pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"n":"p","l":"\n"},{"a":[["class","image pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"解决这个最好的方式是撤消还原原始的合并，因为现在你想要引入被还原出去的修改，","n":"p","l":"\n"},{"a":[["class","listing pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","image pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"在本例中，","n":"p","l":"\n"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"M","n":"code","l":" 与 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"^M","n":"code","l":" 抵消了。\n"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"^^M","n":"code","l":" 事实上合并入了 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"C3","n":"code","l":" 与 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"C4","n":"code","l":" 的修改，"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"C8","n":"code","l":" 合并了 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"C7","n":"code","l":" 的修改，所以现在 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"topic","n":"code","l":" 已经完全被合并了。"},{"a":[["class","content pcalibre1 pcalibre"]],"x":"\n","n":"div","l":"\n"},{"a":[["class","calibre9 pcalibre1 pcalibre"]],"x":"Figure 6. 在重新合并一个还原合并后的历史","n":"figcaption","l":"\n"},{"a":[["alt","在重新合并一个还原合并后的历史"],["class","calibre8 pcalibre1 pcalibre"],["src","ezPJKgrMLI5iYpd7vlZT7E|aW1hZ2VzLzAwMDExLmpwZWc=|"],["data-calibre-src","images/00011.jpeg"]],"n":"img","l":"\n"},{"a":[["class","source pcalibre1 pcalibre"]],"n":"pre","l":"\n"},{"a":[["class","calibre13 pcalibre1 pcalibre"]],"n":"code"},{"a":[["class","calibre14 pcalibre1 pcalibre"]],"n":"span"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git revert ^M\n[master 09f0126] Revert \"Revert \"Merge branch 'topic'\"\"\n"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git merge topic"},{"a":[["class","calibre12 pcalibre1 pcalibre"]],"x":"然后","n":"strong","l":" 创建一个新的合并提交："},{"a":[["class","content pcalibre1 pcalibre"]],"x":"\n","n":"div","l":"\n"},{"a":[["class","calibre9 pcalibre1 pcalibre"]],"x":"Figure 5. 含有坏掉合并的历史","n":"figcaption","l":"\n"},{"a":[["alt","含有坏掉合并的历史"],["class","calibre8 pcalibre1 pcalibre"],["src","ezPJKgrMLI5iYpd7vlZT7E|aW1hZ2VzLzAwMDU2LmpwZWc=|"],["data-calibre-src","images/00056.jpeg"]],"n":"img","l":"\n"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"topic","n":"code","l":" 中并没有东西不能从 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"master","n":"code","l":" 中追踪到达。\n更糟的是，如果你在 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"topic","n":"code","l":" 中增加工作然后再次合并，Git 只会引入被还原的合并 "},{"a":[["class","pcalibre1 pcalibre calibre4"]],"x":"之后","n":"em","l":" 的修改。"},{"a":[["class","source pcalibre1 pcalibre"]],"n":"pre","l":"\n"},{"a":[["class","calibre13 pcalibre1 pcalibre"]],"n":"code"},{"a":[["class","calibre14 pcalibre1 pcalibre"]],"n":"span"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git merge topic\nAlready up-to-date."},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"^M","n":"code","l":" 与 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"C6","n":"code","l":" 有完全一样的内容，所以从这儿开始就像合并从未发生过，除了“现在还没合并”的提交依然在 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"HEAD","n":"code","l":" 的历史中。\n如果你尝试再次合并 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"topic","n":"code","l":" 到 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"master","n":"code","l":" Git 会感到困惑："},{"a":[["class","content pcalibre1 pcalibre"]],"x":"\n","n":"div","l":"\n"},{"a":[["class","calibre9 pcalibre1 pcalibre"]],"x":"Figure 4. 在 ","n":"figcaption","l":"\n"},{"a":[["class","literal1 pcalibre1 pcalibre"]],"x":"git revert -m 1","n":"code","l":" 后的历史"},{"a":[["alt","在 `git revert -m 1` 后的历史"],["class","calibre8 pcalibre1 pcalibre"],["src","ezPJKgrMLI5iYpd7vlZT7E|aW1hZ2VzLzAwMTAzLmpwZWc=|"],["data-calibre-src","images/00103.jpeg"]],"n":"img","l":"\n"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"-m 1","n":"code","l":" 标记指出 “mainline” 需要被保留下来的父结点。\n当你引入一个合并到 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"HEAD","n":"code","l":"（"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"git merge topic","n":"code","l":"），新提交有两个父结点：第一个是 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"HEAD","n":"code","l":"（"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"C6","n":"code","l":"），第二个是将要合并入分支的最新提交（"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"C4","n":"code","l":"）。\n在本例中，我们想要撤消所有由父结点 #2（"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"C4","n":"code","l":"）合并引入的修改，同时保留从父结点 #1（"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"C4","n":"code","l":"）开始的所有内容。"},{"a":[["class","source pcalibre1 pcalibre"]],"n":"pre","l":"\n"},{"a":[["class","calibre13 pcalibre1 pcalibre"]],"n":"code"},{"a":[["class","calibre14 pcalibre1 pcalibre"]],"n":"span"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git revert -m 1 HEAD\n[master b1d8379] Revert \"Merge branch 'topic'\""},{"a":[["class","calibre29 pcalibre1 pcalibre"],["id","_修复引用"]],"x":"修复引用","n":"h4","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"如果这个不想要的合并提交只存在于你的本地仓库中，最简单且最好的解决方案是移动分支到你想要它指向的地方。\n大多数情况下，如果你在错误的 ","n":"p","l":"\n"},{"a":[["class","image pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"我们之前在 ","n":"p","l":"\n"},{"a":[["class","content pcalibre1 pcalibre"]],"x":"\n","n":"div","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"这个方法的缺点是它会重写历史，在一个共享的仓库中这会造成问题的。\n查阅 ","n":"p","l":"\n"},{"a":[["class","link pcalibre5 pcalibre4 pcalibre3 pcalibre2 pcalibre1 pcalibre"],["href","javascript:void(0)"],["id","xref--ch03-git-branching--r_rebase_peril"],["data-ezPJKgrMLI5iYpd7vlZT7E","{\"frag\": \"r_rebase_peril\", \"name\": \"text/part0008.html\"}"]],"x":"变基的风险","n":"a","l":" 来了解更多可能发生的事情；用简单的话说就是如果其他人已经有你将要重写的提交，你应当避免使用 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"reset","n":"code","l":"。\n如果有任何其他提交在合并之后创建了，那么这个方法也会无效；移动引用实际上会丢失那些改动。"},{"a":[["class","arabic pcalibre1 pcalibre"]],"x":"\n","n":"ol","l":"\n"},{"a":[["class","calibre11 pcalibre1 pcalibre"]],"x":"\n","n":"li","l":"\n"},{"a":[["class","calibre11 pcalibre1 pcalibre"]],"x":"\n","n":"li","l":"\n"},{"a":[["class","calibre11 pcalibre1 pcalibre"]],"x":"\n","n":"li","l":"\n"},{"a":[["class","pcalibre1 pcalibre principal"]],"x":"使工作目录看起来像索引。","n":"span","l":"\n"},{"a":[["class","pcalibre1 pcalibre principal"]],"x":"使索引看起来像 HEAD。","n":"span","l":"\n"},{"a":[["class","pcalibre1 pcalibre principal"]],"x":"移动 HEAD 指向的分支。\n在本例中，我们想要移动 ","n":"span","l":"\n"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"master","n":"code","l":" 到合并提交（"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"C6","n":"code","l":"）之前所在的位置。"},{"a":[["class","link pcalibre5 pcalibre4 pcalibre3 pcalibre2 pcalibre1 pcalibre"],["href","javascript:void(0)"],["id","xref-r_git_reset"],["data-ezPJKgrMLI5iYpd7vlZT7E","{\"frag\": \"r_git_reset\", \"name\": \"text/part0012.html\"}"]],"x":"重置揭密","n":"a","l":" 已经介绍了 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"reset","n":"code","l":"，所以现在指出这里发生了什么并不是很困难。\n让我们快速复习下："},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"reset --hard","n":"code","l":" 通常会经历三步："},{"a":[["class","content pcalibre1 pcalibre"]],"x":"\n","n":"div","l":"\n"},{"a":[["class","calibre9 pcalibre1 pcalibre"]],"x":"Figure 3. 在 ","n":"figcaption","l":"\n"},{"a":[["class","literal1 pcalibre1 pcalibre"]],"x":"git reset --hard HEAD~","n":"code","l":" 之后的历史"},{"a":[["alt","在 `git reset --hard HEAD~` 之后的历史"],["class","calibre8 pcalibre1 pcalibre"],["src","ezPJKgrMLI5iYpd7vlZT7E|aW1hZ2VzLzAwMDgyLmpwZWc=|"],["data-calibre-src","images/00082.jpeg"]],"n":"img","l":"\n"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"git merge","n":"code","l":" 后运行 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"git reset --hard HEAD~","n":"code","l":"，这会重置分支指向所以它们看起来像这样："},{"a":[["class","content pcalibre1 pcalibre"]],"x":"\n","n":"div","l":"\n"},{"a":[["class","calibre9 pcalibre1 pcalibre"]],"x":"Figure 2. 意外的合并提交","n":"figcaption","l":"\n"},{"a":[["alt","意外的合并提交"],["class","calibre8 pcalibre1 pcalibre"],["src","ezPJKgrMLI5iYpd7vlZT7E|aW1hZ2VzLzAwMTY4LmpwZWc=|"],["data-calibre-src","images/00168.jpeg"]],"n":"img","l":"\n"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"master","n":"code","l":" 中，现在提交历史看起来是这样："},{"a":[["class","pcalibre1 calibre7 pcalibre"],["id","_合并冲突"]],"x":"合并冲突","n":"h3","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"我们在 ","n":"p","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"首先，在做一次可能有冲突的合并前尽可能保证工作目录是干净的。\n如果你有正在做的工作，要么提交到一个临时分支要么储藏它。\n这使你可以撤消在这里尝试做的*任何事情*。\n如果在你尝试一次合并时工作目录中有未保存的改动，下面的这些技巧可能会使你丢失那些工作。","n":"p","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"让我们通过一个非常简单的例子来了解一下。\n我们有一个超级简单的打印 ","n":"p","l":"\n"},{"a":[["class","listing pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"在我们的仓库中，创建一个名为 ","n":"p","l":"\n"},{"a":[["class","listing pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"现在我们切换回我们的 ","n":"p","l":"\n"},{"a":[["class","listing pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"现在我们尝试合并入我们的 ","n":"p","l":"\n"},{"a":[["class","listing pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","chapter pcalibre1 pcalibre"],["title","中断一次合并"]],"x":"\n","n":"section","l":"\n"},{"a":[["class","chapter pcalibre1 pcalibre"],["title","忽略空白"]],"x":"\n","n":"section","l":"\n"},{"a":[["class","chapter pcalibre1 pcalibre"],["title","手动文件再合并"]],"x":"\n","n":"section","l":"\n"},{"a":[["class","chapter pcalibre1 pcalibre"],["title","检出冲突"]],"x":"\n","n":"section","l":"\n"},{"a":[["class","chapter pcalibre1 pcalibre"],["title","合并日志"]],"x":"\n","n":"section","l":"\n"},{"a":[["class","chapter pcalibre1 pcalibre"],["title","组合式差异格式"]],"x":"\n","n":"section","l":"\n"},{"a":[["class","calibre29 pcalibre1 pcalibre"],["id","_组合式差异格式"]],"x":"组合式差异格式","n":"h4","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"因为 Git 暂存合并成功的结果，当你在合并冲突状态下运行 ","n":"p","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"在合并冲突后直接运行的 ","n":"p","l":"\n"},{"a":[["class","listing pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"这种叫作 “组合式差异” 的格式会在每一行给你两列数据。\n第一列为你显示 “ours” 分支与工作目录的文件区别（添加或删除），第二列显示 “theirs” 分支与工作目录的拷贝区别。","n":"p","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"所以在上面的例子中可以看到 ","n":"p","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"如果我们解决冲突再次运行 ","n":"p","l":"\n"},{"a":[["class","listing pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"这里显示出 “hola world” 在我们这边但不在工作拷贝中，那个 “hello mundo” 在他们那边但不在工作拷贝中，最终 “hola mundo” 不在任何一边但是现在在工作拷贝中。\n在提交解决方案前这对审核很有用。","n":"p","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"也可以在合并后通过 ","n":"p","l":"\n"},{"a":[["class","listing pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","source pcalibre1 pcalibre"]],"n":"pre","l":"\n"},{"a":[["class","calibre13 pcalibre1 pcalibre"]],"n":"code"},{"a":[["class","calibre14 pcalibre1 pcalibre"]],"n":"span"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git log --cc -p -1\ncommit 14f41939956d80b9e17bb8721354c33f8d5b5a79\nMerge: f1270f7 e3eb223\nAuthor: Scott Chacon <schacon@gmail.com>\nDate:   Fri Sep 19 18:14:49 2014 +0200\n\n    Merge branch 'mundo'\n\n    Conflicts:\n        hello.rb\n\ndiff --cc hello.rb\nindex 0399cd5,59727f0..e1d0799\n--- a/hello.rb\n+++ b/hello.rb\n@@@ -1,7 -1,7 +1,7 @@@\n"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"  #","n":"span","l":"! /usr/bin/env ruby\n\n  def hello\n-   puts 'hola world'\n -  puts 'hello mundo'\n++  puts 'hola mundo'\n  end\n\n  hello()"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"git log","n":"code","l":" 来获取相同信息，并查看冲突是如何解决的。\n如果你对一个合并提交运行 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"git show","n":"code","l":" 命令 Git 将会输出这种格式，或者你也可以在 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"git log -p","n":"code","l":"（默认情况下该命令只会展示还没有合并的补丁）命令之后加上 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"--cc","n":"code","l":" 选项。"},{"a":[["class","source pcalibre1 pcalibre"]],"n":"pre","l":"\n"},{"a":[["class","calibre13 pcalibre1 pcalibre"]],"n":"code"},{"a":[["class","calibre14 pcalibre1 pcalibre"]],"n":"span"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" vim hello.rb\n"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git diff\ndiff --cc hello.rb\nindex 0399cd5,59727f0..0000000\n--- a/hello.rb\n+++ b/hello.rb\n@@@ -1,7 -1,7 +1,7 @@@\n"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"  #","n":"span","l":"! /usr/bin/env ruby\n\n  def hello\n-   puts 'hola world'\n -  puts 'hello mundo'\n++  puts 'hola mundo'\n  end\n\n  hello()"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"git diff","n":"code","l":"，我们将会看到同样的事情，但是它有一点帮助。"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"<<<<<<<","n":"code","l":" 与 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":">>>>>>>","n":"code","l":" 行在工作拷贝中但是并不在合并的任意一边中。\n这很有意义，合并工具因为我们的上下文被困住了，它期望我们去移除它们。"},{"a":[["class","source pcalibre1 pcalibre"]],"n":"pre","l":"\n"},{"a":[["class","calibre13 pcalibre1 pcalibre"]],"n":"code"},{"a":[["class","calibre14 pcalibre1 pcalibre"]],"n":"span"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git diff\ndiff --cc hello.rb\nindex 0399cd5,59727f0..0000000\n--- a/hello.rb\n+++ b/hello.rb\n@@@ -1,7 -1,7 +1,11 @@@\n"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"  #","n":"span","l":"! /usr/bin/env ruby\n\n  def hello\n++<<<<<<< HEAD\n +  puts 'hola world'\n++=======\n+   puts 'hello mundo'\n++>>>>>>> mundo\n  end\n\n  hello()"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"git diff","n":"code","l":" 会给你一个相当独特的输出格式。"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"git diff","n":"code","l":" 时，只会得到现在还在冲突状态的区别。\n当需要查看你还需要解决哪些冲突时这很有用。"},{"a":[["class","calibre29 pcalibre1 pcalibre"],["id","r_merge_log"]],"x":"合并日志","n":"h4","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"另一个解决合并冲突有用的工具是 ","n":"p","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"为了得到此次合并中包含的每一个分支的所有独立提交的列表，我们可以使用之前在 ","n":"p","l":"\n"},{"a":[["class","listing pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"这个漂亮的列表包含 6 个提交和每一个提交所在的不同开发路径。","n":"p","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"我们可以通过更加特定的上下文来进一步简化这个列表。\n如果我们添加 ","n":"p","l":"\n"},{"a":[["class","listing pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"如果你运行命令时用 ","n":"p","l":"\n"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"-p","n":"code","l":" 选项代替，你会得到所有冲突文件的区别。\n快速获得你需要帮助理解为什么发生冲突的上下文，以及如何聪明地解决它，这会 "},{"a":[["class","calibre12 pcalibre1 pcalibre"]],"x":"非常","n":"strong","l":" 有用。"},{"a":[["class","source pcalibre1 pcalibre"]],"n":"pre","l":"\n"},{"a":[["class","calibre13 pcalibre1 pcalibre"]],"n":"code"},{"a":[["class","calibre14 pcalibre1 pcalibre"]],"n":"span"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git log --oneline --left-right --merge\n< 694971d update phrase to hola world\n"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":">","n":"span","l":" c3ffff1 changed text to hello mundo"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"--merge","n":"code","l":" 选项到 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"git log","n":"code","l":" 中，它会只显示任何一边接触了合并冲突文件的提交。"},{"a":[["class","source pcalibre1 pcalibre"]],"n":"pre","l":"\n"},{"a":[["class","calibre13 pcalibre1 pcalibre"]],"n":"code"},{"a":[["class","calibre14 pcalibre1 pcalibre"]],"n":"span"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git log --oneline --left-right HEAD...MERGE_HEAD\n< f1270f7 update README\n< 9af9d3b add a README\n< 694971d update phrase to hola world\n"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":">","n":"span","l":" e3eb223 add more tests\n"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":">","n":"span","l":" 7cff591 add testing script\n"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":">","n":"span","l":" c3ffff1 changed text to hello mundo"},{"a":[["class","link pcalibre5 pcalibre4 pcalibre3 pcalibre2 pcalibre1 pcalibre"],["href","javascript:void(0)"],["id","xref-r_triple_dot"],["data-ezPJKgrMLI5iYpd7vlZT7E","{\"frag\": \"r_triple_dot\", \"name\": \"text/part0012.html\"}"]],"x":"三点","n":"a","l":" 学习的 “三点” 语法。"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"git log","n":"code","l":"。\n这可以帮助你得到那些对冲突有影响的上下文。\n回顾一点历史来记起为什么两条线上的开发会触碰同一片代码有时会很有用。"},{"a":[["class","calibre29 pcalibre1 pcalibre"],["id","r_checking_out_conflicts"]],"x":"检出冲突","n":"h4","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"也许有时我们并不满意这样的解决方案，或许有时还要手动编辑一边或者两边的冲突，但还是依旧无法正常工作，这时我们需要更多的上下文关联来解决这些冲突。","n":"p","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"让我们来稍微改动下例子。\n对于本例，我们有两个长期分支，每一个分支都有几个提交，但是在合并时却创建了一个合理的冲突。","n":"p","l":"\n"},{"a":[["class","listing pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"现在有只在 ","n":"p","l":"\n"},{"a":[["class","listing pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"我们想要看一下合并冲突是什么。\n如果我们打开这个文件，我们将会看到类似下面的内容：","n":"p","l":"\n"},{"a":[["class","listing pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"合并的两边都向这个文件增加了内容，但是导致冲突的原因是其中一些提交修改了文件的同一个地方。","n":"p","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"让我们探索一下现在你手边可用来查明这个冲突是如何产生的工具。\n应该如何修复这个冲突看起来或许并不明显。\n这时你需要更多上下文。","n":"p","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"一个很有用的工具是带 ","n":"p","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"可以传递给 ","n":"p","l":"\n"},{"a":[["class","listing pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"一旦我们运行它，文件看起来会像下面这样：","n":"p","l":"\n"},{"a":[["class","listing pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"如果你喜欢这种格式，可以通过设置 ","n":"p","l":"\n"},{"a":[["class","listing pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"n":"p","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"当有二进制文件冲突时这可能会特别有用，因为可以简单地选择一边，或者可以只合并另一个分支的特定文件 - 可以做一次合并然后在提交前检出一边或另一边的特定文件。","n":"p","l":"\n"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"git checkout","n":"code","l":" 命令也可以使用 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"--ours","n":"code","l":" 和 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"--theirs","n":"code","l":" 选项，这是一种无需合并的快速方式，你可以选择留下一边的修改而丢弃掉另一边修改。"},{"a":[["class","source pcalibre1 pcalibre"]],"n":"pre","l":"\n"},{"a":[["class","calibre13 pcalibre1 pcalibre"]],"n":"code"},{"a":[["class","calibre14 pcalibre1 pcalibre"]],"n":"span"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git config --global merge.conflictstyle diff3"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"merge.conflictstyle","n":"code","l":" 选项为 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"diff3","n":"code","l":" 来做为以后合并冲突的默认选项。"},{"a":[["class","source pcalibre1 pcalibre"]],"n":"pre","l":"\n"},{"a":[["class","calibre13 pcalibre1 pcalibre"]],"n":"code"},{"a":[["class","calibre14 pcalibre1 pcalibre"]],"n":"span"},{"a":[["class","pcalibre1 pcalibre calibre17"]],"x":"#! /usr/bin/env ruby","n":"span","l":"\n\n"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"def","n":"span","l":" hello\n<<<<<<< ours\n  puts "},{"a":[["class","pcalibre1 pcalibre calibre17"]],"x":"'hola world'","n":"span","l":"\n||||||| base\n  puts "},{"a":[["class","pcalibre1 pcalibre calibre17"]],"x":"'hello world'","n":"span","l":"\n=======\n  puts "},{"a":[["class","pcalibre1 pcalibre calibre17"]],"x":"'hello mundo'","n":"span","l":"\n>>>>>>> theirs\n"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"end","n":"span","l":"\n\nhello()"},{"a":[["class","source pcalibre1 pcalibre"]],"n":"pre","l":"\n"},{"a":[["class","calibre13 pcalibre1 pcalibre"]],"n":"code"},{"a":[["class","calibre14 pcalibre1 pcalibre"]],"n":"span"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git checkout --conflict=diff3 hello.rb"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"--conflict","n":"code","l":" 参数 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"diff3","n":"code","l":" 或 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"merge","n":"code","l":"（默认选项）。\n如果传给它 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"diff3","n":"code","l":"，Git 会使用一个略微不同版本的冲突标记：不仅仅只给你 “ours” 和 “theirs” 版本，同时也会有 “base” 版本在中间来给你更多的上下文。"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"--conflict","n":"code","l":" 选项的 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"git checkout","n":"code","l":"。\n这会重新检出文件并替换合并冲突标记。\n如果想要重置标记并尝试再次解决它们的话这会很有用。"},{"a":[["class","source pcalibre1 pcalibre"]],"n":"pre","l":"\n"},{"a":[["class","calibre13 pcalibre1 pcalibre"]],"n":"code"},{"a":[["class","calibre14 pcalibre1 pcalibre"]],"n":"span"},{"a":[["class","pcalibre1 pcalibre calibre17"]],"x":"#! /usr/bin/env ruby","n":"span","l":"\n\n"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"def","n":"span","l":" hello\n<<<<<<< HEAD\n  puts "},{"a":[["class","pcalibre1 pcalibre calibre17"]],"x":"'hola world'","n":"span","l":"\n=======\n  puts "},{"a":[["class","pcalibre1 pcalibre calibre17"]],"x":"'hello mundo'","n":"span","l":"\n>>>>>>> mundo\n"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"end","n":"span","l":"\n\nhello()"},{"a":[["class","source pcalibre1 pcalibre"]],"n":"pre","l":"\n"},{"a":[["class","calibre13 pcalibre1 pcalibre"]],"n":"code"},{"a":[["class","calibre14 pcalibre1 pcalibre"]],"n":"span"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git merge mundo\nAuto-merging hello.rb\nCONFLICT (content): Merge conflict in hello.rb\nAutomatic merge failed; fix conflicts and then commit the result."},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"master","n":"code","l":" 分支上的三次单独提交，还有其他三次提交在 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"mundo","n":"code","l":" 分支上。\n如果我们尝试将 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"mundo","n":"code","l":" 分支合并入 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"master","n":"code","l":" 分支，我们得到一个冲突。"},{"a":[["class","source pcalibre1 pcalibre"]],"n":"pre","l":"\n"},{"a":[["class","calibre13 pcalibre1 pcalibre"]],"n":"code"},{"a":[["class","calibre14 pcalibre1 pcalibre"]],"n":"span"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git log --graph --oneline --decorate --all\n* f1270f7 (HEAD, master) update README\n* 9af9d3b add a README\n* 694971d update phrase to hola world\n| * e3eb223 (mundo) add more tests\n| * 7cff591 add testing script\n| * c3ffff1 changed text to hello mundo\n|/\n* b7dcc89 initial hello world code"},{"a":[["class","calibre29 pcalibre1 pcalibre"],["id","r_manual_remerge"]],"x":"手动文件再合并","n":"h4","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"虽然 Git 对空白的预处理做得很好，还有很多其他类型的修改，Git 也许无法自动处理，但是脚本可以处理它们。\n例如，假设 Git 无法处理空白修改因此我们需要手动处理。","n":"p","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"我们真正想要做的是对将要合并入的文件在真正合并前运行 ","n":"p","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"首先，我们进入到了合并冲突状态。\n然后我们想要我的版本的文件，他们的版本的文件（从我们将要合并入的分支）和共同的版本的文件（从分支叉开时的位置）的拷贝。\n然后我们想要修复任何一边的文件，并且为这个单独的文件重试一次合并。","n":"p","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"获得这三个文件版本实际上相当容易。\nGit 在索引中存储了所有这些版本，在 “stages” 下每一个都有一个数字与它们关联。\nStage 1 是它们共同的祖先版本，stage 2 是你的版本，stage 3 来自于 ","n":"p","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"通过 ","n":"p","l":"\n"},{"a":[["class","listing pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"如果你想要更专业一点，也可以使用 ","n":"p","l":"\n"},{"a":[["class","listing pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"n":"p","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"既然在我们的工作目录中已经有这所有三个阶段的内容，我们可以手工修复它们来修复空白问题，然后使用鲜为人知的 ","n":"p","l":"\n"},{"a":[["class","listing pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"在这时我们已经漂亮地合并了那个文件。\n实际上，这比使用 ","n":"p","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"如果你想要在最终提交前看一下我们这边与另一边之间实际的修改，你可以使用 ","n":"p","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"要在合并前比较结果与在你的分支上的内容，换一句话说，看看合并引入了什么，可以运行 ","n":"p","l":"\n"},{"a":[["class","listing pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"这里我们可以很容易地看到在我们的分支上发生了什么，在这次合并中我们实际引入到这个文件的改动，是修改了其中一行。","n":"p","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"如果我们想要查看合并的结果与他们那边有什么不同，可以运行 ","n":"p","l":"\n"},{"a":[["class","listing pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"最终，你可以通过 ","n":"p","l":"\n"},{"a":[["class","listing pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"在这时我们可以使用 ","n":"p","l":"\n"},{"a":[["class","listing pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","source pcalibre1 pcalibre"]],"n":"pre","l":"\n"},{"a":[["class","calibre13 pcalibre1 pcalibre"]],"n":"code"},{"a":[["class","calibre14 pcalibre1 pcalibre"]],"n":"span"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git clean -f\nRemoving hello.common.rb\nRemoving hello.ours.rb\nRemoving hello.theirs.rb"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"git clean","n":"code","l":" 命令来清理我们为手动合并而创建但不再有用的额外文件。"},{"a":[["class","source pcalibre1 pcalibre"]],"n":"pre","l":"\n"},{"a":[["class","calibre13 pcalibre1 pcalibre"]],"n":"code"},{"a":[["class","calibre14 pcalibre1 pcalibre"]],"n":"span"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git diff --base -b\n* Unmerged path hello.rb\ndiff --git a/hello.rb b/hello.rb\nindex ac51efd..44d0a25 100755\n--- a/hello.rb\n+++ b/hello.rb\n@@ -1,7 +1,8 @@\n"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":" #","n":"span","l":"! /usr/bin/env ruby\n\n+# prints out a greeting\n def hello\n-  puts 'hello world'\n+  puts 'hello mundo'\n end\n\n hello()"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"git diff --base","n":"code","l":" 来查看文件在两边是如何改动的。"},{"a":[["class","source pcalibre1 pcalibre"]],"n":"pre","l":"\n"},{"a":[["class","calibre13 pcalibre1 pcalibre"]],"n":"code"},{"a":[["class","calibre14 pcalibre1 pcalibre"]],"n":"span"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git diff --theirs -b\n* Unmerged path hello.rb\ndiff --git a/hello.rb b/hello.rb\nindex e85207e..44d0a25 100755\n--- a/hello.rb\n+++ b/hello.rb\n@@ -1,5 +1,6 @@\n"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":" #","n":"span","l":"! /usr/bin/env ruby\n\n+# prints out a greeting\n def hello\n   puts 'hello mundo'\n end"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"git diff --theirs","n":"code","l":"。\n在本例及后续的例子中，我们会使用 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"-b","n":"code","l":" 来去除空白，因为我们将它与 Git 中的，而不是我们清理过的 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"hello.theirs.rb","n":"code","l":" 文件比较。"},{"a":[["class","source pcalibre1 pcalibre"]],"n":"pre","l":"\n"},{"a":[["class","calibre13 pcalibre1 pcalibre"]],"n":"code"},{"a":[["class","calibre14 pcalibre1 pcalibre"]],"n":"span"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git diff --ours\n* Unmerged path hello.rb\ndiff --git a/hello.rb b/hello.rb\nindex 36c06c8..44d0a25 100755\n--- a/hello.rb\n+++ b/hello.rb\n@@ -2,7 +2,7 @@\n\n"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":" #","n":"span","l":" prints out a greeting\n def hello\n-  puts 'hello world'\n+  puts 'hello mundo'\n end\n\n hello()"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"git diff --ours","n":"code"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"git diff","n":"code","l":" 来比较将要提交作为合并结果的工作目录与其中任意一个阶段的文件差异。\n让我们看看它们。"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"ignore-space-change","n":"code","l":" 选项要更好，因为在合并前真正地修复了空白修改而不是简单地忽略它们。\n在使用 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"ignore-space-change","n":"code","l":" 进行合并操作后，我们最终得到了有几行是 DOS 行尾的文件，从而使提交内容混乱了。"},{"a":[["class","source pcalibre1 pcalibre"]],"n":"pre","l":"\n"},{"a":[["class","calibre13 pcalibre1 pcalibre"]],"n":"code"},{"a":[["class","calibre14 pcalibre1 pcalibre"]],"n":"span"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" dos2unix hello.theirs.rb\ndos2unix: converting file hello.theirs.rb to Unix format ...\n\n"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git merge-file -p "},{"a":[["class","pcalibre1 pcalibre calibre16"]],"x":"\\","n":"span","l":"\n    hello.ours.rb hello.common.rb hello.theirs.rb > hello.rb\n\n"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git diff -b\ndiff --cc hello.rb\nindex 36c06c8,e85207e..0000000\n--- a/hello.rb\n+++ b/hello.rb\n@@@ -1,8 -1,7 +1,8 @@@\n"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"  #","n":"span","l":"! /usr/bin/env ruby\n\n +# prints out a greeting\n  def hello\n-   puts 'hello world'\n+   puts 'hello mundo'\n  end\n\n  hello()"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"git merge-file","n":"code","l":" 命令来重新合并那个文件。"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":":1:hello.rb","n":"code","l":" 只是查找那个 blob 对象 SHA-1 值的简写。"},{"a":[["class","source pcalibre1 pcalibre"]],"n":"pre","l":"\n"},{"a":[["class","calibre13 pcalibre1 pcalibre"]],"n":"code"},{"a":[["class","calibre14 pcalibre1 pcalibre"]],"n":"span"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git ls-files -u\n100755 ac51efdc3df4f4fd328d1a02ad05331d8e2c9111 1\thello.rb\n100755 36c06c8752c78d2aff89571132f3bf7841a7b5c3 2\thello.rb\n100755 e85207e04dfdd5eb0a1e9febbc67fd837c44a1cd 3\thello.rb"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"ls-files -u","n":"code","l":" 底层命令来得到这些文件的 Git blob 对象的实际 SHA-1 值。"},{"a":[["class","source pcalibre1 pcalibre"]],"n":"pre","l":"\n"},{"a":[["class","calibre13 pcalibre1 pcalibre"]],"n":"code"},{"a":[["class","calibre14 pcalibre1 pcalibre"]],"n":"span"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git show :1:hello.rb > hello.common.rb\n"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git show :2:hello.rb > hello.ours.rb\n"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git show :3:hello.rb > hello.theirs.rb"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"git show","n":"code","l":" 命令与一个特别的语法，你可以将冲突文件的这些版本释放出一份拷贝。"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"MERGE_HEAD","n":"code","l":"，即你将要合并入的版本（“theirs”）。"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"dos2unix","n":"code","l":" 程序。\n所以如果那样的话，我们该如何做？"},{"a":[["class","calibre29 pcalibre1 pcalibre"],["id","_忽略空白"]],"x":"忽略空白","n":"h4","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"在这个特定的例子中，冲突与空白有关。\n我们知道这点是因为这个例子很简单，但是在实际的例子中发现这样的冲突也很容易，因为每一行都被移除而在另一边每一行又被加回来了。\n默认情况下，Git 认为所有这些行都改动了，所以它不会合并文件。","n":"p","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"默认合并策略可以带有参数，其中的几个正好是关于忽略空白改动的。\n如果你看到在一次合并中有大量的空白问题，你可以简单地中止它并重做一次，这次使用 ","n":"p","l":"\n"},{"a":[["class","listing pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"因为在本例中，实际上文件修改并没有冲突，一旦我们忽略空白修改，每一行都能被很好地合并。","n":"p","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"如果你的团队中的某个人可能不小心重新格式化空格为制表符或者相反的操作，这会是一个救命稻草。","n":"p","l":"\n"},{"a":[["class","source pcalibre1 pcalibre"]],"n":"pre","l":"\n"},{"a":[["class","calibre13 pcalibre1 pcalibre"]],"n":"code"},{"a":[["class","calibre14 pcalibre1 pcalibre"]],"n":"span"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git merge -Xignore-space-change whitespace\nAuto-merging hello.rb\nMerge made by the 'recursive' strategy.\n hello.rb | 2 +-\n 1 file changed, 1 insertion(+), 1 deletion(-)"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"-Xignore-all-space","n":"code","l":" 或 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"-Xignore-space-change","n":"code","l":" 选项。\n第一个选项忽略任意 "},{"a":[["class","calibre12 pcalibre1 pcalibre"]],"x":"数量","n":"strong","l":" 的已有空白的修改，第二个选项忽略所有空白修改。"},{"a":[["class","calibre29 pcalibre1 pcalibre"],["id","r_abort_merge"]],"x":"中断一次合并","n":"h4","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"我们现在有几个选项。\n首先，让我们介绍如何摆脱这个情况。\n你可能不想处理冲突这种情况，完全可以通过 ","n":"p","l":"\n"},{"a":[["class","listing pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"n":"p","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"如果因为某些原因你发现自己处在一个混乱的状态中然后只是想要重来一次，也可以运行 ","n":"p","l":"\n"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"git reset --hard HEAD","n":"code","l":" 回到之前的状态或其他你想要恢复的状态。\n请牢记这会将清除工作目录中的所有内容，所以确保你不需要保存这里的任意改动。"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"git merge --abort","n":"code","l":" 选项会尝试恢复到你运行合并前的状态。\n但当运行命令前，在工作目录中有未储藏、未提交的修改时它不能完美处理，除此之外它都工作地很好。"},{"a":[["class","source pcalibre1 pcalibre"]],"n":"pre","l":"\n"},{"a":[["class","calibre13 pcalibre1 pcalibre"]],"n":"code"},{"a":[["class","calibre14 pcalibre1 pcalibre"]],"n":"span"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git status -sb\n"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"#","n":"span"},{"a":[["class","pcalibre1 pcalibre calibre17"]],"x":"# master","n":"span","l":"\nUU hello.rb\n\n"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git merge --abort\n\n"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git status -sb\n"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"#","n":"span"},{"a":[["class","pcalibre1 pcalibre calibre17"]],"x":"# master","n":"span"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"git merge --abort","n":"code","l":" 来简单地退出合并。"},{"a":[["class","source pcalibre1 pcalibre"]],"n":"pre","l":"\n"},{"a":[["class","calibre13 pcalibre1 pcalibre"]],"n":"code"},{"a":[["class","calibre14 pcalibre1 pcalibre"]],"n":"span"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git merge whitespace\nAuto-merging hello.rb\nCONFLICT (content): Merge conflict in hello.rb\nAutomatic merge failed; fix conflicts and then commit the result."},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"whitespace","n":"code","l":" 分支，因为修改了空白字符，所以合并会出现冲突。"},{"a":[["class","source pcalibre1 pcalibre"]],"n":"pre","l":"\n"},{"a":[["class","calibre13 pcalibre1 pcalibre"]],"n":"code"},{"a":[["class","calibre14 pcalibre1 pcalibre"]],"n":"span"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git checkout master\nSwitched to branch 'master'\n\n"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" vim hello.rb\n"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git diff\ndiff --git a/hello.rb b/hello.rb\nindex ac51efd..36c06c8 100755\n--- a/hello.rb\n+++ b/hello.rb\n@@ -1,5 +1,6 @@\n"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":" #","n":"span","l":"! /usr/bin/env ruby\n\n+# prints out a greeting\n def hello\n   puts 'hello world'\n end\n\n"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git commit -am "},{"a":[["class","pcalibre1 pcalibre calibre17"]],"x":"'document the function'","n":"span","l":"\n[master bec6336] document the function\n 1 file changed, 1 insertion(+)"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"master","n":"code","l":" 分支并为函数增加一些注释。"},{"a":[["class","source pcalibre1 pcalibre"]],"n":"pre","l":"\n"},{"a":[["class","calibre13 pcalibre1 pcalibre"]],"n":"code"},{"a":[["class","calibre14 pcalibre1 pcalibre"]],"n":"span"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git checkout -b whitespace\nSwitched to a new branch 'whitespace'\n\n"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" unix2dos hello.rb\nunix2dos: converting file hello.rb to DOS format ...\n"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git commit -am "},{"a":[["class","pcalibre1 pcalibre calibre17"]],"x":"'converted hello.rb to DOS'","n":"span","l":"\n[whitespace 3270f76] converted hello.rb to DOS\n 1 file changed, 7 insertions(+), 7 deletions(-)\n\n"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" vim hello.rb\n"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git diff -b\ndiff --git a/hello.rb b/hello.rb\nindex ac51efd..e85207e 100755\n--- a/hello.rb\n+++ b/hello.rb\n@@ -1,7 +1,7 @@\n"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":" #","n":"span","l":"! /usr/bin/env ruby\n\n def hello\n-  puts 'hello world'\n+  puts 'hello mundo'^M\n end\n\n hello()\n\n"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git commit -am "},{"a":[["class","pcalibre1 pcalibre calibre17"]],"x":"'hello mundo change'","n":"span","l":"\n[whitespace 6d338d2] hello mundo change\n 1 file changed, 1 insertion(+), 1 deletion(-)"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"whitespace","n":"code","l":" 的新分支并将所有 Unix 换行符修改为 DOS 换行符，实质上虽然改变了文件的每一行，但改变的都只是空白字符。\n然后我们修改行 “hello world” 为 “hello mundo”。"},{"a":[["class","source pcalibre1 pcalibre"]],"n":"pre","l":"\n"},{"a":[["class","calibre13 pcalibre1 pcalibre"]],"n":"code"},{"a":[["class","calibre14 pcalibre1 pcalibre"]],"n":"span"},{"a":[["class","pcalibre1 pcalibre calibre17"]],"x":"#! /usr/bin/env ruby","n":"span","l":"\n\n"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"def","n":"span","l":" hello\n  puts "},{"a":[["class","pcalibre1 pcalibre calibre17"]],"x":"'hello world'","n":"span","l":"\n"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"end","n":"span","l":"\n\nhello()"},{"a":[["class","pcalibre1 pcalibre calibre4"]],"x":"hello world","n":"em","l":" 的 Ruby 文件。"},{"a":[["class","link pcalibre5 pcalibre4 pcalibre3 pcalibre2 pcalibre1 pcalibre"],["href","javascript:void(0)"],["id","xref--ch03-git-branching--r_basic_merge_conflicts"],["data-ezPJKgrMLI5iYpd7vlZT7E","{\"frag\": \"r_basic_merge_conflicts\", \"name\": \"text/part0008.html\"}"]],"x":"遇到冲突时的分支合并","n":"a","l":" 介绍了解决合并冲突的一些基础知识，对于更复杂的冲突，Git 提供了几个工具来帮助你指出将会发生什么以及如何更好地处理冲突。"},{"a":[["class","calibre6 pcalibre1 pcalibre"],["id","r_git_reset"]],"x":"重置揭密","n":"h2","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"在继续了解更专业的工具前，我们先讨论一下 ","n":"p","l":"\n"},{"a":[["class","chapter pcalibre1 pcalibre"],["title","三棵树"]],"x":"\n","n":"section","l":"\n"},{"a":[["class","chapter pcalibre1 pcalibre"],["title","工作流程"]],"x":"\n","n":"section","l":"\n"},{"a":[["class","chapter pcalibre1 pcalibre"],["title","重置的作用"]],"x":"\n","n":"section","l":"\n"},{"a":[["class","chapter pcalibre1 pcalibre"],["title","通过路径来重置"]],"x":"\n","n":"section","l":"\n"},{"a":[["class","chapter pcalibre1 pcalibre"],["title","压缩"]],"x":"\n","n":"section","l":"\n"},{"a":[["class","chapter pcalibre1 pcalibre"],["title","检出"]],"x":"\n","n":"section","l":"\n"},{"a":[["class","chapter pcalibre1 pcalibre"],["title","总结"]],"x":"\n","n":"section","l":"\n"},{"a":[["class","pcalibre1 calibre7 pcalibre"],["id","_总结"]],"x":"总结","n":"h3","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"希望你现在熟悉并理解了 ","n":"p","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"下面的速查表列出了命令对树的影响。\n“HEAD” 一列中的 “REF” 表示该命令移动了 HEAD 指向的分支引用，而`‘HEAD’' 则表示只移动了 HEAD 自身。\n特别注意 ","n":"p","l":"\n"},{"a":[["class","content pcalibre1 pcalibre"]],"x":"\n","n":"div","l":"\n"},{"a":[["class","content pcalibre1 pcalibre"]],"x":"\n","n":"div","l":"\n"},{"a":[["class","pcalibre1 table pcalibre"]],"x":"\n","n":"table","l":"\n"},{"a":[["class","pcalibre1 calibre20 pcalibre"]],"x":"\n","n":"colgroup","l":"\n"},{"a":[["class","pcalibre1 pcalibre calibre22"]],"x":"\n","n":"thead","l":"\n"},{"a":[["class","calibre25 pcalibre1 pcalibre"]],"x":"\n","n":"tbody","l":"\n"},{"a":[["class","pcalibre1 pcalibre calibre23"]],"x":"\n","n":"tr","l":"\n"},{"a":[["class","pcalibre1 pcalibre calibre23"]],"x":"\n","n":"tr","l":"\n"},{"a":[["class","pcalibre1 pcalibre calibre23"]],"x":"\n","n":"tr","l":"\n"},{"a":[["class","pcalibre1 pcalibre calibre23"]],"x":"\n","n":"tr","l":"\n"},{"a":[["class","pcalibre1 pcalibre calibre23"]],"x":"\n","n":"tr","l":"\n"},{"a":[["class","pcalibre1 pcalibre calibre23"]],"x":"\n","n":"tr","l":"\n"},{"a":[["class","pcalibre1 pcalibre calibre23"]],"x":"\n","n":"tr","l":"\n"},{"a":[["class","pcalibre1 pcalibre calibre23"]],"x":"\n","n":"tr","l":"\n"},{"a":[["class","calibre26 pcalibre1 pcalibre"]],"n":"td","l":"\n"},{"a":[["class","calibre26 pcalibre1 pcalibre"]],"n":"td","l":"\n"},{"a":[["class","calibre26 pcalibre1 pcalibre"]],"n":"td","l":"\n"},{"a":[["class","calibre26 pcalibre1 pcalibre"]],"n":"td","l":"\n"},{"a":[["class","calibre26 pcalibre1 pcalibre"]],"n":"td","l":"\n"},{"a":[["class","calibre27 pcalibre1 pcalibre"]],"n":"p"},{"a":[["class","calibre12 pcalibre1 pcalibre"]],"x":"NO","n":"strong"},{"a":[["class","calibre27 pcalibre1 pcalibre"]],"x":"YES","n":"p"},{"a":[["class","calibre27 pcalibre1 pcalibre"]],"x":"YES","n":"p"},{"a":[["class","calibre27 pcalibre1 pcalibre"]],"x":"NO","n":"p"},{"a":[["class","calibre27 pcalibre1 pcalibre"]],"n":"p"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"checkout (commit) [file]","n":"code"},{"a":[["class","calibre26 pcalibre1 pcalibre"]],"n":"td","l":"\n"},{"a":[["class","calibre26 pcalibre1 pcalibre"]],"n":"td","l":"\n"},{"a":[["class","calibre26 pcalibre1 pcalibre"]],"n":"td","l":"\n"},{"a":[["class","calibre26 pcalibre1 pcalibre"]],"n":"td","l":"\n"},{"a":[["class","calibre26 pcalibre1 pcalibre"]],"n":"td","l":"\n"},{"a":[["class","calibre27 pcalibre1 pcalibre"]],"x":"YES","n":"p"},{"a":[["class","calibre27 pcalibre1 pcalibre"]],"x":"NO","n":"p"},{"a":[["class","calibre27 pcalibre1 pcalibre"]],"x":"YES","n":"p"},{"a":[["class","calibre27 pcalibre1 pcalibre"]],"x":"NO","n":"p"},{"a":[["class","calibre27 pcalibre1 pcalibre"]],"n":"p"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"reset (commit) [file]","n":"code"},{"a":[["class","calibre26 pcalibre1 pcalibre"]],"n":"td","l":"\n"},{"a":[["class","calibre26 pcalibre1 pcalibre"]],"n":"td","l":"\n"},{"a":[["class","calibre26 pcalibre1 pcalibre"]],"n":"td","l":"\n"},{"a":[["class","calibre26 pcalibre1 pcalibre"]],"n":"td","l":"\n"},{"a":[["class","calibre26 pcalibre1 pcalibre"]],"n":"td","l":"\n"},{"a":[["class","calibre27 pcalibre1 pcalibre"]],"n":"p"},{"a":[["class","calibre12 pcalibre1 pcalibre"]],"x":"File Level","n":"strong"},{"a":[["class","calibre26 pcalibre1 pcalibre"]],"n":"td","l":"\n"},{"a":[["class","calibre26 pcalibre1 pcalibre"]],"n":"td","l":"\n"},{"a":[["class","calibre26 pcalibre1 pcalibre"]],"n":"td","l":"\n"},{"a":[["class","calibre26 pcalibre1 pcalibre"]],"n":"td","l":"\n"},{"a":[["class","calibre26 pcalibre1 pcalibre"]],"n":"td","l":"\n"},{"a":[["class","calibre27 pcalibre1 pcalibre"]],"x":"YES","n":"p"},{"a":[["class","calibre27 pcalibre1 pcalibre"]],"x":"YES","n":"p"},{"a":[["class","calibre27 pcalibre1 pcalibre"]],"x":"YES","n":"p"},{"a":[["class","calibre27 pcalibre1 pcalibre"]],"x":"HEAD","n":"p"},{"a":[["class","calibre27 pcalibre1 pcalibre"]],"n":"p"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"checkout [commit]","n":"code"},{"a":[["class","calibre26 pcalibre1 pcalibre"]],"n":"td","l":"\n"},{"a":[["class","calibre26 pcalibre1 pcalibre"]],"n":"td","l":"\n"},{"a":[["class","calibre26 pcalibre1 pcalibre"]],"n":"td","l":"\n"},{"a":[["class","calibre26 pcalibre1 pcalibre"]],"n":"td","l":"\n"},{"a":[["class","calibre26 pcalibre1 pcalibre"]],"n":"td","l":"\n"},{"a":[["class","calibre27 pcalibre1 pcalibre"]],"n":"p"},{"a":[["class","calibre12 pcalibre1 pcalibre"]],"x":"NO","n":"strong"},{"a":[["class","calibre27 pcalibre1 pcalibre"]],"x":"YES","n":"p"},{"a":[["class","calibre27 pcalibre1 pcalibre"]],"x":"YES","n":"p"},{"a":[["class","calibre27 pcalibre1 pcalibre"]],"x":"REF","n":"p"},{"a":[["class","calibre27 pcalibre1 pcalibre"]],"n":"p"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"reset --hard [commit]","n":"code"},{"a":[["class","calibre26 pcalibre1 pcalibre"]],"n":"td","l":"\n"},{"a":[["class","calibre26 pcalibre1 pcalibre"]],"n":"td","l":"\n"},{"a":[["class","calibre26 pcalibre1 pcalibre"]],"n":"td","l":"\n"},{"a":[["class","calibre26 pcalibre1 pcalibre"]],"n":"td","l":"\n"},{"a":[["class","calibre26 pcalibre1 pcalibre"]],"n":"td","l":"\n"},{"a":[["class","calibre27 pcalibre1 pcalibre"]],"x":"YES","n":"p"},{"a":[["class","calibre27 pcalibre1 pcalibre"]],"x":"NO","n":"p"},{"a":[["class","calibre27 pcalibre1 pcalibre"]],"x":"YES","n":"p"},{"a":[["class","calibre27 pcalibre1 pcalibre"]],"x":"REF","n":"p"},{"a":[["class","calibre27 pcalibre1 pcalibre"]],"n":"p"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"reset [commit]","n":"code"},{"a":[["class","calibre26 pcalibre1 pcalibre"]],"n":"td","l":"\n"},{"a":[["class","calibre26 pcalibre1 pcalibre"]],"n":"td","l":"\n"},{"a":[["class","calibre26 pcalibre1 pcalibre"]],"n":"td","l":"\n"},{"a":[["class","calibre26 pcalibre1 pcalibre"]],"n":"td","l":"\n"},{"a":[["class","calibre26 pcalibre1 pcalibre"]],"n":"td","l":"\n"},{"a":[["class","calibre27 pcalibre1 pcalibre"]],"x":"YES","n":"p"},{"a":[["class","calibre27 pcalibre1 pcalibre"]],"x":"NO","n":"p"},{"a":[["class","calibre27 pcalibre1 pcalibre"]],"x":"NO","n":"p"},{"a":[["class","calibre27 pcalibre1 pcalibre"]],"x":"REF","n":"p"},{"a":[["class","calibre27 pcalibre1 pcalibre"]],"n":"p"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"reset --soft [commit]","n":"code"},{"a":[["class","calibre26 pcalibre1 pcalibre"]],"n":"td","l":"\n"},{"a":[["class","calibre26 pcalibre1 pcalibre"]],"n":"td","l":"\n"},{"a":[["class","calibre26 pcalibre1 pcalibre"]],"n":"td","l":"\n"},{"a":[["class","calibre26 pcalibre1 pcalibre"]],"n":"td","l":"\n"},{"a":[["class","calibre26 pcalibre1 pcalibre"]],"n":"td","l":"\n"},{"a":[["class","calibre27 pcalibre1 pcalibre"]],"n":"p"},{"a":[["class","calibre12 pcalibre1 pcalibre"]],"x":"Commit Level","n":"strong"},{"a":[["class","pcalibre1 pcalibre calibre23"]],"x":"\n","n":"tr","l":"\n"},{"a":[["class","calibre24 pcalibre1 pcalibre"]],"n":"th","l":"\n"},{"a":[["class","calibre24 pcalibre1 pcalibre"]],"x":"HEAD","n":"th","l":"\n"},{"a":[["class","calibre24 pcalibre1 pcalibre"]],"x":"Index","n":"th","l":"\n"},{"a":[["class","calibre24 pcalibre1 pcalibre"]],"x":"Workdir","n":"th","l":"\n"},{"a":[["class","calibre24 pcalibre1 pcalibre"]],"x":"WD Safe?","n":"th","l":"\n"},{"a":[["class","calibre21 pcalibre1 pcalibre"]],"n":"col","l":"\n"},{"a":[["class","calibre21 pcalibre1 pcalibre"]],"n":"col","l":"\n"},{"a":[["class","calibre21 pcalibre1 pcalibre"]],"n":"col","l":"\n"},{"a":[["class","calibre21 pcalibre1 pcalibre"]],"n":"col","l":"\n"},{"a":[["class","calibre21 pcalibre1 pcalibre"]],"n":"col","l":"\n"},{"a":[["class","pcalibre1 pcalibre calibre4"]],"x":"WD Safe?","n":"em","l":" 一列 - 如果它标记为 "},{"a":[["class","calibre12 pcalibre1 pcalibre"]],"x":"NO","n":"strong","l":"，那么运行该命令之前请考虑一下。"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"reset","n":"code","l":" 命令，不过关于它和 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"checkout","n":"code","l":" 之间的区别，你可能还是会有点困惑，毕竟不太可能记住不同调用的所有规则。"},{"a":[["class","pcalibre1 calibre7 pcalibre"],["id","_检出"]],"x":"检出","n":"h3","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"最后，你大概还想知道 ","n":"p","l":"\n"},{"a":[["class","chapter pcalibre1 pcalibre"],["title","不带路径"]],"x":"\n","n":"section","l":"\n"},{"a":[["class","chapter pcalibre1 pcalibre"],["title","带路径"]],"x":"\n","n":"section","l":"\n"},{"a":[["class","calibre29 pcalibre1 pcalibre"],["id","_带路径"]],"x":"带路径","n":"h4","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"运行 ","n":"p","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"此外，同 ","n":"p","l":"\n"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"git reset","n":"code","l":" 和 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"git add","n":"code","l":" 一样，"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"checkout","n":"code","l":" 也接受一个 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"--patch","n":"code","l":" 选项，允许你根据选择一块一块地恢复文件内容。"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"checkout","n":"code","l":" 的另一种方式就是指定一个文件路径，这会像 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"reset","n":"code","l":" 一样不会移动 HEAD。\n它就像 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"git reset [branch] file","n":"code","l":" 那样用该次提交中的那个文件来更新索引，但是它也会覆盖工作目录中对应的文件。\n它就像是 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"git reset --hard [branch] file","n":"code","l":"（如果 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"reset","n":"code","l":" 允许你这样运行的话）- 这样对工作目录并不安全，它也不会移动 HEAD。"},{"a":[["class","calibre29 pcalibre1 pcalibre"],["id","_不带路径"]],"x":"不带路径","n":"h4","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"运行 ","n":"p","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"首先不同于 ","n":"p","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"第二个重要的区别是如何更新 HEAD。\n","n":"p","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"例如，假设我们有 ","n":"p","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"所以，虽然在这两种情况下我们都移动 HEAD 使其指向了提交 A，但_做法_是非常不同的。\n","n":"p","l":"\n"},{"a":[["class","image pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","content pcalibre1 pcalibre"]],"x":"\n","n":"div","l":"\n"},{"a":[["alt","reset checkout"],["class","calibre8 pcalibre1 pcalibre"],["src","ezPJKgrMLI5iYpd7vlZT7E|aW1hZ2VzLzAwMDQyLmpwZWc=|"],["data-calibre-src","images/00042.jpeg"]],"n":"img","l":"\n"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"reset","n":"code","l":" 会移动 HEAD 分支的指向，而 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"checkout","n":"code","l":" 则移动 HEAD 自身。"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"master","n":"code","l":" 和 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"develop","n":"code","l":" 分支，它们分别指向不同的提交；我们现在在 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"develop","n":"code","l":" 上（所以 HEAD 指向它）。\n如果我们运行 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"git reset master","n":"code","l":"，那么 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"develop","n":"code","l":" 自身现在会和 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"master","n":"code","l":" 指向同一个提交。\n而如果我们运行 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"git checkout master","n":"code","l":" 的话，"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"develop","n":"code","l":" 不会移动，HEAD 自身会移动。\n现在 HEAD 将会指向 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"master","n":"code","l":"。"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"reset","n":"code","l":" 会移动 HEAD 分支的指向，而 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"checkout","n":"code","l":" 只会移动 HEAD 自身来指向另一个分支。"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"reset --hard","n":"code","l":"，"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"checkout","n":"code","l":" 对工作目录是安全的，它会通过检查来确保不会将已更改的文件弄丢。\n其实它还更聪明一些。它会在工作目录中先试着简单合并一下，这样所有_还未修改过的_文件都会被更新。\n而 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"reset --hard","n":"code","l":" 则会不做检查就全面地替换所有东西。"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"git checkout [branch]","n":"code","l":" 与运行 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"git reset --hard [branch]","n":"code","l":" 非常相似，它会更新所有三棵树使其看起来像 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"[branch]","n":"code","l":"，不过有两点重要的区别。"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"checkout","n":"code","l":" 和 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"reset","n":"code","l":" 之间的区别。\n和 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"reset","n":"code","l":" 一样，"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"checkout","n":"code","l":" 也操纵三棵树，不过它有一点不同，这取决于你是否传给该命令一个文件路径。"},{"a":[["class","pcalibre1 calibre7 pcalibre"],["id","_压缩"]],"x":"压缩","n":"h3","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"我们来看看如何利用这种新的功能来做一些有趣的事情 - 压缩提交。","n":"p","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"假设你的一系列提交信息中有 “oops.”、“WIP” 和 “forgot this file”，\n聪明的你就能使用 ","n":"p","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"假设你有一个项目，第一次提交中有一个文件，第二次提交增加了一个新的文件并修改了第一个文件，第三次提交再次修改了第一个文件。\n由于第二次提交是一个未完成的工作，因此你想要压缩它。","n":"p","l":"\n"},{"a":[["class","image pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"那么可以运行 ","n":"p","l":"\n"},{"a":[["class","image pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"然后只需再次运行 ","n":"p","l":"\n"},{"a":[["class","image pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"现在你可以查看可到达的历史，即将会推送的历史，现在看起来有个 v1 版 ","n":"p","l":"\n"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"file-a.txt","n":"code","l":" 的提交，接着第二个提交将 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"file-a.txt","n":"code","l":" 修改成了 v3 版并增加了 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"file-b.txt","n":"code","l":"。\n包含 v2 版本的文件已经不在历史中了。"},{"a":[["class","content pcalibre1 pcalibre"]],"x":"\n","n":"div","l":"\n"},{"a":[["alt","reset squash r3"],["class","calibre8 pcalibre1 pcalibre"],["src","ezPJKgrMLI5iYpd7vlZT7E|aW1hZ2VzLzAwMDY0LmpwZWc=|"],["data-calibre-src","images/00064.jpeg"]],"n":"img","l":"\n"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"git commit","n":"code","l":"："},{"a":[["class","content pcalibre1 pcalibre"]],"x":"\n","n":"div","l":"\n"},{"a":[["alt","reset squash r2"],["class","calibre8 pcalibre1 pcalibre"],["src","ezPJKgrMLI5iYpd7vlZT7E|aW1hZ2VzLzAwMDkzLmpwZWc=|"],["data-calibre-src","images/00093.jpeg"]],"n":"img","l":"\n"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"git reset --soft HEAD~2","n":"code","l":" 来将 HEAD 分支移动到一个旧一点的提交上（即你想要保留的第一个提交）："},{"a":[["class","content pcalibre1 pcalibre"]],"x":"\n","n":"div","l":"\n"},{"a":[["alt","reset squash r1"],["class","calibre8 pcalibre1 pcalibre"],["src","ezPJKgrMLI5iYpd7vlZT7E|aW1hZ2VzLzAwMDQ3LmpwZWc=|"],["data-calibre-src","images/00047.jpeg"]],"n":"img","l":"\n"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"reset","n":"code","l":" 来轻松快速地将它们压缩成单个提交，也显出你的聪明。\n（"},{"a":[["class","link pcalibre5 pcalibre4 pcalibre3 pcalibre2 pcalibre1 pcalibre"],["href","javascript:void(0)"],["id","xref-r_squashing"],["data-ezPJKgrMLI5iYpd7vlZT7E","{\"frag\": \"r_squashing\", \"name\": \"text/part0012.html\"}"]],"x":"压缩提交","n":"a","l":" 展示了另一种方式，不过在本例中用 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"reset","n":"code","l":" 更简单。）"},{"a":[["class","pcalibre1 calibre7 pcalibre"],["id","_通过路径来重置"]],"x":"通过路径来重置","n":"h3","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"前面讲述了 ","n":"p","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"现在，假如我们运行 ","n":"p","l":"\n"},{"a":[["class","content pcalibre1 pcalibre"]],"x":"\n","n":"div","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"所以它本质上只是将 ","n":"p","l":"\n"},{"a":[["class","image pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"它还有 ","n":"p","l":"\n"},{"a":[["class","image pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"这就是为什么 ","n":"p","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"我们可以不让 Git 从 HEAD 拉取数据，而是通过具体指定一个提交来拉取该文件的对应版本。\n我们只需运行类似于 ","n":"p","l":"\n"},{"a":[["class","image pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"它其实做了同样的事情，也就是把工作目录中的文件恢复到 ","n":"p","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"还有一点同 ","n":"p","l":"\n"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"git add","n":"code","l":" 一样，就是 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"reset","n":"code","l":" 命令也可以接受一个 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"--patch","n":"code","l":" 选项来一块一块地取消暂存的内容。\n这样你就可以根据选择来取消暂存或恢复内容了。"},{"a":[["class","calibre12 pcalibre1 pcalibre"]],"x":"v1","n":"strong","l":" 版本，运行 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"git add","n":"code","l":" 添加它，然后再将它恢复到 "},{"a":[["class","calibre12 pcalibre1 pcalibre"]],"x":"v3","n":"strong","l":" 版本（只是不用真的过一遍这些步骤）。\n如果我们现在运行 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"git commit","n":"code","l":"，它就会记录一条“将该文件恢复到 "},{"a":[["class","calibre12 pcalibre1 pcalibre"]],"x":"v1","n":"strong","l":" 版本”的更改，尽管我们并未在工作目录中真正地再次拥有它。"},{"a":[["class","content pcalibre1 pcalibre"]],"x":"\n","n":"div","l":"\n"},{"a":[["alt","reset path3"],["class","calibre8 pcalibre1 pcalibre"],["src","ezPJKgrMLI5iYpd7vlZT7E|aW1hZ2VzLzAwMDEzLmpwZWc=|"],["data-calibre-src","images/00013.jpeg"]],"n":"img","l":"\n"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"git reset eb43bf file.txt","n":"code","l":" 的命令即可。"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"git status","n":"code","l":" 命令的输出会建议运行此命令来取消暂存一个文件。\n（查看 "},{"a":[["class","link pcalibre5 pcalibre4 pcalibre3 pcalibre2 pcalibre1 pcalibre"],["href","javascript:void(0)"],["id","xref--ch02-git-basics--r_unstaging"],["data-ezPJKgrMLI5iYpd7vlZT7E","{\"frag\": \"r_unstaging\", \"name\": \"text/part0007.html\"}"]],"x":"取消暂存的文件","n":"a","l":" 来了解更多。）"},{"a":[["class","content pcalibre1 pcalibre"]],"x":"\n","n":"div","l":"\n"},{"a":[["alt","reset path2"],["class","calibre8 pcalibre1 pcalibre"],["src","ezPJKgrMLI5iYpd7vlZT7E|aW1hZ2VzLzAwMDYwLmpwZWc=|"],["data-calibre-src","images/00060.jpeg"]],"n":"img","l":"\n"},{"a":[["class","pcalibre1 pcalibre calibre4"]],"x":"取消暂存文件","n":"em","l":" 的实际效果。\n如果我们查看该命令的示意图，然后再想想 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"git add","n":"code","l":" 所做的事，就会发现它们正好相反。"},{"a":[["class","content pcalibre1 pcalibre"]],"x":"\n","n":"div","l":"\n"},{"a":[["alt","reset path1"],["class","calibre8 pcalibre1 pcalibre"],["src","ezPJKgrMLI5iYpd7vlZT7E|aW1hZ2VzLzAwMTA4LmpwZWc=|"],["data-calibre-src","images/00108.jpeg"]],"n":"img","l":"\n"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"file.txt","n":"code","l":" 从 HEAD 复制到索引中。"},{"a":[["class","arabic pcalibre1 pcalibre"]],"x":"\n","n":"ol","l":"\n"},{"a":[["class","calibre11 pcalibre1 pcalibre"]],"x":"\n","n":"li","l":"\n"},{"a":[["class","calibre11 pcalibre1 pcalibre"]],"x":"\n","n":"li","l":"\n"},{"a":[["class","pcalibre1 pcalibre principal"]],"x":"让索引看起来像 HEAD ","n":"span","l":"\n"},{"a":[["class","pcalibre1 pcalibre calibre4"]],"x":"（到此处停止）","n":"em"},{"a":[["class","pcalibre1 pcalibre principal"]],"x":"移动 HEAD 分支的指向 ","n":"span","l":"\n"},{"a":[["class","pcalibre1 pcalibre calibre4"]],"x":"（已跳过）","n":"em"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"git reset file.txt","n":"code","l":"\n（这其实是 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"git reset --mixed HEAD file.txt","n":"code","l":" 的简写形式，因为你既没有指定一个提交的 SHA-1 或分支，也没有指定 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"--soft","n":"code","l":" 或 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"--hard","n":"code","l":"），它会："},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"reset","n":"code","l":" 基本形式的行为，不过你还可以给它提供一个作用路径。\n若指定了一个路径，"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"reset","n":"code","l":" 将会跳过第 1 步，并且将它的作用范围限定为指定的文件或文件集合。\n这样做自然有它的道理，因为 HEAD 只是一个指针，你无法让它同时指向两个提交中各自的一部分。\n不过索引和工作目录 "},{"a":[["class","pcalibre1 pcalibre calibre4"]],"x":"可以部分更新","n":"em","l":"，所以重置会继续进行第 2、3 步。"},{"a":[["class","pcalibre1 calibre7 pcalibre"],["id","_重置的作用"]],"x":"重置的作用","n":"h3","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"在以下情景中观察 ","n":"p","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"为了演示这些例子，假设我们再次修改了 ","n":"p","l":"\n"},{"a":[["class","image pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"让我们跟着 ","n":"p","l":"\n"},{"a":[["class","chapter pcalibre1 pcalibre"],["title","第 1 步：移动 HEAD"]],"x":"\n","n":"section","l":"\n"},{"a":[["class","chapter pcalibre1 pcalibre"],["title","第 2 步：更新索引（--mixed）"]],"x":"\n","n":"section","l":"\n"},{"a":[["class","chapter pcalibre1 pcalibre"],["title","第 3 步：更新工作目录（--hard）"]],"x":"\n","n":"section","l":"\n"},{"a":[["class","chapter pcalibre1 pcalibre"],["title","回顾"]],"x":"\n","n":"section","l":"\n"},{"a":[["class","calibre29 pcalibre1 pcalibre"],["id","_回顾"]],"x":"回顾","n":"h4","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"n":"p","l":"\n"},{"a":[["class","content pcalibre1 pcalibre"]],"x":"\n","n":"div","l":"\n"},{"a":[["class","arabic pcalibre1 pcalibre"]],"x":"\n","n":"ol","l":"\n"},{"a":[["class","calibre11 pcalibre1 pcalibre"]],"x":"\n","n":"li","l":"\n"},{"a":[["class","calibre11 pcalibre1 pcalibre"]],"x":"\n","n":"li","l":"\n"},{"a":[["class","calibre11 pcalibre1 pcalibre"]],"x":"\n","n":"li","l":"\n"},{"a":[["class","pcalibre1 pcalibre principal"]],"x":"使工作目录看起来像索引","n":"span","l":"\n"},{"a":[["class","pcalibre1 pcalibre principal"]],"x":"使索引看起来像 HEAD ","n":"span","l":"\n"},{"a":[["class","pcalibre1 pcalibre calibre4"]],"x":"（若未指定 ","n":"em"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"--hard","n":"code","l":"，则到此停止）"},{"a":[["class","pcalibre1 pcalibre principal"]],"x":"移动 HEAD 分支的指向 ","n":"span","l":"\n"},{"a":[["class","pcalibre1 pcalibre calibre4"]],"x":"（若指定了 ","n":"em"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"--soft","n":"code","l":"，则到此停止）"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"reset","n":"code","l":" 命令会以特定的顺序重写这三棵树，在你指定以下选项时停止："},{"a":[["class","calibre29 pcalibre1 pcalibre"],["id","_第_3_步_更新工作目录_hard"]],"x":"第 3 步：更新工作目录（--hard）","n":"h4","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"n":"p","l":"\n"},{"a":[["class","image pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"现在让我们回想一下刚才发生的事情。\n你撤销了最后的提交、","n":"p","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"必须注意，","n":"p","l":"\n"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"--hard","n":"code","l":" 标记是 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"reset","n":"code","l":" 命令唯一的危险用法，它也是 Git 会真正地销毁数据的仅有的几个操作之一。\n其他任何形式的 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"reset","n":"code","l":" 调用都可以轻松撤消，但是 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"--hard","n":"code","l":" 选项不能，因为它强制覆盖了工作目录中的文件。\n在这种特殊情况下，我们的 Git 数据库中的一个提交内还留有该文件的 "},{"a":[["class","calibre12 pcalibre1 pcalibre"]],"x":"v3","n":"strong","l":" 版本，我们可以通过 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"reflog","n":"code","l":" 来找回它。但是若该文件还未提交，Git 仍会覆盖它从而导致无法恢复。"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"git add","n":"code","l":" 和 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"git commit","n":"code","l":" 命令"},{"a":[["class","calibre12 pcalibre1 pcalibre"]],"x":"以及","n":"strong","l":"工作目录中的所有工作。"},{"a":[["class","content pcalibre1 pcalibre"]],"x":"\n","n":"div","l":"\n"},{"a":[["alt","reset hard"],["class","calibre8 pcalibre1 pcalibre"],["src","ezPJKgrMLI5iYpd7vlZT7E|aW1hZ2VzLzAwMTYwLmpwZWc=|"],["data-calibre-src","images/00160.jpeg"]],"n":"img","l":"\n"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"reset","n":"code","l":" 要做的的第三件事情就是让工作目录看起来像索引。\n如果使用 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"--hard","n":"code","l":" 选项，它将会继续这一步。"},{"a":[["class","calibre29 pcalibre1 pcalibre"],["id","_第_2_步_更新索引_mixed"]],"x":"第 2 步：更新索引（--mixed）","n":"h4","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"注意，如果你现在运行 ","n":"p","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"接下来，","n":"p","l":"\n"},{"a":[["class","image pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"如果指定 ","n":"p","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"现在再看一眼上图，理解一下发生的事情：它依然会撤销一上次 ","n":"p","l":"\n"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"提交","n":"code","l":"，但还会 "},{"a":[["class","pcalibre1 pcalibre calibre4"]],"x":"取消暂存","n":"em","l":" 所有的东西。\n于是，我们回滚到了所有 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"git add","n":"code","l":" 和 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"git commit","n":"code","l":" 的命令执行之前。"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"--mixed","n":"code","l":" 选项，"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"reset","n":"code","l":" 将会在这时停止。\n这也是默认行为，所以如果没有指定任何选项（在本例中只是 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"git reset HEAD~","n":"code","l":"），这就是命令将会停止的地方。"},{"a":[["class","content pcalibre1 pcalibre"]],"x":"\n","n":"div","l":"\n"},{"a":[["alt","reset mixed"],["class","calibre8 pcalibre1 pcalibre"],["src","ezPJKgrMLI5iYpd7vlZT7E|aW1hZ2VzLzAwMDEwLmpwZWc=|"],["data-calibre-src","images/00010.jpeg"]],"n":"img","l":"\n"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"reset","n":"code","l":" 会用 HEAD 指向的当前快照的内容来更新索引。"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"git status","n":"code","l":" 的话，就会看到新的 HEAD 和以绿色标出的它和索引之间的区别。"},{"a":[["class","calibre29 pcalibre1 pcalibre"],["id","_第_1_步_移动_head"]],"x":"第 1 步：移动 HEAD","n":"h4","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"n":"p","l":"\n"},{"a":[["class","image pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"无论你调用了何种形式的带有一个提交的 ","n":"p","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"现在看一眼上图，理解一下发生的事情：它本质上是撤销了上一次 ","n":"p","l":"\n"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"git commit","n":"code","l":" 命令。\n当你在运行 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"git commit","n":"code","l":" 时，Git 会创建一个新的提交，并移动 HEAD 所指向的分支来使其指向该提交。\n当你将它 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"reset","n":"code","l":" 回 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"HEAD~","n":"code","l":"（HEAD 的父结点）时，其实就是把该分支移动回原来的位置，而不会改变索引和工作目录。\n现在你可以更新索引并再次运行 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"git commit","n":"code","l":" 来完成 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"git commit --amend","n":"code","l":" 所要做的事情了（见 "},{"a":[["class","link pcalibre5 pcalibre4 pcalibre3 pcalibre2 pcalibre1 pcalibre"],["href","javascript:void(0)"],["id","xref-r_git_amend"],["data-ezPJKgrMLI5iYpd7vlZT7E","{\"frag\": \"r_git_amend\", \"name\": \"text/part0012.html\"}"]],"x":"修改最后一次提交","n":"a","l":"）。"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"reset","n":"code","l":"，它首先都会尝试这样做。\n使用 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"reset --soft","n":"code","l":"，它将仅仅停在那儿。"},{"a":[["class","content pcalibre1 pcalibre"]],"x":"\n","n":"div","l":"\n"},{"a":[["alt","reset soft"],["class","calibre8 pcalibre1 pcalibre"],["src","ezPJKgrMLI5iYpd7vlZT7E|aW1hZ2VzLzAwMDU4LmpwZWc=|"],["data-calibre-src","images/00058.jpeg"]],"n":"img","l":"\n"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"reset","n":"code","l":" 做的第一件事是移动 HEAD 的指向。\n这与改变 HEAD 自身不同（"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"checkout","n":"code","l":" 所做的）；"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"reset","n":"code","l":" 移动 HEAD 指向的分支。\n这意味着如果 HEAD 设置为 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"master","n":"code","l":" 分支（例如，你正在 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"master","n":"code","l":" 分支上），运行 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"git reset 9e5e64a","n":"code","l":" 将会使 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"master","n":"code","l":" 指向 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"9e5e64a","n":"code","l":"。"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"reset","n":"code","l":" 看看它都做了什么。\n它以一种简单可预见的方式直接操纵这三棵树。\n它做了三个基本操作。"},{"a":[["class","content pcalibre1 pcalibre"]],"x":"\n","n":"div","l":"\n"},{"a":[["alt","reset start"],["class","calibre8 pcalibre1 pcalibre"],["src","ezPJKgrMLI5iYpd7vlZT7E|aW1hZ2VzLzAwMTA2LmpwZWc=|"],["data-calibre-src","images/00106.jpeg"]],"n":"img","l":"\n"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"file.txt","n":"code","l":" 文件并第三次提交它。\n现在的历史看起来是这样的："},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"reset","n":"code","l":" 命令会更有意义。"},{"a":[["class","pcalibre1 calibre7 pcalibre"],["id","_工作流程"]],"x":"工作流程","n":"h3","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"Git 主要的目的是通过操纵这三棵树来以更加连续的状态记录项目的快照。","n":"p","l":"\n"},{"a":[["class","image pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"让我们来可视化这个过程：假设我们进入到一个新目录，其中有一个文件。\n我们称其为该文件的 ","n":"p","l":"\n"},{"a":[["class","image pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"此时，只有工作目录有内容。","n":"p","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"现在我们想要提交这个文件，所以用 ","n":"p","l":"\n"},{"a":[["class","image pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"接着运行 ","n":"p","l":"\n"},{"a":[["class","image pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"此时如果我们运行 ","n":"p","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"现在我们想要对文件进行修改然后提交它。\n我们将会经历同样的过程；首先在工作目录中修改文件。\n我们称其为该文件的 ","n":"p","l":"\n"},{"a":[["class","image pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"如果现在运行 ","n":"p","l":"\n"},{"a":[["class","image pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"此时，由于索引和 HEAD 不同，若运行 ","n":"p","l":"\n"},{"a":[["class","image pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"现在运行 ","n":"p","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"切换分支或克隆的过程也类似。\n当检出一个分支时，它会修改 ","n":"p","l":"\n"},{"a":[["class","calibre12 pcalibre1 pcalibre"]],"x":"HEAD","n":"strong","l":" 指向新的分支引用，将 "},{"a":[["class","calibre12 pcalibre1 pcalibre"]],"x":"索引","n":"strong","l":" 填充为该次提交的快照，然后将 "},{"a":[["class","calibre12 pcalibre1 pcalibre"]],"x":"索引","n":"strong","l":" 的内容复制到 "},{"a":[["class","calibre12 pcalibre1 pcalibre"]],"x":"工作目录","n":"strong","l":" 中。"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"git status","n":"code","l":" 会没有输出，因为三棵树又变得相同了。"},{"a":[["class","content pcalibre1 pcalibre"]],"x":"\n","n":"div","l":"\n"},{"a":[["alt","reset ex6"],["class","calibre8 pcalibre1 pcalibre"],["src","ezPJKgrMLI5iYpd7vlZT7E|aW1hZ2VzLzAwMTU1LmpwZWc=|"],["data-calibre-src","images/00155.jpeg"]],"n":"img","l":"\n"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"git status","n":"code","l":" 的话就会看到 “Changes to be committed” 下的该文件变为绿色\n——也就是说，现在预期的下一次提交与上一次提交不同。\n最后，我们运行 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"git commit","n":"code","l":" 来完成提交。"},{"a":[["class","content pcalibre1 pcalibre"]],"x":"\n","n":"div","l":"\n"},{"a":[["alt","reset ex5"],["class","calibre8 pcalibre1 pcalibre"],["src","ezPJKgrMLI5iYpd7vlZT7E|aW1hZ2VzLzAwMDA3LmpwZWc=|"],["data-calibre-src","images/00007.jpeg"]],"n":"img","l":"\n"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"git status","n":"code","l":"，我们会看到文件显示在 “Changes not staged for commit,” 下面并被标记为红色，因为该条目在索引与工作目录之间存在不同。\n接着我们运行 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"git add","n":"code","l":" 来将它暂存到索引中。"},{"a":[["class","content pcalibre1 pcalibre"]],"x":"\n","n":"div","l":"\n"},{"a":[["alt","reset ex4"],["class","calibre8 pcalibre1 pcalibre"],["src","ezPJKgrMLI5iYpd7vlZT7E|aW1hZ2VzLzAwMDU1LmpwZWc=|"],["data-calibre-src","images/00055.jpeg"]],"n":"img","l":"\n"},{"a":[["class","calibre12 pcalibre1 pcalibre"]],"x":"v2","n":"strong","l":" 版本，并将它标记为红色。"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"git status","n":"code","l":"，会发现没有任何改动，因为现在三棵树完全相同。"},{"a":[["class","content pcalibre1 pcalibre"]],"x":"\n","n":"div","l":"\n"},{"a":[["alt","reset ex3"],["class","calibre8 pcalibre1 pcalibre"],["src","ezPJKgrMLI5iYpd7vlZT7E|aW1hZ2VzLzAwMDkxLmpwZWc=|"],["data-calibre-src","images/00091.jpeg"]],"n":"img","l":"\n"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"git commit","n":"code","l":"，它会取得索引中的内容并将它保存为一个永久的快照，然后创建一个指向该快照的提交对象，最后更新 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"master","n":"code","l":" 来指向本次提交。"},{"a":[["class","content pcalibre1 pcalibre"]],"x":"\n","n":"div","l":"\n"},{"a":[["alt","reset ex2"],["class","calibre8 pcalibre1 pcalibre"],["src","ezPJKgrMLI5iYpd7vlZT7E|aW1hZ2VzLzAwMTI2LmpwZWc=|"],["data-calibre-src","images/00126.jpeg"]],"n":"img","l":"\n"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"git add","n":"code","l":" 来获取工作目录中的内容，并将其复制到索引中。"},{"a":[["class","content pcalibre1 pcalibre"]],"x":"\n","n":"div","l":"\n"},{"a":[["alt","reset ex1"],["class","calibre8 pcalibre1 pcalibre"],["src","ezPJKgrMLI5iYpd7vlZT7E|aW1hZ2VzLzAwMDA1LmpwZWc=|"],["data-calibre-src","images/00005.jpeg"]],"n":"img","l":"\n"},{"a":[["class","calibre12 pcalibre1 pcalibre"]],"x":"v1","n":"strong","l":" 版本，将它标记为蓝色。\n现在运行 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"git init","n":"code","l":"，这会创建一个 Git 仓库，其中的 HEAD 引用指向未创建的分支（"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"master","n":"code","l":" 还不存在）。"},{"a":[["class","content pcalibre1 pcalibre"]],"x":"\n","n":"div","l":"\n"},{"a":[["alt","reset workflow"],["class","calibre8 pcalibre1 pcalibre"],["src","ezPJKgrMLI5iYpd7vlZT7E|aW1hZ2VzLzAwMDUwLmpwZWc=|"],["data-calibre-src","images/00050.jpeg"]],"n":"img","l":"\n"},{"a":[["class","pcalibre1 calibre7 pcalibre"],["id","_三棵树"]],"x":"三棵树","n":"h3","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"理解 ","n":"p","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"Git 作为一个系统，是以它的一般操作来管理并操纵这三棵树的：","n":"p","l":"\n"},{"a":[["class","content pcalibre1 pcalibre"]],"x":"\n","n":"div","l":"\n"},{"a":[["class","chapter pcalibre1 pcalibre"],["title","HEAD"]],"x":"\n","n":"section","l":"\n"},{"a":[["class","chapter pcalibre1 pcalibre"],["title","索引"]],"x":"\n","n":"section","l":"\n"},{"a":[["class","chapter pcalibre1 pcalibre"],["title","工作目录"]],"x":"\n","n":"section","l":"\n"},{"a":[["class","calibre29 pcalibre1 pcalibre"],["id","_工作目录"]],"x":"工作目录","n":"h4","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"最后，你就有了自己的工作目录。\n另外两棵树以一种高效但并不直观的方式，将它们的内容存储在 ","n":"p","l":"\n"},{"a":[["class","listing pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","source pcalibre1 pcalibre"]],"n":"pre","l":"\n"},{"a":[["class","calibre13 pcalibre1 pcalibre"]],"n":"code"},{"a":[["class","calibre14 pcalibre1 pcalibre"]],"n":"span"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" tree\n.\n├── README\n├── Rakefile\n└── lib\n    └── simplegit.rb\n\n1 directory, 3 files"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":".git","n":"code","l":" 文件夹中。\n工作目录会将它们解包为实际的文件以便编辑。\n你可以把工作目录当做 "},{"a":[["class","calibre12 pcalibre1 pcalibre"]],"x":"沙盒","n":"strong","l":"。在你将修改提交到暂存区并记录到历史之前，可以随意更改。"},{"a":[["class","calibre29 pcalibre1 pcalibre"],["id","r_the_index"]],"x":"索引","n":"h4","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"索引是你的 ","n":"p","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"Git 将上一次检出到工作目录中的所有文件填充到索引区，它们看起来就像最初被检出时的样子。\n之后你会将其中一些文件替换为新版本，接着通过 ","n":"p","l":"\n"},{"a":[["class","listing pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"再说一次，我们在这里又用到了 ","n":"p","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"确切来说，索引并非技术上的树结构，它其实是以扁平的清单实现的。不过对我们而言，把它当做树就够了。","n":"p","l":"\n"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"ls-files","n":"code","l":" 这个幕后的命令，它会显示出索引当前的样子。"},{"a":[["class","source pcalibre1 pcalibre"]],"n":"pre","l":"\n"},{"a":[["class","calibre13 pcalibre1 pcalibre"]],"n":"code"},{"a":[["class","calibre14 pcalibre1 pcalibre"]],"n":"span"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git ls-files -s\n100644 a906cb2a4a904a152e80877d4088654daad0c859 0\tREADME\n100644 8f94139338f9404f26296befa88755fc2598c289 0\tRakefile\n100644 47c6340d6459e05787f644c2447d2595f5d3a54b 0\tlib/simplegit.rb"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"git commit","n":"code","l":" 将它们转换为树来用作新的提交。"},{"a":[["class","calibre12 pcalibre1 pcalibre"]],"x":"预期的下一次提交","n":"strong","l":"。\n我们也会将这个概念引用为 Git 的 “暂存区域”，这就是当你运行 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"git commit","n":"code","l":" 时 Git 看起来的样子。"},{"a":[["class","calibre29 pcalibre1 pcalibre"],["id","_head"]],"x":"HEAD","n":"h4","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"HEAD 是当前分支引用的指针，它总是指向该分支上的最后一次提交。\n这表示 HEAD 将是下一次提交的父结点。\n通常，理解 HEAD 的最简方式，就是将它看做 ","n":"p","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"其实，查看快照的样子很容易。\n下例就显示了 HEAD 快照实际的目录列表，以及其中每个文件的 SHA-1 校验和：","n":"p","l":"\n"},{"a":[["class","listing pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"n":"p","l":"\n"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"cat-file","n":"code","l":" 与 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"ls-tree","n":"code","l":" 是底层命令，它们一般用于底层工作，在日常工作中并不使用。不过它们能帮助我们了解到底发生了什么。"},{"a":[["class","source pcalibre1 pcalibre"]],"n":"pre","l":"\n"},{"a":[["class","calibre13 pcalibre1 pcalibre"]],"n":"code"},{"a":[["class","calibre14 pcalibre1 pcalibre"]],"n":"span"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git cat-file -p HEAD\ntree cfda3bf379e4f8dba8717dee55aab78aef7f4daf\nauthor Scott Chacon  1301511835 -0700\ncommitter Scott Chacon  1301511835 -0700\n\ninitial commit\n\n"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git ls-tree -r HEAD\n100644 blob a906cb2a4a904a152...   README\n100644 blob 8f94139338f9404f2...   Rakefile\n040000 tree 99f1a6d12cb4b6f19...   lib"},{"a":[["class","calibre12 pcalibre1 pcalibre"]],"x":"你的上一次提交","n":"strong","l":" 的快照。"},{"a":[["class","content pcalibre1 pcalibre"]],"x":"\n","n":"div","l":"\n"},{"a":[["class","pcalibre1 table pcalibre"]],"x":"\n","n":"table","l":"\n"},{"a":[["class","pcalibre1 calibre20 pcalibre"]],"x":"\n","n":"colgroup","l":"\n"},{"a":[["class","pcalibre1 pcalibre calibre22"]],"x":"\n","n":"thead","l":"\n"},{"a":[["class","calibre25 pcalibre1 pcalibre"]],"x":"\n","n":"tbody","l":"\n"},{"a":[["class","pcalibre1 pcalibre calibre23"]],"x":"\n","n":"tr","l":"\n"},{"a":[["class","pcalibre1 pcalibre calibre23"]],"x":"\n","n":"tr","l":"\n"},{"a":[["class","pcalibre1 pcalibre calibre23"]],"x":"\n","n":"tr","l":"\n"},{"a":[["class","calibre26 pcalibre1 pcalibre"]],"n":"td","l":"\n"},{"a":[["class","calibre26 pcalibre1 pcalibre"]],"n":"td","l":"\n"},{"a":[["class","calibre27 pcalibre1 pcalibre"]],"x":"沙盒","n":"p"},{"a":[["class","calibre27 pcalibre1 pcalibre"]],"x":"Working Directory","n":"p"},{"a":[["class","calibre26 pcalibre1 pcalibre"]],"n":"td","l":"\n"},{"a":[["class","calibre26 pcalibre1 pcalibre"]],"n":"td","l":"\n"},{"a":[["class","calibre27 pcalibre1 pcalibre"]],"x":"预期的下一次提交的快照","n":"p"},{"a":[["class","calibre27 pcalibre1 pcalibre"]],"x":"Index","n":"p"},{"a":[["class","calibre26 pcalibre1 pcalibre"]],"n":"td","l":"\n"},{"a":[["class","calibre26 pcalibre1 pcalibre"]],"n":"td","l":"\n"},{"a":[["class","calibre27 pcalibre1 pcalibre"]],"x":"上一次提交的快照，下一次提交的父结点","n":"p"},{"a":[["class","calibre27 pcalibre1 pcalibre"]],"x":"HEAD","n":"p"},{"a":[["class","pcalibre1 pcalibre calibre23"]],"x":"\n","n":"tr","l":"\n"},{"a":[["class","calibre24 pcalibre1 pcalibre"]],"x":"树","n":"th","l":"\n"},{"a":[["class","calibre24 pcalibre1 pcalibre"]],"x":"用途","n":"th","l":"\n"},{"a":[["class","calibre21 pcalibre1 pcalibre"]],"n":"col","l":"\n"},{"a":[["class","calibre21 pcalibre1 pcalibre"]],"n":"col","l":"\n"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"reset","n":"code","l":" 和 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"checkout","n":"code","l":" 的最简方法，就是以 Git 的思维框架（将其作为内容管理器）来管理三棵不同的树。\n“树” 在我们这里的实际意思是 “文件的集合”，而不是指特定的数据结构。\n（在某些情况下索引看起来并不像一棵树，不过我们现在的目的是用简单的方式思考它。）"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"reset","n":"code","l":" 与 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"checkout","n":"code","l":"。\n在你初次遇到的 Git 命令中，这两个是最让人困惑的。\n它们能做很多事情，所以看起来我们很难真正地理解并恰当地运用它们。\n针对这一点，我们先来做一个简单的比喻。"},{"a":[["class","calibre6 pcalibre1 pcalibre"],["id","r_rewriting_history"]],"x":"重写历史","n":"h2","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"许多时候，在使用 Git 时，可能会因为某些原因想要修正提交历史。\nGit 很棒的一点是它允许你在最后时刻做决定。\n你可以在将暂存区内容提交前决定哪些文件进入提交，可以通过 stash 命令来决定不与某些内容工作，也可以重写已经发生的提交就像它们以另一种方式发生的一样。\n这可能涉及改变提交的顺序，改变提交中的信息或修改文件，将提交压缩或是拆分，或完全地移除提交 - 在将你的工作成果与他人共享之前。","n":"p","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"在本节中，你可以学到如何完成这些非常有用的工作，这样在与他人分享你的工作成果时你的提交历史将如你所愿地展示出来。","n":"p","l":"\n"},{"a":[["class","chapter pcalibre1 pcalibre"],["title","修改最后一次提交"]],"x":"\n","n":"section","l":"\n"},{"a":[["class","chapter pcalibre1 pcalibre"],["title","修改多个提交信息"]],"x":"\n","n":"section","l":"\n"},{"a":[["class","chapter pcalibre1 pcalibre"],["title","重新排序提交"]],"x":"\n","n":"section","l":"\n"},{"a":[["class","chapter pcalibre1 pcalibre"],["title","压缩提交"]],"x":"\n","n":"section","l":"\n"},{"a":[["class","chapter pcalibre1 pcalibre"],["title","拆分提交"]],"x":"\n","n":"section","l":"\n"},{"a":[["class","chapter pcalibre1 pcalibre"],["title","核武器级选项：filter-branch"]],"x":"\n","n":"section","l":"\n"},{"a":[["class","pcalibre1 calibre7 pcalibre"],["id","_核武器级选项_filter_branch"]],"x":"核武器级选项：filter-branch","n":"h3","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"有另一个历史改写的选项，如果想要通过脚本的方式改写大量提交的话可以使用它 - 例如，全局修改你的邮箱地址或从每一个提交中移除一个文件。\n这个命令是 ","n":"p","l":"\n"},{"a":[["class","chapter pcalibre1 pcalibre"],["title","从每一个提交移除一个文件"]],"x":"\n","n":"section","l":"\n"},{"a":[["class","chapter pcalibre1 pcalibre"],["title","使一个子目录做为新的根目录"]],"x":"\n","n":"section","l":"\n"},{"a":[["class","chapter pcalibre1 pcalibre"],["title","全局修改邮箱地址"]],"x":"\n","n":"section","l":"\n"},{"a":[["class","calibre29 pcalibre1 pcalibre"],["id","_全局修改邮箱地址"]],"x":"全局修改邮箱地址","n":"h4","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"另一个常见的情形是在你开始工作时忘记运行 ","n":"p","l":"\n"},{"a":[["class","listing pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"这会遍历并重写每一个提交来包含你的新邮箱地址。\n因为提交包含了它们父提交的 SHA-1 校验和，这个命令会修改你的历史中的每一个提交的 SHA-1 校验和，而不仅仅只是那些匹配邮箱地址的提交。","n":"p","l":"\n"},{"a":[["class","source pcalibre1 pcalibre"]],"n":"pre","l":"\n"},{"a":[["class","calibre13 pcalibre1 pcalibre"]],"n":"code"},{"a":[["class","calibre14 pcalibre1 pcalibre"]],"n":"span"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git filter-branch --commit-filter "},{"a":[["class","pcalibre1 calibre28 pcalibre"]],"x":"'","n":"span","l":"\n        if [ \"$GIT_AUTHOR_EMAIL\" = \"schacon@localhost\" ];\n        then\n                GIT_AUTHOR_NAME=\"Scott Chacon\";\n                GIT_AUTHOR_EMAIL=\"schacon@example.com\";\n                git commit-tree \"$@\";\n        else\n                git commit-tree \"$@\";\n        fi' HEAD"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"git config","n":"code","l":" 来设置你的名字与邮箱地址，或者你想要开源一个项目并且修改所有你的工作邮箱地址为你的个人邮箱地址。\n任何情形下，你也可以通过 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"filter-branch","n":"code","l":" 来一次性修改多个提交中的邮箱地址。\n需要小心的是只修改你自己的邮箱地址，所以你使用 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"--commit-filter","n":"code","l":"："},{"a":[["class","calibre29 pcalibre1 pcalibre"],["id","_使一个子目录做为新的根目录"]],"x":"使一个子目录做为新的根目录","n":"h4","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"假设已经从另一个源代码控制系统中导入，并且有几个没意义的子目录（trunk、tags 等等）。\n如果想要让 ","n":"p","l":"\n"},{"a":[["class","listing pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"现在新项目根目录是 ","n":"p","l":"\n"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"trunk","n":"code","l":" 子目录了。\nGit 会自动移除所有不影响子目录的提交。"},{"a":[["class","source pcalibre1 pcalibre"]],"n":"pre","l":"\n"},{"a":[["class","calibre13 pcalibre1 pcalibre"]],"n":"code"},{"a":[["class","calibre14 pcalibre1 pcalibre"]],"n":"span"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git filter-branch --subdirectory-filter trunk HEAD\nRewrite 856f0bf61e41a27326cdae8f09fe708d679f596f (12/12)\nRef 'refs/heads/master' was rewritten"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"trunk","n":"code","l":" 子目录作为每一个提交的新的项目根目录，"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"filter-branch","n":"code","l":" 也可以帮助你那么做："},{"a":[["class","calibre29 pcalibre1 pcalibre"],["id","r_removing_file_every_commit"]],"x":"从每一个提交移除一个文件","n":"h4","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"这经常发生。\n有人粗心地通过 ","n":"p","l":"\n"},{"a":[["class","listing pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"n":"p","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"最后将可以看到 Git 重写树与提交然后移动分支指针。\n通常一个好的想法是在一个测试分支中做这件事，然后当你决定最终结果是真正想要的，可以硬重置 master 分支。\n为了让 ","n":"p","l":"\n"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"filter-branch","n":"code","l":" 在所有分支上运行，可以给命令传递 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"--all","n":"code","l":" 选项。"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"--tree-filter","n":"code","l":" 选项在检出项目的每一个提交后运行指定的命令然后重新提交结果。\n在本例中，你从每一个快照中移除了一个叫作 passwords.txt 的文件，无论它是否存在。\n如果想要移除所有偶然提交的编辑器备份文件，可以运行类似 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"git filter-branch --tree-filter 'rm -f *~' HEAD","n":"code","l":" 的命令。"},{"a":[["class","source pcalibre1 pcalibre"]],"n":"pre","l":"\n"},{"a":[["class","calibre13 pcalibre1 pcalibre"]],"n":"code"},{"a":[["class","calibre14 pcalibre1 pcalibre"]],"n":"span"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git filter-branch --tree-filter "},{"a":[["class","pcalibre1 pcalibre calibre17"]],"x":"'rm -f passwords.txt'","n":"span","l":" HEAD\nRewrite 6b9b3cf04e7c5686a9cb838c3f36a8cb6a0fc2bd (21/21)\nRef 'refs/heads/master' was rewritten"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"git add .","n":"code","l":" 提交了一个巨大的二进制文件，你想要从所有地方删除它。\n可能偶然地提交了一个包括一个密码的文件，然而你想要开源项目。\n"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"filter-branch","n":"code","l":" 是一个可能会用来擦洗整个提交历史的工具。\n为了从整个提交历史中移除一个叫做 passwords.txt 的文件，可以使用 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"--tree-filter","n":"code","l":" 选项给 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"filter-branch","n":"code","l":"："},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"filter-branch","n":"code","l":"，它可以改写历史中大量的提交，除非你的项目还没有公开并且其他人没有基于要改写的工作的提交做的工作，你不应当使用它。\n然而，它可以很有用。\n你将会学习到几个常用的用途，这样就得到了它适合使用地方的想法。"},{"a":[["class","pcalibre1 calibre7 pcalibre"],["id","_拆分提交"]],"x":"拆分提交","n":"h3","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"拆分一个提交会撤消这个提交，然后多次地部分地暂存与提交直到完成你所需次数的提交。\n例如，假设想要拆分三次提交的中间那次提交。\n想要将它拆分为两次提交：第一个  “updated README formatting”，第二个 “added blame” 来代替原来的 “updated README formatting and added blame”。\n可以通过修改 ","n":"p","l":"\n"},{"a":[["class","listing pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"然后，当脚本将你进入到命令行时，重置那个提交，拿到被重置的修改，从中创建几次提交。\n当保存并退出编辑器时，Git 带你到列表中第一个提交的父提交，应用第一个提交（","n":"p","l":"\n"},{"a":[["class","listing pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"Git 在脚本中应用最后一次提交（","n":"p","l":"\n"},{"a":[["class","listing pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"再次强调，这些改动了所有在列表中的提交的 SHA-1 校验和，所以要确保列表中的提交还没有推送到共享仓库中。","n":"p","l":"\n"},{"a":[["class","source pcalibre1 pcalibre"]],"n":"pre","l":"\n"},{"a":[["class","calibre13 pcalibre1 pcalibre"]],"n":"code"},{"a":[["class","calibre14 pcalibre1 pcalibre"]],"n":"span"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git log -4 --pretty=format:"},{"a":[["class","pcalibre1 pcalibre calibre17"]],"x":"\"%h %s\"","n":"span","l":"\n1c002dd added cat-file\n9b29157 added blame\n35cfb2b updated README formatting\nf3cc40e changed my name a bit"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"a5f4a0d","n":"code","l":"），历史记录看起来像这样："},{"a":[["class","source pcalibre1 pcalibre"]],"n":"pre","l":"\n"},{"a":[["class","calibre13 pcalibre1 pcalibre"]],"n":"code"},{"a":[["class","calibre14 pcalibre1 pcalibre"]],"n":"span"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git reset HEAD^\n"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git add README\n"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git commit -m "},{"a":[["class","pcalibre1 pcalibre calibre17"]],"x":"'updated README formatting'","n":"span","l":"\n"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git add lib/simplegit.rb\n"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git commit -m "},{"a":[["class","pcalibre1 pcalibre calibre17"]],"x":"'added blame'","n":"span","l":"\n"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git rebase --continue"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"f7f3f6d","n":"code","l":"），应用第二个提交（"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"310154e","n":"code","l":"），然后让你进入命令行。\n那里，可以通过 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"git reset HEAD^","n":"code","l":" 做一次针对那个提交的混合重置，实际上将会撤消那次提交并将修改的文件未暂存。\n现在可以暂存并提交文件直到有几个提交，然后当完成时运行 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"git rebase --continue","n":"code","l":"："},{"a":[["class","source pcalibre1 pcalibre"]],"n":"pre","l":"\n"},{"a":[["class","calibre13 pcalibre1 pcalibre"]],"n":"code"},{"a":[["class","calibre14 pcalibre1 pcalibre"]],"n":"span","l":"pick f7f3f6d changed my name a bit\nedit 310154e updated README formatting and added blame\npick a5f4a0d added cat-file"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"rebase -i","n":"code","l":" 的脚本来做到这点，将要拆分的提交的指令修改为 “edit”："},{"a":[["class","pcalibre1 calibre7 pcalibre"],["id","r_squashing"]],"x":"压缩提交","n":"h3","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"通过交互式变基工具，也可以将一连串提交压缩成一个单独的提交。\n在变基信息中脚本给出了有用的指令：","n":"p","l":"\n"},{"a":[["class","listing pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"如果，指定 “squash” 而不是 “pick” 或 “edit”，Git 将应用两者的修改并合并提交信息在一起。\n所以，如果想要这三次提交变为一个提交，可以这样修改脚本：","n":"p","l":"\n"},{"a":[["class","listing pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"当保存并退出编辑器时，Git 应用所有的三次修改然后将你放到编辑器中来合并三次提交信息：","n":"p","l":"\n"},{"a":[["class","listing pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"当你保存之后，你就拥有了一个包含前三次提交的全部变更的提交。","n":"p","l":"\n"},{"a":[["class","source pcalibre1 pcalibre"]],"n":"pre","l":"\n"},{"a":[["class","calibre13 pcalibre1 pcalibre"]],"n":"code"},{"a":[["class","calibre14 pcalibre1 pcalibre"]],"n":"span"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"#","n":"span","l":" This is a combination of 3 commits.\n"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"#","n":"span","l":" The first commit"},{"a":[["class","pcalibre1 calibre28 pcalibre"]],"x":"'","n":"span","l":"s message is:\nchanged my name a bit\n\n"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"#","n":"span","l":" This is the 2nd commit message:\n\nupdated README formatting and added blame\n\n"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"#","n":"span","l":" This is the 3rd commit message:\n\nadded cat-file"},{"a":[["class","source pcalibre1 pcalibre"]],"n":"pre","l":"\n"},{"a":[["class","calibre13 pcalibre1 pcalibre"]],"n":"code"},{"a":[["class","calibre14 pcalibre1 pcalibre"]],"n":"span","l":"pick f7f3f6d changed my name a bit\nsquash 310154e updated README formatting and added blame\nsquash a5f4a0d added cat-file"},{"a":[["class","source pcalibre1 pcalibre"]],"n":"pre","l":"\n"},{"a":[["class","calibre13 pcalibre1 pcalibre"]],"n":"code"},{"a":[["class","calibre14 pcalibre1 pcalibre"]],"n":"span"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"#","n":"span","l":"\n"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"#","n":"span","l":" Commands:\n"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"#","n":"span","l":"  p, pick = use commit\n"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"#","n":"span","l":"  r, reword = use commit, but edit the commit message\n"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"#","n":"span","l":"  e, edit = use commit, but stop "},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"for","n":"span","l":" amending\n"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"#","n":"span","l":"  s, squash = use commit, but meld into previous commit\n"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"#","n":"span","l":"  f, fixup = like "},{"a":[["class","pcalibre1 pcalibre calibre17"]],"x":"\"squash\"","n":"span","l":", but discard this commit"},{"a":[["class","pcalibre1 calibre28 pcalibre"]],"x":"'","n":"span","l":"s log message\n"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"#","n":"span","l":"  x, exec = run command (the rest of the line) using shell\n"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"#","n":"span","l":"\n"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"#","n":"span","l":" These lines can be re-ordered; they are executed from top to bottom.\n"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"#","n":"span","l":"\n"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"#","n":"span","l":" If you remove a line here THAT COMMIT WILL BE LOST.\n"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"#","n":"span","l":"\n"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"#","n":"span","l":" However, "},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"if","n":"span","l":" you remove everything, the rebase will be aborted.\n"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"#","n":"span","l":"\n"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"#","n":"span","l":" Note that empty commits are commented out"},{"a":[["class","pcalibre1 calibre7 pcalibre"],["id","_重新排序提交"]],"x":"重新排序提交","n":"h3","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"也可以使用交互式变基来重新排序或完全移除提交。\n如果想要移除 “added cat-file” 提交然后修改另外两个提交引入的顺序，可以将变基脚本从这样：","n":"p","l":"\n"},{"a":[["class","listing pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"改为这样：","n":"p","l":"\n"},{"a":[["class","listing pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"当保存并退出编辑器时，Git 将你的分支带回这些提交的父提交，应用 ","n":"p","l":"\n"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"310154e","n":"code","l":" 然后应用 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"f7f3f6d","n":"code","l":"，最后停止。\n事实修改了那些提交的顺序并完全地移除了 “added cat-file” 提交。"},{"a":[["class","source pcalibre1 pcalibre"]],"n":"pre","l":"\n"},{"a":[["class","calibre13 pcalibre1 pcalibre"]],"n":"code"},{"a":[["class","calibre14 pcalibre1 pcalibre"]],"n":"span","l":"pick 310154e updated README formatting and added blame\npick f7f3f6d changed my name a bit"},{"a":[["class","source pcalibre1 pcalibre"]],"n":"pre","l":"\n"},{"a":[["class","calibre13 pcalibre1 pcalibre"]],"n":"code"},{"a":[["class","calibre14 pcalibre1 pcalibre"]],"n":"span","l":"pick f7f3f6d changed my name a bit\npick 310154e updated README formatting and added blame\npick a5f4a0d added cat-file"},{"a":[["class","pcalibre1 calibre7 pcalibre"],["id","r_changing_multiple"]],"x":"修改多个提交信息","n":"h3","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"为了修改在提交历史中较远的提交，必须使用更复杂的工具。\nGit 没有一个改变历史工具，但是可以使用变基工具来变基一系列提交，基于它们原来的 HEAD 而不是将其移动到另一个新的上面。\n通过交互式变基工具，可以在任何想要修改的提交后停止，然后修改信息、添加文件或做任何想做的事情。\n可以通过给 ","n":"p","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"例如，如果想要修改最近三次提交信息，或者那组提交中的任意一个提交信息，将想要修改的最近一次提交的父提交作为参数传递给 ","n":"p","l":"\n"},{"a":[["class","listing pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"再次记住这是一个变基命令 - 在 ","n":"p","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"运行这个命令会在文本编辑器上给你一个提交的列表，看起来像下面这样：","n":"p","l":"\n"},{"a":[["class","listing pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"需要重点注意的是相对于正常使用的 ","n":"p","l":"\n"},{"a":[["class","listing pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"注意其中的反序显示。\n交互式变基给你一个它将会运行的脚本。\n它将会从你在命令行中指定的提交（","n":"p","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"你需要修改脚本来让它停留在你想修改的变更上。\n要达到这个目的，你只要将你想修改的每一次提交前面的 ‘pick’ 改为 ‘edit’。\n例如，只想修改第三次提交信息，可以像下面这样修改文件：","n":"p","l":"\n"},{"a":[["class","listing pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"当保存并退出编辑器时，Git 将你带回到列表中的最后一次提交，把你送回命令行并提示以下信息：","n":"p","l":"\n"},{"a":[["class","listing pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"这些指令准确地告诉你该做什么。\n输入","n":"p","l":"\n"},{"a":[["class","listing pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"修改提交信息，然后退出编辑器。\n然后，运行","n":"p","l":"\n"},{"a":[["class","listing pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"这个命令将会自动地应用另外两个提交，然后就完成了。\n如果需要将不止一处的 pick 改为 edit，需要在每一个修改为 edit 的提交上重复这些步骤。\n每一次，Git 将会停止，让你修正提交，然后继续直到完成。","n":"p","l":"\n"},{"a":[["class","source pcalibre1 pcalibre"]],"n":"pre","l":"\n"},{"a":[["class","calibre13 pcalibre1 pcalibre"]],"n":"code"},{"a":[["class","calibre14 pcalibre1 pcalibre"]],"n":"span"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git rebase --continue"},{"a":[["class","source pcalibre1 pcalibre"]],"n":"pre","l":"\n"},{"a":[["class","calibre13 pcalibre1 pcalibre"]],"n":"code"},{"a":[["class","calibre14 pcalibre1 pcalibre"]],"n":"span"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git commit --amend"},{"a":[["class","source pcalibre1 pcalibre"]],"n":"pre","l":"\n"},{"a":[["class","calibre13 pcalibre1 pcalibre"]],"n":"code"},{"a":[["class","calibre14 pcalibre1 pcalibre"]],"n":"span"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git rebase -i HEAD~3\nStopped at f7f3f6d... changed my name a bit\nYou can amend the commit now, with\n\n       git commit --amend\n\nOnce you’re satisfied with your changes, run\n\n       git rebase --continue"},{"a":[["class","source pcalibre1 pcalibre"]],"n":"pre","l":"\n"},{"a":[["class","calibre13 pcalibre1 pcalibre"]],"n":"code"},{"a":[["class","calibre14 pcalibre1 pcalibre"]],"n":"span","l":"edit f7f3f6d changed my name a bit\npick 310154e updated README formatting and added blame\npick a5f4a0d added cat-file"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"HEAD~3","n":"code","l":"）开始，从上到下的依次重演每一个提交引入的修改。\n它将最旧的而不是最新的列在上面，因为那会是第一个将要重演的。"},{"a":[["class","source pcalibre1 pcalibre"]],"n":"pre","l":"\n"},{"a":[["class","calibre13 pcalibre1 pcalibre"]],"n":"code"},{"a":[["class","calibre14 pcalibre1 pcalibre"]],"n":"span"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git log --pretty=format:"},{"a":[["class","pcalibre1 pcalibre calibre17"]],"x":"\"%h %s\"","n":"span","l":" HEAD~3..HEAD\na5f4a0d added cat-file\n310154e updated README formatting and added blame\nf7f3f6d changed my name a bit"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"log","n":"code","l":" 命令，这些提交显示的顺序是相反的。\n运行一次 "},{"a":[["class","pcalibre1 pcalibre calibre4"]],"x":"log","n":"em","l":" 命令，会看到类似这样的东西："},{"a":[["class","source pcalibre1 pcalibre"]],"n":"pre","l":"\n"},{"a":[["class","calibre13 pcalibre1 pcalibre"]],"n":"code"},{"a":[["class","calibre14 pcalibre1 pcalibre"]],"n":"span","l":"pick f7f3f6d changed my name a bit\npick 310154e updated README formatting and added blame\npick a5f4a0d added cat-file\n\n"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"#","n":"span","l":" Rebase 710f0f8..a5f4a0d onto 710f0f8\n"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"#","n":"span","l":"\n"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"#","n":"span","l":" Commands:\n"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"#","n":"span","l":"  p, pick = use commit\n"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"#","n":"span","l":"  r, reword = use commit, but edit the commit message\n"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"#","n":"span","l":"  e, edit = use commit, but stop "},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"for","n":"span","l":" amending\n"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"#","n":"span","l":"  s, squash = use commit, but meld into previous commit\n"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"#","n":"span","l":"  f, fixup = like "},{"a":[["class","pcalibre1 pcalibre calibre17"]],"x":"\"squash\"","n":"span","l":", but discard this commit"},{"a":[["class","pcalibre1 calibre28 pcalibre"]],"x":"'","n":"span","l":"s log message\n"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"#","n":"span","l":"  x, exec = run command (the rest of the line) using shell\n"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"#","n":"span","l":"\n"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"#","n":"span","l":" These lines can be re-ordered; they are executed from top to bottom.\n"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"#","n":"span","l":"\n"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"#","n":"span","l":" If you remove a line here THAT COMMIT WILL BE LOST.\n"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"#","n":"span","l":"\n"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"#","n":"span","l":" However, "},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"if","n":"span","l":" you remove everything, the rebase will be aborted.\n"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"#","n":"span","l":"\n"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"#","n":"span","l":" Note that empty commits are commented out"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"HEAD~3..HEAD","n":"code","l":" 范围内的每一个提交都会被重写，无论你是否修改信息。\n不要涉及任何已经推送到中央服务器的提交 - 这样做会产生一次变更的两个版本，因而使他人困惑。"},{"a":[["class","source pcalibre1 pcalibre"]],"n":"pre","l":"\n"},{"a":[["class","calibre13 pcalibre1 pcalibre"]],"n":"code"},{"a":[["class","calibre14 pcalibre1 pcalibre"]],"n":"span"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git rebase -i HEAD~3"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"git rebase -i","n":"code","l":" 命令，即  "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"HEAD~2^","n":"code","l":" 或 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"HEAD~3","n":"code","l":"。\n记住 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"~3","n":"code","l":" 可能比较容易，因为你正尝试修改最后三次提交；但是注意实际上指定了以前的四次提交，即想要修改提交的父提交："},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"git rebase","n":"code","l":" 增加 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"-i","n":"code","l":" 选项来交互式地运行变基。\n必须指定想要重写多久远的历史，这可以通过告诉命令将要变基到的提交来做到。"},{"a":[["class","pcalibre1 calibre7 pcalibre"],["id","r_git_amend"]],"x":"修改最后一次提交","n":"h3","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"修改你最近一次提交可能是所有修改历史提交的操作中最常见的一个。\n对于你的最近一次提交，你往往想做两件事情：修改提交信息，或者修改你添加、修改和移除的文件的快照。","n":"p","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"如果，你只是想修改最近一次提交的提交信息，那么很简单：","n":"p","l":"\n"},{"a":[["class","listing pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"这会把你带入文本编辑器，里面包含了你最近一条提交信息，供你修改。\n当保存并关闭编辑器后，编辑器将会用你输入的内容替换最近一条提交信息。","n":"p","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"如果你已经完成提交，又因为之前提交时忘记添加一个新创建的文件，想通过添加或修改文件来更改提交的快照，也可以通过类似的操作来完成。\n通过修改文件然后运行 ","n":"p","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"使用这个技巧的时候需要小心，因为修正会改变提交的 SHA-1 校验和。\n它类似于一个小的变基 - 如果已经推送了最后一次提交就不要修正它。","n":"p","l":"\n"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"git add","n":"code","l":" 或 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"git rm","n":"code","l":" 一个已追踪的文件，随后运行 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"git commit --amend","n":"code","l":" 拿走当前的暂存区域并使其做为新提交的快照。"},{"a":[["class","source pcalibre1 pcalibre"]],"n":"pre","l":"\n"},{"a":[["class","calibre13 pcalibre1 pcalibre"]],"n":"code"},{"a":[["class","calibre14 pcalibre1 pcalibre"]],"n":"span"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git commit --amend"},{"a":[["class","calibre6 pcalibre1 pcalibre"],["id","r_searching"]],"x":"搜索","n":"h2","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"无论仓库里的代码量有多少，你经常需要查找一个函数是在哪里调用或者定义的，或者一个方法的变更历史。\nGit 提供了两个有用的工具来快速地从它的数据库中浏览代码和提交。\n我们来简单的看一下。","n":"p","l":"\n"},{"a":[["class","chapter pcalibre1 pcalibre"],["title","Git Grep"]],"x":"\n","n":"section","l":"\n"},{"a":[["class","chapter pcalibre1 pcalibre"],["title","Git 日志搜索"]],"x":"\n","n":"section","l":"\n"},{"a":[["class","pcalibre1 calibre7 pcalibre"],["id","_git_日志搜索"]],"x":"Git 日志搜索","n":"h3","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"或许你不想知道某一项在 ","n":"p","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"例如，如果我们想找到 ","n":"p","l":"\n"},{"a":[["class","listing pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"如果我们查看这些提交的 diff，我们可以看到在 ","n":"p","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"如果你希望得到更精确的结果，你可以使用 ","n":"p","l":"\n"},{"a":[["class","chapter pcalibre1 pcalibre"],["title","行日志搜索"]],"x":"\n","n":"section","l":"\n"},{"a":[["class","calibre29 pcalibre1 pcalibre"],["id","_行日志搜索"]],"x":"行日志搜索","n":"h4","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"行日志搜索是另一个相当高级并且有用的日志搜索功能。\n这是一个最近新增的不太知名的功能，但却是十分有用。\n在 ","n":"p","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"例如，假设我们想查看 ","n":"p","l":"\n"},{"a":[["class","listing pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"如果 Git 无法计算出如何匹配你代码中的函数或者方法，你可以提供一个正则表达式。\n例如，这个命令和上面的是等同的：","n":"p","l":"\n"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"git log -L '/unsigned long git_deflate_bound/',/^}/:zlib.c","n":"code","l":"。\n你也可以提供单行或者一个范围的行号来获得相同的输出。"},{"a":[["class","source pcalibre1 pcalibre"]],"n":"pre","l":"\n"},{"a":[["class","calibre13 pcalibre1 pcalibre"]],"n":"code"},{"a":[["class","calibre14 pcalibre1 pcalibre"]],"n":"span"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git log -L :git_deflate_bound:zlib.c\ncommit ef49a7a0126d64359c974b4b3b71d7ad42ee3bca\nAuthor: Junio C Hamano <gitster@pobox.com>\nDate:   Fri Jun 10 11:52:15 2011 -0700\n\n    zlib: zlib can only process 4GB at a time\n\ndiff --git a/zlib.c b/zlib.c\n--- a/zlib.c\n+++ b/zlib.c\n@@ -85,5 +130,5 @@\n-unsigned long git_deflate_bound(z_streamp strm, unsigned long size)\n+unsigned long git_deflate_bound(git_zstream *strm, unsigned long size)\n {\n-       return deflateBound(strm, size);\n+       return deflateBound(&strm->z, size);\n }\n\n\ncommit 225a6f1068f71723a910e8565db4e252b3ca21fa\nAuthor: Junio C Hamano <gitster@pobox.com>\nDate:   Fri Jun 10 11:18:17 2011 -0700\n\n    zlib: wrap deflateBound() too\n\ndiff --git a/zlib.c b/zlib.c\n--- a/zlib.c\n+++ b/zlib.c\n@@ -81,0 +85,5 @@\n+unsigned long git_deflate_bound(z_streamp strm, unsigned long size)\n+{\n+       return deflateBound(strm, size);\n+}\n+"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"zlib.c","n":"code","l":" 文件中`git_deflate_bound` 函数的每一次变更，我们可以执行 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"git log -L :git_deflate_bound:zlib.c","n":"code","l":"。\nGit 会尝试找出这个函数的范围，然后查找历史记录，并且显示从函数创建之后一系列变更对应的补丁。"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"git log","n":"code","l":" 后加上 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"-L","n":"code","l":" 选项即可调用，它可以展示代码中一行或者一个函数的历史。"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"-G","n":"code","l":" 选项来使用正则表达式搜索。"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"ef49a7a","n":"code","l":" 这个提交引入了常量，并且在 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"e01503b","n":"code","l":" 这个提交中被修改了。"},{"a":[["class","source pcalibre1 pcalibre"]],"n":"pre","l":"\n"},{"a":[["class","calibre13 pcalibre1 pcalibre"]],"n":"code"},{"a":[["class","calibre14 pcalibre1 pcalibre"]],"n":"span"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git log -SZLIB_BUF_MAX --oneline\ne01503b zlib: allow feeding more than 4GB in one go\nef49a7a zlib: zlib can only process 4GB at a time"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"ZLIB_BUF_MAX","n":"code","l":" 常量是什么时候引入的，我们可以使用 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"-S","n":"code","l":" 选项来显示新增和删除该字符串的提交。"},{"a":[["class","calibre12 pcalibre1 pcalibre"]],"x":"哪里","n":"strong","l":" ，而是想知道是什么 "},{"a":[["class","calibre12 pcalibre1 pcalibre"]],"x":"时候","n":"strong","l":" 存在或者引入的。\n"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"git log","n":"code","l":" 命令有许多强大的工具可以通过提交信息甚至是 diff 的内容来找到某个特定的提交。"},{"a":[["class","pcalibre1 calibre7 pcalibre"],["id","r_git_grep"]],"x":"Git Grep","n":"h3","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"Git 提供了一个 ","n":"p","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"默认情况下 Git 会查找你工作目录的文件。\n你可以传入 ","n":"p","l":"\n"},{"a":[["class","listing pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"n":"p","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"例如，你可以使用 ","n":"p","l":"\n"},{"a":[["class","listing pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"如果你想看匹配的行是属于哪一个方法或者函数，你可以传入 ","n":"p","l":"\n"},{"a":[["class","listing pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"在这里我们可以看到在 date.c 文件中有 ","n":"p","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"你还可以使用 ","n":"p","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"这里我们也用到了 ","n":"p","l":"\n"},{"a":[["class","listing pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"相比于一些常用的搜索命令比如 ","n":"p","l":"\n"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"grep","n":"code","l":" 和 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"ack","n":"code","l":"，"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"git grep","n":"code","l":" 命令有一些的优点。\n第一就是速度非常快，第二是你不仅仅可以可以搜索工作目录，还可以搜索任意的 Git 树。\n在上一个例子中，我们在一个旧版本的 Git 源代码中查找，而不是当前检出的版本。"},{"a":[["class","source pcalibre1 pcalibre"]],"n":"pre","l":"\n"},{"a":[["class","calibre13 pcalibre1 pcalibre"]],"n":"code"},{"a":[["class","calibre14 pcalibre1 pcalibre"]],"n":"span"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git grep --break --heading "},{"a":[["class","pcalibre1 pcalibre calibre16"]],"x":"\\","n":"span","l":"\n    -n -e "},{"a":[["class","pcalibre1 pcalibre calibre17"]],"x":"'#define'","n":"span","l":" --and "},{"a":[["class","pcalibre1 pcalibre calibre16"]],"x":"\\(","n":"span","l":" -e LINK -e BUF_MAX "},{"a":[["class","pcalibre1 pcalibre calibre16"]],"x":"\\)","n":"span","l":" v1.8.0\nv1.8.0:builtin/index-pack.c\n62:#define FLAG_LINK (1u<<20)\n\nv1.8.0:cache.h\n73:#define S_IFGITLINK  0160000\n74:#define S_ISGITLINK(m)       (((m) & S_IFMT) == S_IFGITLINK)\n\nv1.8.0:environment.c\n54:#define OBJECT_CREATION_MODE OBJECT_CREATION_USES_HARDLINKS\n\nv1.8.0:strbuf.c\n326:#define STRBUF_MAXLINK (2*PATH_MAX)\n\nv1.8.0:symlinks.c\n53:#define FL_SYMLINK  (1 << 2)\n\nv1.8.0:zlib.c\n"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"30:/* #","n":"span","l":"define ZLIB_BUF_MAX ((uInt)-1) */\n31:#define ZLIB_BUF_MAX ((uInt) 1024 * 1024 * 1024) /* 1GB */"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"--break","n":"code","l":" 和 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"--heading","n":"code","l":" 选项来使输出更加容易阅读。"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"--and","n":"code","l":" 标志来查看复杂的字符串组合，也就是在同一行同时包含多个匹配。\n比如，我们要查看在旧版本 1.8.0 的 Git 代码库中定义了常量名包含 “LINK” 或者 “BUF_MAX” 这两个字符串所在的行。"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"match_multi_number","n":"code","l":" 和 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"match_digit","n":"code","l":" 两个函数调用了 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"gmtime_r","n":"code","l":"。"},{"a":[["class","source pcalibre1 pcalibre"]],"n":"pre","l":"\n"},{"a":[["class","calibre13 pcalibre1 pcalibre"]],"n":"code"},{"a":[["class","calibre14 pcalibre1 pcalibre"]],"n":"span"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git grep -p gmtime_r *.c\ndate.c=static int match_multi_number(unsigned long num, char c, const char *date, char *end, struct tm *tm)\ndate.c:         if (gmtime_r(&now, &now_tm))\ndate.c=static int match_digit(const char *date, struct tm *tm, int *offset, int *tm_gmt)\ndate.c:         if (gmtime_r(&time, tm)) {"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"-p","n":"code","l":" 选项："},{"a":[["class","source pcalibre1 pcalibre"]],"n":"pre","l":"\n"},{"a":[["class","calibre13 pcalibre1 pcalibre"]],"n":"code"},{"a":[["class","calibre14 pcalibre1 pcalibre"]],"n":"span"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git grep --count gmtime_r\ncompat/gmtime.c:4\ncompat/mingw.c:1\ncompat/mingw.h:1\ndate.c:2\ngit-compat-util.h:2"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"--count","n":"code","l":" 选项来使 Git 输出概述的信息，仅仅包括哪些文件包含匹配以及每个文件包含了多少个匹配。"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"grep","n":"code","l":" 命令有一些有趣的选项。"},{"a":[["class","source pcalibre1 pcalibre"]],"n":"pre","l":"\n"},{"a":[["class","calibre13 pcalibre1 pcalibre"]],"n":"code"},{"a":[["class","calibre14 pcalibre1 pcalibre"]],"n":"span"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git grep -n gmtime_r\n"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"compat/gmtime.c:3:#","n":"span","l":"undef gmtime_r\ncompat/gmtime.c:8:      return git_gmtime_r(timep, &result);\ncompat/gmtime.c:11:struct tm *git_gmtime_r(const time_t *timep, struct tm *result)\ncompat/gmtime.c:16:     ret = gmtime_r(timep, result);\ncompat/mingw.c:606:struct tm *gmtime_r(const time_t *timep, struct tm *result)\ncompat/mingw.h:162:struct tm *gmtime_r(const time_t *timep, struct tm *result);\ndate.c:429:             if (gmtime_r(&now, &now_tm))\ndate.c:492:             if (gmtime_r(&time, tm)) {\ngit-compat-util.h:721:struct tm *git_gmtime_r(const time_t *, struct tm *);\n"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"git-compat-util.h:723:#","n":"span","l":"define gmtime_r git_gmtime_r"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"-n","n":"code","l":" 参数来输出 Git 所找到的匹配行行号。"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"grep","n":"code","l":" 命令，你可以很方便地从提交历史或者工作目录中查找一个字符串或者正则表达式。\n我们用 Git 本身源代码的查找作为例子。"},{"a":[["class","calibre6 pcalibre1 pcalibre"],["id","r_signing"]],"x":"签署工作","n":"h2","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"Git 虽然是密码级安全的，但它不是万无一失的。\n如果你从因特网上的其他人那里拿取工作，并且想要验证提交是不是真正地来自于可信来源，Git 提供了几种通过 GPG 来签署和验证工作的方式。","n":"p","l":"\n"},{"a":[["class","chapter pcalibre1 pcalibre"],["title","GPG 介绍"]],"x":"\n","n":"section","l":"\n"},{"a":[["class","chapter pcalibre1 pcalibre"],["title","签署标签"]],"x":"\n","n":"section","l":"\n"},{"a":[["class","chapter pcalibre1 pcalibre"],["title","验证标签"]],"x":"\n","n":"section","l":"\n"},{"a":[["class","chapter pcalibre1 pcalibre"],["title","签署提交"]],"x":"\n","n":"section","l":"\n"},{"a":[["class","chapter pcalibre1 pcalibre"],["title","每个人必须签署"]],"x":"\n","n":"section","l":"\n"},{"a":[["class","pcalibre1 calibre7 pcalibre"],["id","_每个人必须签署"]],"x":"每个人必须签署","n":"h3","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"签署标签与提交很棒，但是如果决定在正常的工作流程中使用它，你必须确保团队中的每一个人都理解如何这样做。\n如果没有，你将会花费大量时间帮助其他人找出并用签名的版本重写提交。\n在采用签署成为标准工作流程的一部分前，确保你完全理解 GPG 及签署带来的好处。","n":"p","l":"\n"},{"a":[["class","pcalibre1 calibre7 pcalibre"],["id","r_signing_commits"]],"x":"签署提交","n":"h3","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"在最新版本的 Git 中（v1.7.9 及以上），也可以签署个人提交。\n如果相对于标签而言你对直接签署到提交更感兴趣的话，所有要做的只是增加一个 ","n":"p","l":"\n"},{"a":[["class","listing pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"n":"p","l":"\n"},{"a":[["class","listing pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"另外，也可以配置 ","n":"p","l":"\n"},{"a":[["class","listing pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"这里我们可以看到只有最后一次提交是签署并有效的，而之前的提交都不是。","n":"p","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"在 Git 1.8.3 及以后的版本中，“git merge” 与“git pull” 可以使用 ","n":"p","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"如果使用这个选项来合并一个包含未签名或有效的提交的分支时，合并不会生效。","n":"p","l":"\n"},{"a":[["class","listing pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"如果合并包含的只有有效的签名的提交，合并命令会提示所有的签名它已经检查过了然后会继续向前。","n":"p","l":"\n"},{"a":[["class","listing pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"也可以给 ","n":"p","l":"\n"},{"a":[["class","listing pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","source pcalibre1 pcalibre"]],"n":"pre","l":"\n"},{"a":[["class","calibre13 pcalibre1 pcalibre"]],"n":"code"},{"a":[["class","calibre14 pcalibre1 pcalibre"]],"n":"span"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git merge --verify-signatures -S  signed-branch\nCommit 13ad65e has a good GPG signature by Scott Chacon (Git signing key) <schacon@gmail.com>\n\nYou need a passphrase to unlock the secret key for\nuser: \"Scott Chacon (Git signing key) <schacon@gmail.com>\"\n2048-bit RSA key, ID 0A46826A, created 2014-06-04\n\nMerge made by the 'recursive' strategy.\n README | 2 ++\n 1 file changed, 2 insertions(+)"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"git merge","n":"code","l":" 命令附加 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"-S","n":"code","l":" 选项来签署自己生成的合并提交。\n下面的例子演示了验证将要合并的分支的每一个提交都是签名的并且签署最后生成的合并提交。"},{"a":[["class","source pcalibre1 pcalibre"]],"n":"pre","l":"\n"},{"a":[["class","calibre13 pcalibre1 pcalibre"]],"n":"code"},{"a":[["class","calibre14 pcalibre1 pcalibre"]],"n":"span"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git merge --verify-signatures signed-branch\nCommit 13ad65e has a good GPG signature by Scott Chacon (Git signing key) <schacon@gmail.com>\nUpdating 5c3386c..13ad65e\nFast-forward\n README | 2 ++\n 1 file changed, 2 insertions(+)"},{"a":[["class","source pcalibre1 pcalibre"]],"n":"pre","l":"\n"},{"a":[["class","calibre13 pcalibre1 pcalibre"]],"n":"code"},{"a":[["class","calibre14 pcalibre1 pcalibre"]],"n":"span"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git merge --verify-signatures non-verify\nfatal: Commit ab06180 does not have a GPG signature."},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"--verify-signatures","n":"code","l":" 选项来检查并拒绝没有携带可信 GPG 签名的提交。"},{"a":[["class","source pcalibre1 pcalibre"]],"n":"pre","l":"\n"},{"a":[["class","calibre13 pcalibre1 pcalibre"]],"n":"code"},{"a":[["class","calibre14 pcalibre1 pcalibre"]],"n":"span"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git log --pretty="},{"a":[["class","pcalibre1 pcalibre calibre17"]],"x":"\"format:%h %G? %aN  %s\"","n":"span","l":"\n\n5c3386c G Scott Chacon  signed commit\nca82a6d N Scott Chacon  changed the version number\n085bb3b N Scott Chacon  removed unnecessary test code\na11bef0 N Scott Chacon  first commit"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"git log","n":"code","l":" 来验证任何找到的签名并将它们以 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"%G?","n":"code","l":" 格式列在输出中。"},{"a":[["class","source pcalibre1 pcalibre"]],"n":"pre","l":"\n"},{"a":[["class","calibre13 pcalibre1 pcalibre"]],"n":"code"},{"a":[["class","calibre14 pcalibre1 pcalibre"]],"n":"span"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git log --show-signature -1\ncommit 5c3386cf54bba0a33a32da706aa52bc0155503c2\ngpg: Signature made Wed Jun  4 19:49:17 2014 PDT using RSA key ID 0A46826A\ngpg: Good signature from \"Scott Chacon (Git signing key) <schacon@gmail.com>\"\nAuthor: Scott Chacon <schacon@gmail.com>\nDate:   Wed Jun 4 19:49:17 2014 -0700\n\n    signed commit"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"git log","n":"code","l":" 也有一个 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"--show-signature","n":"code","l":" 选项来查看及验证这些签名。"},{"a":[["class","source pcalibre1 pcalibre"]],"n":"pre","l":"\n"},{"a":[["class","calibre13 pcalibre1 pcalibre"]],"n":"code"},{"a":[["class","calibre14 pcalibre1 pcalibre"]],"n":"span"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git commit -a -S -m "},{"a":[["class","pcalibre1 pcalibre calibre17"]],"x":"'signed commit'","n":"span","l":"\n\nYou need a passphrase to unlock the secret key for\nuser: \"Scott Chacon (Git signing key) <schacon@gmail.com>\"\n2048-bit RSA key, ID 0A46826A, created 2014-06-04\n\n[master 5c3386c] signed commit\n 4 files changed, 4 insertions(+), 24 deletions(-)\n rewrite Rakefile (100%)\n create mode 100644 lib/git.rb"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"-S","n":"code","l":" 到 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"git commit","n":"code","l":" 命令。"},{"a":[["class","pcalibre1 calibre7 pcalibre"],["id","_验证标签"]],"x":"验证标签","n":"h3","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"要验证一个签署的标签，可以运行 ","n":"p","l":"\n"},{"a":[["class","listing pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"如果没有签署者的公钥，那么你将会得到类似下面的东西：","n":"p","l":"\n"},{"a":[["class","listing pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","source pcalibre1 pcalibre"]],"n":"pre","l":"\n"},{"a":[["class","calibre13 pcalibre1 pcalibre"]],"n":"code"},{"a":[["class","calibre14 pcalibre1 pcalibre"]],"n":"span","l":"gpg: Signature made Wed Sep 13 02:08:25 2006 PDT using DSA key ID F3119B9A\ngpg: Can't check signature: public key not found\nerror: could not verify the tag 'v1.4.2.1'"},{"a":[["class","source pcalibre1 pcalibre"]],"n":"pre","l":"\n"},{"a":[["class","calibre13 pcalibre1 pcalibre"]],"n":"code"},{"a":[["class","calibre14 pcalibre1 pcalibre"]],"n":"span"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git tag -v v1.4.2.1\nobject 883653babd8ee7ea23e6a5c392bb739348b1eb61\ntype commit\ntag v1.4.2.1\ntagger Junio C Hamano <junkio@cox.net> 1158138501 -0700\n\nGIT 1.4.2.1\n\nMinor fixes since 1.4.2, including git-mv and git-http with alternates.\ngpg: Signature made Wed Sep 13 02:08:25 2006 PDT using DSA key ID F3119B9A\ngpg: Good signature from \"Junio C Hamano <junkio@cox.net>\"\ngpg:                 aka \"[jpeg image of size 1513]\"\nPrimary key fingerprint: 3565 2A26 2040 E066 C9A7  4A7D C0C6 D9A4 F311 9B9A"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"git tag -v [tag-name]","n":"code","l":"。\n这个命令使用 GPG 来验证签名。\n为了验证能正常工作，签署者的公钥需要在你的钥匙链中。"},{"a":[["class","pcalibre1 calibre7 pcalibre"],["id","_签署标签"]],"x":"签署标签","n":"h3","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"如果已经设置好一个 GPG 私钥，可以使用它来签署新的标签。\n所有需要做的只是使用 ","n":"p","l":"\n"},{"a":[["class","listing pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"如果在那个标签上运行 ","n":"p","l":"\n"},{"a":[["class","listing pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","source pcalibre1 pcalibre"]],"n":"pre","l":"\n"},{"a":[["class","calibre13 pcalibre1 pcalibre"]],"n":"code"},{"a":[["class","calibre14 pcalibre1 pcalibre"]],"n":"span"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git show v1.5\ntag v1.5\nTagger: Ben Straub <ben@straub.cc>\nDate:   Sat May 3 20:29:41 2014 -0700\n\nmy signed 1.5 tag\n-----BEGIN PGP SIGNATURE-----\nVersion: GnuPG v1\n\niQEcBAABAgAGBQJTZbQlAAoJEF0+sviABDDrZbQH/09PfE51KPVPlanr6q1v4/Ut\nLQxfojUWiLQdg2ESJItkcuweYg+kc3HCyFejeDIBw9dpXt00rY26p05qrpnG+85b\nhM1/PswpPLuBSr+oCIDj5GMC2r2iEKsfv2fJbNW8iWAXVLoWZRF8B0MfqX/YTMbm\necorc4iXzQu7tupRihslbNkfvfciMnSDeSvzCpWAHl7h8Wj6hhqePmLm9lAYqnKp\n8S5B/1SSQuEAjRZgI4IexpZoeKGVDptPHxLLS38fozsyi0QyDyzEgJxcJQVMXxVi\nRUysgqjcpT8+iQM1PblGfHR4XAhuOqN5Fx06PSaFZhqvWFezJ28/CLyX5q+oIVk=\n=EFTF\n-----END PGP SIGNATURE-----\n\ncommit ca82a6dff817ec66f44342007202690a93763949\nAuthor: Scott Chacon <schacon@gee-mail.com>\nDate:   Mon Mar 17 21:52:11 2008 -0700\n\n    changed the version number"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"git show","n":"code","l":"，会看到你的 GPG 签名附属在后面："},{"a":[["class","source pcalibre1 pcalibre"]],"n":"pre","l":"\n"},{"a":[["class","calibre13 pcalibre1 pcalibre"]],"n":"code"},{"a":[["class","calibre14 pcalibre1 pcalibre"]],"n":"span"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git tag -s v1.5 -m "},{"a":[["class","pcalibre1 pcalibre calibre17"]],"x":"'my signed 1.5 tag'","n":"span","l":"\n\nYou need a passphrase to unlock the secret key for\nuser: \"Ben Straub <ben@straub.cc>\"\n2048-bit RSA key, ID 800430EB, created 2014-05-04"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"-s","n":"code","l":" 代替 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"-a","n":"code","l":" 即可："},{"a":[["class","pcalibre1 calibre7 pcalibre"],["id","_gpg_介绍"]],"x":"GPG 介绍","n":"h3","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"首先，在开始签名之前你需要先配置 GPG 并安装个人密钥。","n":"p","l":"\n"},{"a":[["class","listing pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"如果你还没有安装一个密钥，可以使用 ","n":"p","l":"\n"},{"a":[["class","listing pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"一旦你有一个可以签署的私钥，可以通过设置 Git 的 ","n":"p","l":"\n"},{"a":[["class","listing pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"现在 Git 默认使用你的密钥来签署标签与提交。","n":"p","l":"\n"},{"a":[["class","source pcalibre1 pcalibre"]],"n":"pre","l":"\n"},{"a":[["class","calibre13 pcalibre1 pcalibre"]],"n":"code"},{"a":[["class","calibre14 pcalibre1 pcalibre"]],"n":"span","l":"git config --global user.signingkey 0A46826A"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"user.signingkey","n":"code","l":" 选项来签署。"},{"a":[["class","source pcalibre1 pcalibre"]],"n":"pre","l":"\n"},{"a":[["class","calibre13 pcalibre1 pcalibre"]],"n":"code"},{"a":[["class","calibre14 pcalibre1 pcalibre"]],"n":"span","l":"gpg --gen-key"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"gpg --gen-key","n":"code","l":" 生成一个。"},{"a":[["class","source pcalibre1 pcalibre"]],"n":"pre","l":"\n"},{"a":[["class","calibre13 pcalibre1 pcalibre"]],"n":"code"},{"a":[["class","calibre14 pcalibre1 pcalibre"]],"n":"span"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" gpg --list-keys\n/Users/schacon/.gnupg/pubring.gpg\n---------------------------------\npub   2048R/0A46826A 2014-06-04\nuid                  Scott Chacon (Git signing key) <schacon@gmail.com>\nsub   2048R/874529A9 2014-06-04"},{"a":[["class","calibre6 pcalibre1 pcalibre"],["id","r_git_stashing"]],"x":"储藏与清理","n":"h2","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"有时，当你在项目的一部分上已经工作一段时间后，所有东西都进入了混乱的状态，而这时你想要切换到另一个分支做一点别的事情。\n问题是，你不想仅仅因为过会儿回到这一点而为做了一半的工作创建一次提交。\n针对这个问题的答案是 ","n":"p","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"储藏会处理工作目录的脏的状态 - 即，修改的跟踪文件与暂存改动 - 然后将未完成的修改保存到一个栈上，而你可以在任何时候重新应用这些改动。","n":"p","l":"\n"},{"a":[["class","chapter pcalibre1 pcalibre"],["title","储藏工作"]],"x":"\n","n":"section","l":"\n"},{"a":[["class","chapter pcalibre1 pcalibre"],["title","创造性的储藏"]],"x":"\n","n":"section","l":"\n"},{"a":[["class","chapter pcalibre1 pcalibre"],["title","从储藏创建一个分支"]],"x":"\n","n":"section","l":"\n"},{"a":[["class","chapter pcalibre1 pcalibre"],["title","清理工作目录"]],"x":"\n","n":"section","l":"\n"},{"a":[["class","pcalibre1 calibre7 pcalibre"],["id","r_git_clean"]],"x":"清理工作目录","n":"h3","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"对于工作目录中一些工作或文件，你想做的也许不是储藏而是移除。\n","n":"p","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"有一些通用的原因比如说为了移除由合并或外部工具生成的东西，或是为了运行一个干净的构建而移除之前构建的残留。","n":"p","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"你需要谨慎地使用这个命令，因为它被设计为从工作目录中移除未被追踪的文件。\n如果你改变主意了，你也不一定能找回来那些文件的内容。\n一个更安全的选项是运行 ","n":"p","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"你可以使用`git clean`命令去除冗余文件或者清理工作目录。\n使用`git clean -f -d`命令来移除工作目录中所有未追踪的文件以及空的子目录。\n","n":"p","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"如果只是想要看看它会做什么，可以使用 ","n":"p","l":"\n"},{"a":[["class","listing pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"默认情况下，","n":"p","l":"\n"},{"a":[["class","listing pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"如果不知道 ","n":"p","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"这将会以交互模式运行 clean 命令。","n":"p","l":"\n"},{"a":[["class","listing pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"这种方式下可以分别地检查每一个文件或者交互地指定删除的模式。","n":"p","l":"\n"},{"a":[["class","source pcalibre1 pcalibre"]],"n":"pre","l":"\n"},{"a":[["class","calibre13 pcalibre1 pcalibre"]],"n":"code"},{"a":[["class","calibre14 pcalibre1 pcalibre"]],"n":"span"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git clean -x -i\nWould remove the following items:\n  build.TMP  test.o\n*** Commands ***\n    1: clean                2: filter by pattern    3: select by numbers    4: ask each             5: quit\n    6: help\nWhat now>"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"git clean","n":"code","l":" 命令将会做什么，在将 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"-n","n":"code","l":" 改为 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"-f","n":"code","l":" 来真正做之前总是先用 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"-n","n":"code","l":" 来运行它做双重检查。\n另一个小心处理过程的方式是使用 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"-i","n":"code","l":" 或 “interactive” 标记来运行它。"},{"a":[["class","source pcalibre1 pcalibre"]],"n":"pre","l":"\n"},{"a":[["class","calibre13 pcalibre1 pcalibre"]],"n":"code"},{"a":[["class","calibre14 pcalibre1 pcalibre"]],"n":"span"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git status -s\n M lib/simplegit.rb\n?? build.TMP\n?? tmp/\n\n"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git clean -n -d\nWould remove build.TMP\nWould remove tmp/\n\n"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git clean -n -d -x\nWould remove build.TMP\nWould remove test.o\nWould remove tmp/"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"git clean","n":"code","l":" 命令只会移除没有忽略的未跟踪文件。\n任何与 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":".gitiignore","n":"code","l":" 或其他忽略文件中的模式匹配的文件都不会被移除。\n如果你也想要移除那些文件，例如为了做一次完全干净的构建而移除所有由构建生成的 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":".o","n":"code","l":" 文件，可以给 clean 命令增加一个 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"-x","n":"code","l":" 选项。"},{"a":[["class","source pcalibre1 pcalibre"]],"n":"pre","l":"\n"},{"a":[["class","calibre13 pcalibre1 pcalibre"]],"n":"code"},{"a":[["class","calibre14 pcalibre1 pcalibre"]],"n":"span"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git clean -d -n\nWould remove test.o\nWould remove tmp/"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"-n","n":"code","l":" 选项来运行命令，这意味着 “做一次演习然后告诉你 "},{"a":[["class","pcalibre1 pcalibre calibre4"]],"x":"将要","n":"em","l":" 移除什么”。"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"-f","n":"code","l":" 意味着 "},{"a":[["class","pcalibre1 pcalibre calibre4"]],"x":"强制","n":"em","l":" 或 “确定移除”。"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"git stash --all","n":"code","l":" 来移除每一样东西并存放在栈中。"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"git clean","n":"code","l":" 命令会帮你做这些事。"},{"a":[["class","pcalibre1 calibre7 pcalibre"],["id","_从储藏创建一个分支"]],"x":"从储藏创建一个分支","n":"h3","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"如果储藏了一些工作，将它留在那儿了一会儿，然后继续在储藏的分支上工作，在重新应用工作时可能会有问题。\n如果应用尝试修改刚刚修改的文件，你会得到一个合并冲突并不得不解决它。\n如果想要一个轻松的方式来再次测试储藏的改动，可以运行 ","n":"p","l":"\n"},{"a":[["class","listing pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"这是在新分支轻松恢复储藏工作并继续工作的一个很不错的途径。","n":"p","l":"\n"},{"a":[["class","source pcalibre1 pcalibre"]],"n":"pre","l":"\n"},{"a":[["class","calibre13 pcalibre1 pcalibre"]],"n":"code"},{"a":[["class","calibre14 pcalibre1 pcalibre"]],"n":"span"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git stash branch testchanges\nSwitched to a new branch \"testchanges\"\n"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"#","n":"span","l":" On branch testchanges\n"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"#","n":"span","l":" Changes to be committed:\n"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"#","n":"span","l":"   (use "},{"a":[["class","pcalibre1 pcalibre calibre17"]],"x":"\"git reset HEAD <file>...\"","n":"span","l":" to unstage)\n"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"#","n":"span","l":"\n"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"#","n":"span","l":"      modified:   index.html\n"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"#","n":"span","l":"\n"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"#","n":"span","l":" Changed but not updated:\n"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"#","n":"span","l":"   (use "},{"a":[["class","pcalibre1 pcalibre calibre17"]],"x":"\"git add <file>...\"","n":"span","l":" to update what will be committed)\n"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"#","n":"span","l":"\n"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"#","n":"span","l":"      modified:   lib/simplegit.rb\n"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"#","n":"span","l":"\nDropped refs/stash@{0} (f0dfc4d5dc332d1cee34a634182e168c4efc3359)"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"git stash branch","n":"code","l":" 创建一个新分支，检出储藏工作时所在的提交，重新在那应用工作，然后在应用成功后扔掉储藏："},{"a":[["class","pcalibre1 calibre7 pcalibre"],["id","_创造性的储藏"]],"x":"创造性的储藏","n":"h3","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"有几个储藏的变种可能也很有用。\n第一个非常流行的选项是 ","n":"p","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"当你做了几个改动并只想提交其中的一部分，过一会儿再回来处理剩余改动时，这个功能会很有用。","n":"p","l":"\n"},{"a":[["class","listing pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"另一个经常使用储藏来做的事情是像储藏跟踪文件一样储藏未跟踪文件。\n默认情况下，","n":"p","l":"\n"},{"a":[["class","listing pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"最终，如果指定了 ","n":"p","l":"\n"},{"a":[["class","listing pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","source pcalibre1 pcalibre"]],"n":"pre","l":"\n"},{"a":[["class","calibre13 pcalibre1 pcalibre"]],"n":"code"},{"a":[["class","calibre14 pcalibre1 pcalibre"]],"n":"span"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git stash --patch\ndiff --git a/lib/simplegit.rb b/lib/simplegit.rb\nindex 66d332e..8bb5674 100644\n--- a/lib/simplegit.rb\n+++ b/lib/simplegit.rb\n@@ -16,6 +16,10 @@ class SimpleGit\n         return `#{git_cmd} 2>&1`.chomp\n       end\n     end\n+\n+    def show(treeish = 'master')\n+      command(\"git show #{treeish}\")\n+    end\n\n end\n test\nStash this hunk [y,n,q,a,d,/,e,?]? y\n\nSaved working directory and index state WIP on master: 1b65b17 added the index file"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"--patch","n":"code","l":" 标记，Git 不会储藏所有修改过的任何东西，但是会交互式地提示哪些改动想要储藏、哪些改动需要保存在工作目录中。"},{"a":[["class","source pcalibre1 pcalibre"]],"n":"pre","l":"\n"},{"a":[["class","calibre13 pcalibre1 pcalibre"]],"n":"code"},{"a":[["class","calibre14 pcalibre1 pcalibre"]],"n":"span"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git status -s\nM  index.html\n M lib/simplegit.rb\n?? new-file.txt\n\n"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git stash -u\nSaved working directory and index state WIP on master: 1b65b17 added the index file\nHEAD is now at 1b65b17 added the index file\n\n"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git status -s\n"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"git stash","n":"code","l":" 只会储藏已经在索引中的文件。\n如果指定 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"--include-untracked","n":"code","l":" 或 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"-u","n":"code","l":" 标记，Git 也会储藏任何创建的未跟踪文件。"},{"a":[["class","source pcalibre1 pcalibre"]],"n":"pre","l":"\n"},{"a":[["class","calibre13 pcalibre1 pcalibre"]],"n":"code"},{"a":[["class","calibre14 pcalibre1 pcalibre"]],"n":"span"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git status -s\nM  index.html\n M lib/simplegit.rb\n\n"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git stash --keep-index\nSaved working directory and index state WIP on master: 1b65b17 added the index file\nHEAD is now at 1b65b17 added the index file\n\n"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git status -s\nM  index.html"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"stash save","n":"code","l":" 命令的 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"--keep-index","n":"code","l":" 选项。\n它告诉 Git 不要储藏任何你通过 git add 命令已暂存的东西。"},{"a":[["class","pcalibre1 calibre7 pcalibre"],["id","_储藏工作"]],"x":"储藏工作","n":"h3","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"为了演示，进入项目并改动几个文件，然后可能暂存其中的一个改动。\n如果运行 ","n":"p","l":"\n"},{"a":[["class","listing pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"现在想要切换分支，但是还不想要提交之前的工作；所以储藏修改。\n将新的储藏推送到栈上，运行 ","n":"p","l":"\n"},{"a":[["class","listing pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"工作目录是干净的了：","n":"p","l":"\n"},{"a":[["class","listing pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"在这时，你能够轻易地切换分支并在其他地方工作；你的修改被存储在栈上。\n要查看储藏的东西，可以使用 ","n":"p","l":"\n"},{"a":[["class","listing pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"在本例中，有两个之前做的储藏，所以你接触到了三个不同的储藏工作。\n可以通过原来 stash 命令的帮助提示中的命令将你刚刚储藏的工作重新应用：","n":"p","l":"\n"},{"a":[["class","listing pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"可以看到 Git 重新修改了当你保存储藏时撤消的文件。\n在本例中，当尝试应用储藏时有一个干净的工作目录，并且尝试将它应用在保存它时所在的分支；但是有一个干净的工作目录与应用在同一分支并不是成功应用储藏的充分必要条件。\n可以在一个分支上保存一个储藏，切换到另一个分支，然后尝试重新应用这些修改。\n当应用储藏时工作目录中也可以有修改与未提交的文件 - 如果有任何东西不能干净地应用，Git 会产生合并冲突。","n":"p","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"文件的改动被重新应用了，但是之前暂存的文件却没有重新暂存。\n想要那样的话，必须使用 ","n":"p","l":"\n"},{"a":[["class","listing pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"应用选项只会尝试应用暂存的工作 - 在堆栈上还有它。\n可以运行 ","n":"p","l":"\n"},{"a":[["class","listing pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"也可以运行 ","n":"p","l":"\n"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"git stash pop","n":"code","l":" 来应用储藏然后立即从栈上扔掉它。"},{"a":[["class","source pcalibre1 pcalibre"]],"n":"pre","l":"\n"},{"a":[["class","calibre13 pcalibre1 pcalibre"]],"n":"code"},{"a":[["class","calibre14 pcalibre1 pcalibre"]],"n":"span"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git stash list\nstash@{0}: WIP on master: 049d078 added the index file\nstash@{1}: WIP on master: c264051 Revert \"added file_size\"\nstash@{2}: WIP on master: 21d80a5 added number to log\n"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git stash drop stash@{0}\nDropped stash@{0} (364e91f3f268f0900bc3ee613f9f733e82aaed43)"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"git stash drop","n":"code","l":" 加上将要移除的储藏的名字来移除它："},{"a":[["class","source pcalibre1 pcalibre"]],"n":"pre","l":"\n"},{"a":[["class","calibre13 pcalibre1 pcalibre"]],"n":"code"},{"a":[["class","calibre14 pcalibre1 pcalibre"]],"n":"span"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git stash apply --index\n"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"#","n":"span","l":" On branch master\n"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"#","n":"span","l":" Changes to be committed:\n"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"#","n":"span","l":"   (use "},{"a":[["class","pcalibre1 pcalibre calibre17"]],"x":"\"git reset HEAD <file>...\"","n":"span","l":" to unstage)\n"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"#","n":"span","l":"\n"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"#","n":"span","l":"      modified:   index.html\n"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"#","n":"span","l":"\n"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"#","n":"span","l":" Changed but not updated:\n"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"#","n":"span","l":"   (use "},{"a":[["class","pcalibre1 pcalibre calibre17"]],"x":"\"git add <file>...\"","n":"span","l":" to update what will be committed)\n"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"#","n":"span","l":"\n"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"#","n":"span","l":"      modified:   lib/simplegit.rb\n"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"#","n":"span"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"--index","n":"code","l":" 选项来运行 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"git stash apply","n":"code","l":" 命令，来尝试重新应用暂存的修改。\n如果已经那样做了，那么你将回到原来的位置："},{"a":[["class","source pcalibre1 pcalibre"]],"n":"pre","l":"\n"},{"a":[["class","calibre13 pcalibre1 pcalibre"]],"n":"code"},{"a":[["class","calibre14 pcalibre1 pcalibre"]],"n":"span"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git stash apply\n"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"#","n":"span","l":" On branch master\n"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"#","n":"span","l":" Changed but not updated:\n"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"#","n":"span","l":"   (use "},{"a":[["class","pcalibre1 pcalibre calibre17"]],"x":"\"git add <file>...\"","n":"span","l":" to update what will be committed)\n"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"#","n":"span","l":"\n"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"#","n":"span","l":"      modified:   index.html\n"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"#","n":"span","l":"      modified:   lib/simplegit.rb\n"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"#","n":"span"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"git stash apply","n":"code","l":"。\n如果想要应用其中一个更旧的储藏，可以通过名字指定它，像这样："},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"git stash apply stash@{2}","n":"code","l":"。\n如果不指定一个储藏，Git 认为指定的是最近的储藏："},{"a":[["class","source pcalibre1 pcalibre"]],"n":"pre","l":"\n"},{"a":[["class","calibre13 pcalibre1 pcalibre"]],"n":"code"},{"a":[["class","calibre14 pcalibre1 pcalibre"]],"n":"span"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git stash list\nstash@{0}: WIP on master: 049d078 added the index file\nstash@{1}: WIP on master: c264051 Revert \"added file_size\"\nstash@{2}: WIP on master: 21d80a5 added number to log"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"git stash list","n":"code","l":"："},{"a":[["class","source pcalibre1 pcalibre"]],"n":"pre","l":"\n"},{"a":[["class","calibre13 pcalibre1 pcalibre"]],"n":"code"},{"a":[["class","calibre14 pcalibre1 pcalibre"]],"n":"span"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git status\n"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"#","n":"span","l":" On branch master\nnothing to commit, working directory clean"},{"a":[["class","source pcalibre1 pcalibre"]],"n":"pre","l":"\n"},{"a":[["class","calibre13 pcalibre1 pcalibre"]],"n":"code"},{"a":[["class","calibre14 pcalibre1 pcalibre"]],"n":"span"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git stash\nSaved working directory and index state \\\n  \"WIP on master: 049d078 added the index file\"\nHEAD is now at 049d078 added the index file\n(To restore them type \"git stash apply\")"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"git stash","n":"code","l":" 或 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"git stash save","n":"code","l":"："},{"a":[["class","source pcalibre1 pcalibre"]],"n":"pre","l":"\n"},{"a":[["class","calibre13 pcalibre1 pcalibre"]],"n":"code"},{"a":[["class","calibre14 pcalibre1 pcalibre"]],"n":"span"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git status\nChanges to be committed:\n  (use \"git reset HEAD <file>...\" to unstage)\n\n\tmodified:   index.html\n\nChanges not staged for commit:\n  (use \"git add <file>...\" to update what will be committed)\n  (use \"git checkout -- <file>...\" to discard changes in working directory)\n\n\tmodified:   lib/simplegit.rb"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"git status","n":"code","l":"，可以看到有改动的状态："},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"git stash","n":"code","l":" 命令。"},{"a":[["class","calibre6 pcalibre1 pcalibre"],["id","r_interactive_staging"]],"x":"交互式暂存","n":"h2","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"Git 自带的一些脚本可以使在命令行下工作更容易。\n本节的几个交互命令可以帮助你将文件的特定部分组合成提交。\n当你修改一组文件后，希望这些改动能放到若干提交而不是混杂在一起成为一个提交时，这几个工具会非常有用。\n通过这种方式，可以确保提交是逻辑上独立的变更集，同时也会使其他开发者在与你工作时很容易地审核。\n如果运行 ","n":"p","l":"\n"},{"a":[["class","listing pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"可以看到这个命令以非常不同的视图显示了暂存区 - 基本上与 ","n":"p","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"在这块区域后是命令区域。\n在这里你可以做一些工作，包括暂存文件、取消暂存文件、暂存文件的一部分、添加未被追踪的文件、查看暂存内容的区别。","n":"p","l":"\n"},{"a":[["class","chapter pcalibre1 pcalibre"],["title","暂存与取消暂存文件"]],"x":"\n","n":"section","l":"\n"},{"a":[["class","chapter pcalibre1 pcalibre"],["title","暂存补丁"]],"x":"\n","n":"section","l":"\n"},{"a":[["class","pcalibre1 calibre7 pcalibre"],["id","_暂存补丁"]],"x":"暂存补丁","n":"h3","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"Git 也可以暂存文件的特定部分。\n例如，如果在 simplegit.rb 文件中做了两处修改，但只想要暂存其中的一个而不是另一个，Git 会帮你轻松地完成。\n从交互式提示符中，输入 ","n":"p","l":"\n"},{"a":[["class","listing pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"这时有很多选项。\n输入 ","n":"p","l":"\n"},{"a":[["class","listing pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"通常情况下可以输入 y 或 n 来选择是否要暂存每一个区块，当然，暂存特定文件中的所有部分或为之后的选择跳过一个区块也是非常有用的。\n如果你只暂存文件的一部分，状态输出可能会像下面这样：","n":"p","l":"\n"},{"a":[["class","listing pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"simplegit.rb 文件的状态很有趣。\n它显示出若干行被暂存与若干行未被暂存。\n已经部分地暂存了这个文件。\n在这时，可以退出交互式添加脚本并且运行 ","n":"p","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"也可以不必在交互式添加模式中做部分文件暂存 - 可以在命令行中使用 ","n":"p","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"更进一步地，可以使用 ","n":"p","l":"\n"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"reset --patch","n":"code","l":" 命令的补丁模式来部分重置文件，通过 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"checkout --patch","n":"code","l":" 命令来部分检出文件与 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"stash save --patch","n":"code","l":" 命令来部分暂存文件。\n我们将会在接触这些命令的高级使用方法时了解更多详细信息。"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"git add -p","n":"code","l":" 或 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"git add --patch","n":"code","l":" 来启动同样的脚本。"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"git commit","n":"code","l":" 来提交部分暂存的文件。"},{"a":[["class","source pcalibre1 pcalibre"]],"n":"pre","l":"\n"},{"a":[["class","calibre13 pcalibre1 pcalibre"]],"n":"code"},{"a":[["class","calibre14 pcalibre1 pcalibre"]],"n":"span","l":"What now> 1\n           staged     unstaged path\n  1:    unchanged        +0/-1 TODO\n  2:        +1/-1      nothing index.html\n  3:        +1/-1        +4/-0 lib/simplegit.rb"},{"a":[["class","source pcalibre1 pcalibre"]],"n":"pre","l":"\n"},{"a":[["class","calibre13 pcalibre1 pcalibre"]],"n":"code"},{"a":[["class","calibre14 pcalibre1 pcalibre"]],"n":"span","l":"Stage this hunk [y,n,a,d,/,j,J,g,e,?]? ?\ny - stage this hunk\nn - do not stage this hunk\na - stage this and all the remaining hunks in the file\nd - do not stage this hunk nor any of the remaining hunks in the file\ng - select a hunk to go to\n/ - search for a hunk matching the given regex\nj - leave this hunk undecided, see next undecided hunk\nJ - leave this hunk undecided, see next hunk\nk - leave this hunk undecided, see previous undecided hunk\nK - leave this hunk undecided, see previous hunk\ns - split the current hunk into smaller hunks\ne - manually edit the current hunk\n? - print help"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"?","n":"code","l":" 显示所有可以使用的命令列表："},{"a":[["class","source pcalibre1 pcalibre"]],"n":"pre","l":"\n"},{"a":[["class","calibre13 pcalibre1 pcalibre"]],"n":"code"},{"a":[["class","calibre14 pcalibre1 pcalibre"]],"n":"span","l":"diff --git a/lib/simplegit.rb b/lib/simplegit.rb\nindex dd5ecc4..57399e0 100644\n--- a/lib/simplegit.rb\n+++ b/lib/simplegit.rb\n@@ -22,7 +22,7 @@ class SimpleGit\n   end\n\n   def log(treeish = 'master')\n-    command(\"git log -n 25 #{treeish}\")\n+    command(\"git log -n 30 #{treeish}\")\n   end\n\n   def blame(path)\nStage this hunk [y,n,a,d,/,j,J,g,e,?]?"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"5","n":"code","l":" 或 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"p","n":"code","l":"（补丁）。\nGit 会询问你想要部分暂存哪些文件；然后，对已选择文件的每一个部分，它都会一个个地显示文件区别并询问你是否想要暂存它们："},{"a":[["class","pcalibre1 calibre7 pcalibre"],["id","_暂存与取消暂存文件"]],"x":"暂存与取消暂存文件","n":"h3","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"如果在 ","n":"p","l":"\n"},{"a":[["class","listing pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"要暂存 TODO 与 index.html 文件，可以输入数字：","n":"p","l":"\n"},{"a":[["class","listing pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"每个文件前面的 ","n":"p","l":"\n"},{"a":[["class","listing pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"现在可以看到 TODO 与 index.html 文件已经被暂存而 simplegit.rb 文件还未被暂存。\n如果这时想要取消暂存 TODO 文件，使用 ","n":"p","l":"\n"},{"a":[["class","listing pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"再次查看 Git 状态，可以看到已经取消暂存 TODO 文件：","n":"p","l":"\n"},{"a":[["class","listing pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"如果想要查看已暂存内容的区别，可以使用 ","n":"p","l":"\n"},{"a":[["class","listing pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"通过这些基本命令，可以使用交互式添加模式来轻松地处理暂存区。","n":"p","l":"\n"},{"a":[["class","source pcalibre1 pcalibre"]],"n":"pre","l":"\n"},{"a":[["class","calibre13 pcalibre1 pcalibre"]],"n":"code"},{"a":[["class","calibre14 pcalibre1 pcalibre"]],"n":"span","l":"*** Commands ***\n  1: status     2: update      3: revert     4: add untracked\n  5: patch      6: diff        7: quit       8: help\nWhat now> 6\n           staged     unstaged path\n  1:        +1/-1      nothing index.html\nReview diff>> 1\ndiff --git a/index.html b/index.html\nindex 4d07108..4335f49 100644\n--- a/index.html\n+++ b/index.html\n@@ -16,7 +16,7 @@ Date Finder\n\n <p id=\"out\">...</p>\n\n-<div id=\"footer\">contact : support@github.com</div>\n+<div id=\"footer\">contact : email.support@github.com</div>\n\n <script type=\"text/javascript\">"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"6","n":"code","l":" 或 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"d","n":"code","l":"（区别）命令。\n它会显示暂存文件的一个列表，可以从中选择想要查看的暂存区别。\n这跟你在命令行指定 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"git diff --cached","n":"code","l":" 非常相似："},{"a":[["class","source pcalibre1 pcalibre"]],"n":"pre","l":"\n"},{"a":[["class","calibre13 pcalibre1 pcalibre"]],"n":"code"},{"a":[["class","calibre14 pcalibre1 pcalibre"]],"n":"span","l":"*** Commands ***\n  1: status     2: update      3: revert     4: add untracked\n  5: patch      6: diff        7: quit       8: help\nWhat now> 1\n           staged     unstaged path\n  1:    unchanged        +0/-1 TODO\n  2:        +1/-1      nothing index.html\n  3:    unchanged        +5/-1 lib/simplegit.rb"},{"a":[["class","source pcalibre1 pcalibre"]],"n":"pre","l":"\n"},{"a":[["class","calibre13 pcalibre1 pcalibre"]],"n":"code"},{"a":[["class","calibre14 pcalibre1 pcalibre"]],"n":"span","l":"*** Commands ***\n  1: status     2: update      3: revert     4: add untracked\n  5: patch      6: diff        7: quit       8: help\nWhat now> 3\n           staged     unstaged path\n  1:        +0/-1      nothing TODO\n  2:        +1/-1      nothing index.html\n  3:    unchanged        +5/-1 lib/simplegit.rb\nRevert>> 1\n           staged     unstaged path\n* 1:        +0/-1      nothing TODO\n  2:        +1/-1      nothing index.html\n  3:    unchanged        +5/-1 lib/simplegit.rb\nRevert>> [enter]\nreverted one path"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"3","n":"code","l":" 或 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"r","n":"code","l":"（撤消）选项："},{"a":[["class","source pcalibre1 pcalibre"]],"n":"pre","l":"\n"},{"a":[["class","calibre13 pcalibre1 pcalibre"]],"n":"code"},{"a":[["class","calibre14 pcalibre1 pcalibre"]],"n":"span","l":"Update>>\nupdated 2 paths\n\n*** Commands ***\n  1: status     2: update      3: revert     4: add untracked\n  5: patch      6: diff        7: quit       8: help\nWhat now> 1\n           staged     unstaged path\n  1:        +0/-1      nothing TODO\n  2:        +1/-1      nothing index.html\n  3:    unchanged        +5/-1 lib/simplegit.rb"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"*","n":"code","l":" 意味着选中的文件将会被暂存。\n如果在 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"Update>>","n":"code","l":" 提示符后不输入任何东西并直接按回车，Git 将会暂存之前选择的文件："},{"a":[["class","source pcalibre1 pcalibre"]],"n":"pre","l":"\n"},{"a":[["class","calibre13 pcalibre1 pcalibre"]],"n":"code"},{"a":[["class","calibre14 pcalibre1 pcalibre"]],"n":"span","l":"Update>> 1,2\n           staged     unstaged path\n* 1:    unchanged        +0/-1 TODO\n* 2:    unchanged        +1/-1 index.html\n  3:    unchanged        +5/-1 lib/simplegit.rb\nUpdate>>"},{"a":[["class","source pcalibre1 pcalibre"]],"n":"pre","l":"\n"},{"a":[["class","calibre13 pcalibre1 pcalibre"]],"n":"code"},{"a":[["class","calibre14 pcalibre1 pcalibre"]],"n":"span","l":"What now> 2\n           staged     unstaged path\n  1:    unchanged        +0/-1 TODO\n  2:    unchanged        +1/-1 index.html\n  3:    unchanged        +5/-1 lib/simplegit.rb\nUpdate>>"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"What now>","n":"code","l":" 提示符后键入 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"2","n":"code","l":" 或 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"u","n":"code","l":"，脚本将会提示想要暂存哪个文件："},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"git status","n":"code","l":" 是相同的信息，但是更简明扼要一些。\n它将暂存的修改列在左侧，未暂存的修改列在右侧。"},{"a":[["class","source pcalibre1 pcalibre"]],"n":"pre","l":"\n"},{"a":[["class","calibre13 pcalibre1 pcalibre"]],"n":"code"},{"a":[["class","calibre14 pcalibre1 pcalibre"]],"n":"span"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git add -i\n           staged     unstaged path\n  1:    unchanged        +0/-1 TODO\n  2:    unchanged        +1/-1 index.html\n  3:    unchanged        +5/-1 lib/simplegit.rb\n\n*** Commands ***\n  1: status     2: update      3: revert     4: add untracked\n  5: patch      6: diff        7: quit       8: help\nWhat now>"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"git add","n":"code","l":" 时使用 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"-i","n":"code","l":" 或者 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"--interactive","n":"code","l":" 选项，Git 将会进入一个交互式终端模式，显示类似下面的东西："},{"a":[["class","calibre6 pcalibre1 pcalibre"],["id","r_revision_selection"]],"x":"选择修订版本","n":"h2","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"Git 允许你通过几种方法来指明特定的或者一定范围内的提交。\n了解它们并不是必需的，但是了解一下总没坏处。","n":"p","l":"\n"},{"a":[["class","chapter pcalibre1 pcalibre"],["title","单个修订版本"]],"x":"\n","n":"section","l":"\n"},{"a":[["class","chapter pcalibre1 pcalibre"],["title","简短的 SHA-1"]],"x":"\n","n":"section","l":"\n"},{"a":[["class","chapter pcalibre1 pcalibre"],["title","分支引用"]],"x":"\n","n":"section","l":"\n"},{"a":[["class","chapter pcalibre1 pcalibre"],["title","引用日志"]],"x":"\n","n":"section","l":"\n"},{"a":[["class","chapter pcalibre1 pcalibre"],["title","祖先引用"]],"x":"\n","n":"section","l":"\n"},{"a":[["class","chapter pcalibre1 pcalibre"],["title","提交区间"]],"x":"\n","n":"section","l":"\n"},{"a":[["class","pcalibre1 calibre7 pcalibre"],["id","r_commit_ranges"]],"x":"提交区间","n":"h3","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"你已经学会如何单次的提交，现在来看看如何指明一定区间的提交。\n当你有很多分支时，这对管理你的分支时十分有用，你可以用提交区间来解决 “这个分支还有哪些提交尚未合并到主分支？” 的问题","n":"p","l":"\n"},{"a":[["class","chapter pcalibre1 pcalibre"],["title","双点"]],"x":"\n","n":"section","l":"\n"},{"a":[["class","chapter pcalibre1 pcalibre"],["title","多点"]],"x":"\n","n":"section","l":"\n"},{"a":[["class","chapter pcalibre1 pcalibre"],["title","三点"]],"x":"\n","n":"section","l":"\n"},{"a":[["class","calibre29 pcalibre1 pcalibre"],["id","r_triple_dot"]],"x":"三点","n":"h4","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"最后一种主要的区间选择语法是三点，这个语法可以选择出被两个引用中的一个包含但又不被两者同时包含的提交。\n再看看之前双点例子中的提交历史。\n如果你想看 ","n":"p","l":"\n"},{"a":[["class","listing pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"这和通常 ","n":"p","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"这种情形下，","n":"p","l":"\n"},{"a":[["class","listing pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"有了这些工具，你就可以十分方便地查看你 Git 仓库中的提交。","n":"p","l":"\n"},{"a":[["class","source pcalibre1 pcalibre"]],"n":"pre","l":"\n"},{"a":[["class","calibre13 pcalibre1 pcalibre"]],"n":"code"},{"a":[["class","calibre14 pcalibre1 pcalibre"]],"n":"span"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git log --left-right master...experiment\n< F\n< E\n"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":">","n":"span","l":" D\n"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":">","n":"span","l":" C"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"log","n":"code","l":" 命令的一个常用参数是 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"--left-right","n":"code","l":"，它会显示每个提交到底处于哪一侧的分支。\n这会让输出数据更加清晰。"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"log","n":"code","l":" 按日期排序的输出一样，仅仅给出了4个提交的信息。"},{"a":[["class","source pcalibre1 pcalibre"]],"n":"pre","l":"\n"},{"a":[["class","calibre13 pcalibre1 pcalibre"]],"n":"code"},{"a":[["class","calibre14 pcalibre1 pcalibre"]],"n":"span"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git log master...experiment\nF\nE\nD\nC"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"master","n":"code","l":" 或者 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"experiment","n":"code","l":" 中包含的但不是两者共有的提交，你可以执行"},{"a":[["class","calibre29 pcalibre1 pcalibre"],["id","_多点"]],"x":"多点","n":"h4","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"双点语法很好用，但有时候你可能需要两个以上的分支才能确定你所需要的修订，比如查看哪些提交是被包含在某些分支中的一个，但是不在你当前的分支上。\nGit 允许你在任意引用前加上 ","n":"p","l":"\n"},{"a":[["class","listing pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"这个语法很好用，因为你可以在查询中指定超过两个的引用，这是双点语法无法实现的。\n比如，你想查看所有被 ","n":"p","l":"\n"},{"a":[["class","listing pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"这就构成了一个十分强大的修订查询系统，你可以通过它来查看你的分支里包含了哪些东西。","n":"p","l":"\n"},{"a":[["class","source pcalibre1 pcalibre"]],"n":"pre","l":"\n"},{"a":[["class","calibre13 pcalibre1 pcalibre"]],"n":"code"},{"a":[["class","calibre14 pcalibre1 pcalibre"]],"n":"span"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git log refA refB ^refC\n"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git log refA refB --not refC"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"refA","n":"code","l":" 或 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"refB","n":"code","l":" 包含的但是不被 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"refC","n":"code","l":" 包含的提交，你可以输入下面中的任意一个命令"},{"a":[["class","source pcalibre1 pcalibre"]],"n":"pre","l":"\n"},{"a":[["class","calibre13 pcalibre1 pcalibre"]],"n":"code"},{"a":[["class","calibre14 pcalibre1 pcalibre"]],"n":"span"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git log refA..refB\n"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git log ^refA refB\n"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git log refB --not refA"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"^","n":"code","l":" 字符或者 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"--not","n":"code","l":" 来指明你不希望提交被包含其中的分支。\n因此下列3个命令是等价的："},{"a":[["class","calibre29 pcalibre1 pcalibre"],["id","_双点"]],"x":"双点","n":"h4","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"最常用的指明提交区间语法是双点。\n这种语法可以让 Git 选出在一个分支中而不在另一个分支中的提交。\n例如，你有如下的提交历史 ","n":"p","l":"\n"},{"a":[["class","image pcalibre1 pcalibre"],["id","rdouble_dot"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"你想要查看 experiment 分支中还有哪些提交尚未被合并入 master 分支。\n你可以使用 ","n":"p","l":"\n"},{"a":[["class","listing pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"反过来，如果你想查看在 ","n":"p","l":"\n"},{"a":[["class","listing pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"这可以让你保持 ","n":"p","l":"\n"},{"a":[["class","listing pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"这个命令会输出在你当前分支中而不在远程 ","n":"p","l":"\n"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"origin","n":"code","l":" 中的提交。\n如果你执行了 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"git push","n":"code","l":" 并且你的当前分支正在跟踪 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"origin/master","n":"code","l":"，"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"git log origin/master..HEAD","n":"code","l":" 所输出的提交将会被传输到远端服务器。\n如果你留空了其中的一边， Git 会默认为 HEAD。\n例如， "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"git log origin/master..","n":"code","l":" 将会输出与之前例子相同的结果 —— Git 使用 HEAD 来代替留空的一边。"},{"a":[["class","source pcalibre1 pcalibre"]],"n":"pre","l":"\n"},{"a":[["class","calibre13 pcalibre1 pcalibre"]],"n":"code"},{"a":[["class","calibre14 pcalibre1 pcalibre"]],"n":"span"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git log origin/master..HEAD"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"experiment","n":"code","l":" 分支跟随最新的进度以及查看你即将合并的内容。\n另一个常用的场景是查看你即将推送到远端的内容："},{"a":[["class","source pcalibre1 pcalibre"]],"n":"pre","l":"\n"},{"a":[["class","calibre13 pcalibre1 pcalibre"]],"n":"code"},{"a":[["class","calibre14 pcalibre1 pcalibre"]],"n":"span"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git log experiment..master\nF\nE"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"master","n":"code","l":" 分支中而不在 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"experiment","n":"code","l":" 分支中的提交，你只要交换分支名即可。\n"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"experiment..master","n":"code","l":" 会显示在 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"master","n":"code","l":" 分支中而不在 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"experiment","n":"code","l":" 分支中的提交："},{"a":[["class","source pcalibre1 pcalibre"]],"n":"pre","l":"\n"},{"a":[["class","calibre13 pcalibre1 pcalibre"]],"n":"code"},{"a":[["class","calibre14 pcalibre1 pcalibre"]],"n":"span"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git log master..experiment\nD\nC"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"master..experiment","n":"code","l":" 来让 Git 显示这些提交。也就是 “在 experiment 分支中而不在 master 分支中的提交”。\n为了使例子简单明了，我使用了示意图中提交对象的字母来代替真实日志的输出，所以会显示："},{"a":[["class","content pcalibre1 pcalibre"]],"x":"\n","n":"div","l":"\n"},{"a":[["class","calibre9 pcalibre1 pcalibre"]],"x":"Figure 1. Example history for range selection.","n":"figcaption","l":"\n"},{"a":[["alt","Example history for range selection."],["class","calibre8 pcalibre1 pcalibre"],["src","ezPJKgrMLI5iYpd7vlZT7E|aW1hZ2VzLzAwMTAyLmpwZWc=|"],["data-calibre-src","images/00102.jpeg"]],"n":"img","l":"\n"},{"a":[["class","link pcalibre5 pcalibre4 pcalibre3 pcalibre2 pcalibre1 pcalibre"],["href","javascript:void(0)"],["id","xref-rdouble_dot"],["data-ezPJKgrMLI5iYpd7vlZT7E","{\"frag\": \"rdouble_dot\", \"name\": \"text/part0012.html\"}"]],"x":"Example history for range selection.","n":"a"},{"a":[["class","pcalibre1 calibre7 pcalibre"],["id","_祖先引用"]],"x":"祖先引用","n":"h3","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"祖先引用是另一种指明一个提交的方式。\n如果你在引用的尾部加上一个 ","n":"p","l":"\n"},{"a":[["class","listing pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"你可以使用 ","n":"p","l":"\n"},{"a":[["class","listing pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"你也可以在 ","n":"p","l":"\n"},{"a":[["class","listing pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"另一种指明祖先提交的方法是 ","n":"p","l":"\n"},{"a":[["class","listing pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"也可以写成 ","n":"p","l":"\n"},{"a":[["class","listing pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"你也可以组合使用这两个语法 —— 你可以通过 ","n":"p","l":"\n"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"HEAD~3^2","n":"code","l":" 来取得之前引用的第二父提交（假设它是一个合并提交）。"},{"a":[["class","source pcalibre1 pcalibre"]],"n":"pre","l":"\n"},{"a":[["class","calibre13 pcalibre1 pcalibre"]],"n":"code"},{"a":[["class","calibre14 pcalibre1 pcalibre"]],"n":"span"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git show HEAD^^^\ncommit 1c3618887afb5fbcbea25b7c013f4e2114448b8d\nAuthor: Tom Preston-Werner <tom@mojombo.com>\nDate:   Fri Nov 7 13:47:59 2008 -0500\n\n    ignore *.gem"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"HEAD^^^","n":"code","l":"，也是第一父提交的第一父提交的第一父提交："},{"a":[["class","source pcalibre1 pcalibre"]],"n":"pre","l":"\n"},{"a":[["class","calibre13 pcalibre1 pcalibre"]],"n":"code"},{"a":[["class","calibre14 pcalibre1 pcalibre"]],"n":"span"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git show HEAD~3\ncommit 1c3618887afb5fbcbea25b7c013f4e2114448b8d\nAuthor: Tom Preston-Werner <tom@mojombo.com>\nDate:   Fri Nov 7 13:47:59 2008 -0500\n\n    ignore *.gem"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"~","n":"code","l":"。\n同样是指向第一父提交，因此 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"HEAD~","n":"code","l":" 和 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"HEAD^","n":"code","l":" 是等价的。\n而区别在于你在后面加数字的时候。\n"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"HEAD~2","n":"code","l":" 代表 “第一父提交的第一父提交”，也就是 “祖父提交” —— Git 会根据你指定的次数获取对应的第一父提交。\n例如，在之前的列出的提交历史中，"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"HEAD~3","n":"code","l":" 就是"},{"a":[["class","source pcalibre1 pcalibre"]],"n":"pre","l":"\n"},{"a":[["class","calibre13 pcalibre1 pcalibre"]],"n":"code"},{"a":[["class","calibre14 pcalibre1 pcalibre"]],"n":"span"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git show d921970^\ncommit 1c002dd4b536e7479fe34593e72e6c6c1819e53b\nAuthor: Scott Chacon <schacon@gmail.com>\nDate:   Thu Dec 11 14:58:32 2008 -0800\n\n    added some blame and merge stuff\n\n"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git show d921970^2\ncommit 35cfb2b795a55793d7cc56a6cc2060b4bb732548\nAuthor: Paul Hedderly <paul+git@mjr.org>\nDate:   Wed Dec 10 22:22:03 2008 +0000\n\n    Some rdoc changes"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"^","n":"code","l":" 后面添加一个数字——例如 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"d921970^2","n":"code","l":" 代表 “d921970 的第二父提交”\n这个语法只适用于合并(merge)的提交，因为合并提交会有多个父提交。\n第一父提交是你合并时所在分支，而第二父提交是你所合并的分支："},{"a":[["class","source pcalibre1 pcalibre"]],"n":"pre","l":"\n"},{"a":[["class","calibre13 pcalibre1 pcalibre"]],"n":"code"},{"a":[["class","calibre14 pcalibre1 pcalibre"]],"n":"span"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git show HEAD^\ncommit d921970aadf03b3cf0e71becdaab3147ba71cdef\nMerge: 1c002dd... 35cfb2b...\nAuthor: Scott Chacon <schacon@gmail.com>\nDate:   Thu Dec 11 15:08:43 2008 -0800\n\n    Merge commit 'phedders/rdocs'"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"HEAD^","n":"code","l":" 来查看上一个提交，也就是 “HEAD 的父提交”："},{"a":[["class","source pcalibre1 pcalibre"]],"n":"pre","l":"\n"},{"a":[["class","calibre13 pcalibre1 pcalibre"]],"n":"code"},{"a":[["class","calibre14 pcalibre1 pcalibre"]],"n":"span"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git log --pretty=format:"},{"a":[["class","pcalibre1 pcalibre calibre17"]],"x":"'%h %s'","n":"span","l":" --graph\n* 734713b fixed refs handling, added gc auto, updated tests\n*   d921970 Merge commit 'phedders/rdocs'\n|\\\n| * 35cfb2b Some rdoc changes\n* | 1c002dd added some blame and merge stuff\n|/\n* 1c36188 ignore *.gem\n* 9b29157 add open3_detach to gemspec file list"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"^","n":"code","l":"， Git 会将其解析为该引用的上一个提交。\n假设你的提交历史是："},{"a":[["class","pcalibre1 calibre7 pcalibre"],["id","r_git_reflog"]],"x":"引用日志","n":"h3","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"当你在工作时， Git 会在后台保存一个引用日志(reflog)，引用日志记录了最近几个月你的 HEAD 和分支引用所指向的历史。","n":"p","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"你可以使用 ","n":"p","l":"\n"},{"a":[["class","listing pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"每当你的 HEAD 所指向的位置发生了变化，Git 就会将这个信息存储到引用日志这个历史记录里。\n通过这些数据，你可以很方便地获取之前的提交历史。\n如果你想查看仓库中 HEAD 在五次前的所指向的提交，你可以使用 ","n":"p","l":"\n"},{"a":[["class","listing pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"你同样可以使用这个语法来查看某个分支在一定时间前的位置。\n例如，查看你的 ","n":"p","l":"\n"},{"a":[["class","listing pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"就会显示昨天该分支的顶端指向了哪个提交。\n这个方法只对还在你引用日志里的数据有用，所以不能用来查好几个月之前的提交。","n":"p","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"可以运行 ","n":"p","l":"\n"},{"a":[["class","listing pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"值得注意的是，引用日志只存在于本地仓库，一个记录你在你自己的仓库里做过什么的日志。\n其他人拷贝的仓库里的引用日志不会和你的相同；而你新克隆一个仓库的时候，引用日志是空的，因为你在仓库里还没有操作。\n","n":"p","l":"\n"},{"a":[["class","pcalibre10 pcalibre1 admonition2"],["title","Tip: 将引用日志想作 Git 版的 shell 历史记录"],["type","help"]],"x":"\n","n":"aside","l":"\n"},{"a":[["class","calibre18 pcalibre1 pcalibre"]],"x":"将引用日志想作 Git 版的 shell 历史记录","n":"h2","l":"\n"},{"a":[["class","content3 pcalibre1 pcalibre"]],"x":"\n","n":"div","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"如果你有 UNIX 或者 Linux 的背景，你不妨将引用日志想作 Git 版的 shell 历史记录，重点在于仅与你和你的会话相关，而与他人无关。","n":"p","l":"\n"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"git show HEAD@{2.months.ago}","n":"code","l":" 这条命令只有在你克隆了一个项目至少两个月时才会有用——如果你是五分钟前克隆的仓库，那么它将不会有结果返回。"},{"a":[["class","source pcalibre1 pcalibre"]],"n":"pre","l":"\n"},{"a":[["class","calibre13 pcalibre1 pcalibre"]],"n":"code"},{"a":[["class","calibre14 pcalibre1 pcalibre"]],"n":"span"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git log -g master\ncommit 734713bc047d87bf7eac9674765ae793478c50d3\nReflog: master@{0} (Scott Chacon <schacon@gmail.com>)\nReflog message: commit: fixed refs handling, added gc auto, updated\nAuthor: Scott Chacon <schacon@gmail.com>\nDate:   Fri Jan 2 18:32:33 2009 -0800\n\n    fixed refs handling, added gc auto, updated tests\n\ncommit d921970aadf03b3cf0e71becdaab3147ba71cdef\nReflog: master@{1} (Scott Chacon <schacon@gmail.com>)\nReflog message: merge phedders/rdocs: Merge made by recursive.\nAuthor: Scott Chacon <schacon@gmail.com>\nDate:   Thu Dec 11 15:08:43 2008 -0800\n\n    Merge commit 'phedders/rdocs'"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"git log -g","n":"code","l":" 来查看类似于 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"git log","n":"code","l":" 输出格式的引用日志信息："},{"a":[["class","source pcalibre1 pcalibre"]],"n":"pre","l":"\n"},{"a":[["class","calibre13 pcalibre1 pcalibre"]],"n":"code"},{"a":[["class","calibre14 pcalibre1 pcalibre"]],"n":"span"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git show master@{yesterday}"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"master","n":"code","l":" 分支在昨天的时候指向了哪个提交，你可以输入"},{"a":[["class","source pcalibre1 pcalibre"]],"n":"pre","l":"\n"},{"a":[["class","calibre13 pcalibre1 pcalibre"]],"n":"code"},{"a":[["class","calibre14 pcalibre1 pcalibre"]],"n":"span"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git show HEAD@{5}"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"@{n}","n":"code","l":" 来引用 reflog 中输出的提交记录。"},{"a":[["class","source pcalibre1 pcalibre"]],"n":"pre","l":"\n"},{"a":[["class","calibre13 pcalibre1 pcalibre"]],"n":"code"},{"a":[["class","calibre14 pcalibre1 pcalibre"]],"n":"span"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git reflog\n734713b HEAD@{0}: commit: fixed refs handling, added gc auto, updated\nd921970 HEAD@{1}: merge phedders/rdocs: Merge made by recursive.\n1c002dd HEAD@{2}: commit: added some blame and merge stuff\n1c36188 HEAD@{3}: rebase -i (squash): updating HEAD\n95df984 HEAD@{4}: commit: # This is a combination of two commits.\n1c36188 HEAD@{5}: rebase -i (squash): updating HEAD\n7e05da5 HEAD@{6}: rebase -i (pick): updating HEAD"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"git reflog","n":"code","l":" 来查看引用日志"},{"a":[["class","pcalibre1 calibre7 pcalibre"],["id","r_branch_references"]],"x":"分支引用","n":"h3","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"指明一次提交最直接的方法是有一个指向它的分支引用。\n这样你就可以在任意一个 Git 命令中使用这个分支名来代替对应的提交对象或者 SHA-1 值。\n例如，你想要查看一个分支的最后一次提交的对象，假设 ","n":"p","l":"\n"},{"a":[["class","listing pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"如果你想知道某个分支指向哪个特定的 SHA-1，或者想看任何一个例子中被简写的 SHA-1 ，你可以使用一个叫做 ","n":"p","l":"\n"},{"a":[["class","listing pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","source pcalibre1 pcalibre"]],"n":"pre","l":"\n"},{"a":[["class","calibre13 pcalibre1 pcalibre"]],"n":"code"},{"a":[["class","calibre14 pcalibre1 pcalibre"]],"n":"span"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git rev-parse topic1\nca82a6dff817ec66f44342007202690a93763949"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"rev-parse","n":"code","l":" 的 Git 探测工具。\n你可以在 "},{"a":[["class","link pcalibre5 pcalibre4 pcalibre3 pcalibre2 pcalibre1 pcalibre"],["href","javascript:void(0)"],["id","xref--ch10-git-internals"],["data-ezPJKgrMLI5iYpd7vlZT7E","{\"frag\": \"E9OE2-78ecc950e459438e8d0462081a6fa7a8\", \"name\": \"text/part0015.html\"}"]],"x":"Git 内部原理","n":"a","l":" 中查看更多关于探测工具的信息。简单来说，"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"rev-parse","n":"code","l":" 是为了底层操作而不是日常操作设计的。\n不过，有时你想看 Git 现在到底处于什么状态时，它可能会很有用。\n你可以在你的分支上执行 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"rev-parse","n":"code"},{"a":[["class","source pcalibre1 pcalibre"]],"n":"pre","l":"\n"},{"a":[["class","calibre13 pcalibre1 pcalibre"]],"n":"code"},{"a":[["class","calibre14 pcalibre1 pcalibre"]],"n":"span"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git show ca82a6dff817ec66f44342007202690a93763949\n"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git show topic1"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"topic1","n":"code","l":" 分支指向 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"ca82a6d","n":"code","l":" ，那么以下的命令是等价的:"},{"a":[["class","pcalibre1 calibre7 pcalibre"],["id","_简短的_sha_1"]],"x":"简短的 SHA-1","n":"h3","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"Git 十分智能，你只需要提供 SHA-1 的前几个字符就可以获得对应的那次提交，当然你提供的 SHA-1 字符数量不得少于 4 个，并且没有歧义——也就是说，当前仓库中只有一个对象以这段 SHA-1 开头。","n":"p","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"例如查看一次指定的提交，假设你执行 ","n":"p","l":"\n"},{"a":[["class","listing pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"假设这个提交是 ","n":"p","l":"\n"},{"a":[["class","listing pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"Git 可以为 SHA-1 值生成出简短且唯一的缩写。\n如果你在 ","n":"p","l":"\n"},{"a":[["class","listing pcalibre1 pcalibre"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"通常 8 到 10 个字符就已经足够在一个项目中避免 SHA-1 的歧义。","n":"p","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"比如 Linux 内核这个相当大的 Git 项目，目前有超过 45 万个提交，包含 360 万个对象，也只需要前 11 个字符就能保证唯一性。","n":"p","l":"\n"},{"a":[["class","admonition pcalibre1 pcalibre8"],["title","Note: 关于 SHA-1 的简短说明"],["type","note"]],"x":"\n","n":"aside","l":"\n"},{"a":[["class","calibre18 pcalibre1 pcalibre"]],"x":"关于 SHA-1 的简短说明","n":"h2","l":"\n"},{"a":[["class","content1 pcalibre1 pcalibre"]],"x":"\n","n":"div","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"许多人觉得他们的仓库里有可能出现两个 SHA-1 值相同的对象。\n然后呢？","n":"p","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"如果你真的向仓库里提交了一个跟之前的某个对象具有相同 SHA-1 值的对象，Git 发现仓库里已经存在了拥有相同 HASH 值的对象，就会认为这个新的提交是已经被写入仓库的。\n如果之后你想检出那个对象时，你将得到先前那个对象的数据。","n":"p","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"但是这种情况发生的概率十分渺小。\nSHA-1 摘要长度是 20 字节，也就是 160 位。\n2^80 个随机哈希对象才有 50% 的概率出现一次冲突\n（计算冲突机率的公式是 ","n":"p","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"举例说一下怎样才能产生一次 SHA-1 冲突。\n如果地球上 65 亿个人类都在编程，每人每秒都在产生等价于整个 Linux 内核历史（360 万个 Git 对象）的代码，并将之提交到一个巨大的 Git 仓库里面，这样持续两年的时间才会产生足够的对象，使其拥有 50% 的概率产生一次 SHA-1 对象冲突。\n这要比你编程团队的成员同一个晚上在互不相干的意外中被狼袭击并杀死的机率还要小。","n":"p","l":"\n"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"p = (n(n-1)/2) * (1/2^160))","n":"code","l":" ）。2^80\n是 1.2 x 10^24\n也就是一亿亿亿。\n那是地球上沙粒总数的 1200 倍。"},{"a":[["class","source pcalibre1 pcalibre"]],"n":"pre","l":"\n"},{"a":[["class","calibre13 pcalibre1 pcalibre"]],"n":"code"},{"a":[["class","calibre14 pcalibre1 pcalibre"]],"n":"span"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git log --abbrev-commit --pretty=oneline\nca82a6d changed the version number\n085bb3b removed unnecessary test code\na11bef0 first commit"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"git log","n":"code","l":" 后加上 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"--abbrev-commit","n":"code","l":" 参数，输出结果里就会显示简短且唯一的值；默认使用七个字符，不过有时为了避免 SHA-1 的歧义，会增加字符数："},{"a":[["class","source pcalibre1 pcalibre"]],"n":"pre","l":"\n"},{"a":[["class","calibre13 pcalibre1 pcalibre"]],"n":"code"},{"a":[["class","calibre14 pcalibre1 pcalibre"]],"n":"span"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git show 1c002dd4b536e7479fe34593e72e6c6c1819e53b\n"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git show 1c002dd4b536e7479f\n"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git show 1c002d"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"1c002dd....","n":"code","l":"，如果你想 "},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"git show","n":"code","l":" 这个提交，下面的命令是等价的（假设简短的版本没有歧义）："},{"a":[["class","source pcalibre1 pcalibre"]],"n":"pre","l":"\n"},{"a":[["class","calibre13 pcalibre1 pcalibre"]],"n":"code"},{"a":[["class","calibre14 pcalibre1 pcalibre"]],"n":"span"},{"a":[["class","pcalibre1 calibre15 pcalibre"]],"x":"$","n":"span","l":" git log\ncommit 734713bc047d87bf7eac9674765ae793478c50d3\nAuthor: Scott Chacon <schacon@gmail.com>\nDate:   Fri Jan 2 18:32:33 2009 -0800\n\n    fixed refs handling, added gc auto, updated tests\n\ncommit d921970aadf03b3cf0e71becdaab3147ba71cdef\nMerge: 1c002dd... 35cfb2b...\nAuthor: Scott Chacon <schacon@gmail.com>\nDate:   Thu Dec 11 15:08:43 2008 -0800\n\n    Merge commit 'phedders/rdocs'\n\ncommit 1c002dd4b536e7479fe34593e72e6c6c1819e53b\nAuthor: Scott Chacon <schacon@gmail.com>\nDate:   Thu Dec 11 14:58:32 2008 -0800\n\n    added some blame and merge stuff"},{"a":[["class","pcalibre1 pcalibre literal"]],"x":"git log","n":"code","l":" 命令来查看之前新增一个功能的那次提交:"},{"a":[["class","pcalibre1 calibre7 pcalibre"],["id","_单个修订版本"]],"x":"单个修订版本","n":"h3","l":"\n"},{"a":[["class","calibre3 pcalibre1 pcalibre"]],"x":"你可以通过 Git 给出的 SHA-1 值来获取一次提交，不过还有很多更人性化的方式来做同样的事情。\n本节将会介绍获取单个提交的多种方法。","n":"p","l":"\n"},{"a":[["class","pcalibre1 chapter-header pcalibre"]],"x":"\n","n":"div","l":"\n"},{"a":[["class","chapter-title pcalibre1 pcalibre"]],"n":"h1","l":"\n"},{"a":[["class","subtitle pcalibre1 pcalibre"]],"n":"small"},{"a":[["class","calibre2 pcalibre1 pcalibre"]],"x":"Git","n":"b","l":" "},{"a":[["class","calibre2 pcalibre1 pcalibre"]],"x":"工具","n":"b"},{"x":"Git 工具","n":"title","l":"\n    "},{"a":[["type","text/javascript"]],"x":"\ndocument.addEventListener('DOMContentLoaded', function(event, reader) {\n  if (!(reader = navigator.epubReadingSystem)) {\n    if (navigator.userAgent.indexOf(' calibre/') >= 0) reader = { name: 'calibre-desktop' };\n    else if (window.parent == window || !(reader = window.parent.navigator.epubReadingSystem)) return;\n  }\n  document.body.setAttribute('class', reader.name.toLowerCase().replace(/ /g, '-'));\n});\n","n":"script","l":"\n    \n  "},{"a":[["href","ezPJKgrMLI5iYpd7vlZT7E|c3R5bGVzLzAwMDMuY3Nz|"],["rel","stylesheet"],["type","text/css"]],"n":"link","l":"\n"},{"a":[["href","ezPJKgrMLI5iYpd7vlZT7E|c3R5bGVzLzAwMDIuY3Nz|"],["rel","stylesheet"],["type","text/css"]],"n":"link","l":"\n"}]}