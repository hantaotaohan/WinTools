{"ns_map":["http://www.w3.org/1999/xhtml","http://www.w3.org/XML/1998/namespace"],"tree":[0,[1,[1192],[1193],[1194],[1195]],[2,[3,[4,[1187,[1188,[1189,[1190],[1191]]]]],[5,[1186]],[6,[1131],[1132],[1133,[1163],[1164],[1165,[1182,[1183,[1184],[1185]]]],[1166,[1179],[1180],[1181]],[1167,[1177],[1178]],[1168,[1170,[1171,[1172],[1173],[1174],[1175],[1176]]]],[1169]],[1134,[1135],[1136,[1160],[1161],[1162]],[1137,[1159]],[1138,[1155,[1156,[1157],[1158]]]],[1139,[1152],[1153],[1154]],[1140,[1148,[1149,[1150],[1151]]]],[1141,[1147]],[1142,[1143],[1144],[1145],[1146]]]],[7,[765],[766],[767],[768],[769,[1128,[1130]],[1129]],[770,[1107],[1108,[1127]],[1109,[1123,[1124,[1125],[1126]]]],[1110,[1122]],[1111,[1121]],[1112,[1115,[1116,[1117],[1118],[1119],[1120]]]],[1113,[1114]]],[771,[1087],[1088,[1106]],[1089,[1102,[1103,[1104],[1105]]]],[1090,[1101]],[1091,[1097,[1098,[1099],[1100]]]],[1092,[1093],[1094],[1095],[1096]]],[772,[1043],[1044,[1085],[1086]],[1045,[1081,[1082,[1083],[1084]]]],[1046,[1076],[1077],[1078],[1079],[1080]],[1047,[1071,[1072,[1073],[1074],[1075]]]],[1048,[1069],[1070]],[1049,[1064,[1065,[1066],[1067],[1068]]]],[1050,[1057],[1058],[1059],[1060],[1061],[1062],[1063]],[1051,[1052,[1053,[1054],[1055],[1056]]]]],[773,[1022],[1023,[1039],[1040],[1041],[1042]],[1024,[1035,[1036,[1037],[1038]]]],[1025,[1026],[1027],[1028],[1029],[1030],[1031],[1032],[1033],[1034]]],[774,[976],[977,[1021]],[978,[1017,[1018,[1019],[1020]]]],[979,[1015],[1016]],[980,[1014]],[981,[999,[1000,[1012,[1013]]],[1001,[1011]],[1002,[1009,[1010]]],[1003,[1007,[1008]]],[1004,[1005,[1006]]]]],[982,[992],[993],[994],[995],[996],[997],[998]],[983],[984,[990,[991]]],[985,[986,[987,[988],[989]]]]],[775,[909],[910,[971],[972],[973],[974],[975]],[911,[969],[970]],[912,[965,[966,[967],[968]]]],[913,[964]],[914,[960,[961,[962],[963]]]],[915],[916,[958],[959]],[917,[954,[955,[956],[957]]]],[918,[953]],[919,[951],[952]],[920,[944,[945,[946],[947],[948],[949],[950]]]],[921,[943]],[922,[937,[938,[939],[940],[941],[942]]]],[923,[936]],[924,[932,[933,[934],[935]]]],[925,[926],[927,[928,[929],[930],[931]]]]],[776,[875],[876,[906],[907],[908]],[877,[902,[903,[904],[905]]]],[878,[899],[900],[901]],[879],[880,[897,[898]]],[881,[895],[896]],[882,[893],[894]],[883,[888,[889,[890],[891],[892]]]],[884,[886],[887]],[885]],[777,[861],[862,[872],[873],[874]],[863,[866,[867,[868],[869],[870],[871]]]],[864,[865]]],[778,[808],[809,[860]],[810,[858],[859]],[811,[853,[854,[855],[856],[857]]]],[812,[852]],[813,[847,[848,[849],[850],[851]]]],[814,[846]],[815,[843],[844],[845]],[816,[839,[840,[841],[842]]]],[817,[837],[838]],[818,[832,[833,[834],[835],[836]]]],[819,[828],[829],[830],[831]],[820,[823,[824,[825],[826],[827]]]],[821,[822]]],[779,[780],[781],[782,[807]],[783,[803,[804,[805],[806]]]],[784],[785,[798,[799,[800],[801],[802]]]],[786,[797]],[787,[791,[792,[793],[794],[795],[796]]]],[788,[789],[790]]]],[8,[418],[419,[764]],[420],[421,[761,[762,[763]]]],[422],[423,[757,[758,[759],[760]]]],[424,[756]],[425,[755]],[426,[753],[754]],[427,[749,[750,[751],[752]]]],[428,[747],[748]],[429,[743,[744,[745],[746]]]],[430,[742]],[431,[737],[738],[739],[740],[741]],[432,[733,[734,[735],[736]]]],[433],[434,[728,[729,[730],[731],[732]]]],[435,[726,[727]]],[436,[624,[625,[626,[725]],[627,[723],[724]],[628,[720,[721],[722]]],[629,[630,[715,[718,[719]]],[716,[717]]],[631,[710,[713,[714]]],[711,[712]]],[632,[705,[708,[709]]],[706,[707]]],[633,[700,[703,[704]]],[701,[702]]],[634,[695,[698,[699]]],[696,[697]]],[635,[690,[693,[694]]],[691,[692]]],[636,[685,[688,[689]]],[686,[687]]],[637,[680,[683,[684]]],[681,[682]]],[638,[675,[678,[679]]],[676,[677]]],[639,[670,[673,[674]]],[671,[672]]],[640,[665,[668,[669]]],[666,[667]]],[641,[660,[663,[664]]],[661,[662]]],[642,[655,[658,[659]]],[656,[657]]],[643,[650,[653,[654]]],[651,[652]]],[644,[645,[648,[649]]],[646,[647]]]]]]],[437,[621],[622],[623]],[438,[619],[620]],[439,[614,[615,[616],[617],[618]]]],[440],[441,[611],[612,[613]]],[442,[545,[546,[547,[610]],[548,[608],[609]],[549,[605,[606],[607]]],[550,[551,[600,[603,[604]]],[601,[602]]],[552,[595,[598,[599]]],[596,[597]]],[553,[590,[593,[594]]],[591,[592]]],[554,[585,[588,[589]]],[586,[587]]],[555,[580,[583,[584]]],[581,[582]]],[556,[575,[578,[579]]],[576,[577]]],[557,[570,[573,[574]]],[571,[572]]],[558,[565,[568,[569]]],[566,[567]]],[559,[560,[563,[564]]],[561,[562]]]]]]],[443,[444],[445,[541],[542],[543],[544]],[446,[539],[540]],[447,[535,[536,[537],[538]]]],[448,[533],[534]],[449,[530],[531],[532]],[450,[529]],[451,[525,[526,[527],[528]]]],[452,[524]],[453,[522,[523]]],[454,[466,[467,[468,[521]],[469,[519],[520]],[470,[516,[517],[518]]],[471,[472,[511,[514,[515]]],[512,[513]]],[473,[505,[508,[509],[510]]],[506,[507]]],[474,[499,[502,[503],[504]]],[500,[501]]],[475,[494,[497,[498]]],[495,[496]]],[476,[489,[492,[493]]],[490,[491]]],[477,[484,[487,[488]]],[485,[486]]],[478,[479,[482,[483]]],[480,[481]]]]]]],[455],[456,[458,[459,[460],[461],[462],[463],[464],[465]]]],[457]]],[9,[337],[338],[339,[417]],[340,[413,[414,[415],[416]]]],[341],[342],[343],[344,[406,[407,[408],[409],[410],[411],[412]]]],[345],[346,[374],[375,[404],[405]],[376,[399,[400,[401],[402],[403]]]],[377,[397],[398]],[378,[392,[393,[394],[395],[396]]]],[379,[391]],[380,[385,[386,[387],[388],[389],[390]]]],[381,[382],[383],[384]]],[347,[348],[349,[372],[373]],[350,[369,[370,[371]]]],[351],[352,[364,[365,[366],[367],[368]]]],[353],[354,[361,[362,[363]]]],[355,[360]],[356,[357],[358],[359]]]],[10,[210],[211],[212,[310],[311,[336]],[312,[330,[331,[332],[333],[334],[335]]]],[313,[329]],[314,[325,[326,[327],[328]]]],[315],[316,[320,[321,[322],[323],[324]]]],[317],[318,[319]]],[213,[289],[290,[309]],[291,[303,[304,[305],[306],[307],[308]]]],[292,[301],[302]],[293,[297,[298,[299],[300]]]],[294,[295],[296]]],[214,[272],[273],[274,[285,[286,[287],[288]]]],[275],[276,[282],[283],[284]],[277,[278],[279],[280],[281]]],[215,[261],[262,[270],[271]],[263,[266,[267,[268],[269]]]],[264,[265]]],[216,[241],[242,[259],[260]],[243,[255,[256,[257],[258]]]],[244],[245,[254]],[246,[250,[251,[252],[253]]]],[247,[248],[249]]],[217,[218],[219,[237],[238],[239],[240]],[220,[232,[233,[234],[235],[236]]]],[221,[230],[231]],[222,[229]],[223,[224,[225,[226],[227],[228]]]]]],[11,[69],[70],[71,[194],[195,[209]],[196,[205,[206,[207],[208]]]],[197],[198],[199,[200,[201,[202],[203],[204]]]]],[72,[190],[191],[192],[193]],[73,[169],[170,[188],[189]],[171,[182,[183,[184],[185],[186],[187]]]],[172,[181]],[173,[180]],[174,[176,[177,[178],[179]]]],[175]],[74,[151],[152,[166],[167],[168]],[153,[161,[162,[163],[164],[165]]]],[154,[160]],[155,[156,[157,[158],[159]]]]],[75,[131],[132],[133,[147,[148,[149],[150]]]],[134],[135,[143,[144,[145],[146]]]],[136],[137,[138,[139,[140],[141],[142]]]]],[76,[113],[114,[129],[130]],[115,[125,[126,[127],[128]]]],[116,[123],[124]],[117,[119,[120,[121],[122]]]],[118]],[77,[98],[99,[112]],[100,[108,[109,[110],[111]]]],[101,[107]],[102,[103,[104,[105],[106]]]]],[78,[79],[80,[97]],[81,[92,[93,[94],[95],[96]]]],[82],[83,[88,[89,[90],[91]]]],[84,[85],[86],[87]]]],[12,[16],[17],[18,[68]],[19,[61,[62,[63],[64],[65],[66],[67]]]],[20,[59],[60]],[21],[22,[54,[55,[56],[57],[58]]]],[23],[24,[49,[50,[51],[52],[53]]]],[25,[48]],[26,[43,[44,[45],[46],[47]]]],[27],[28,[39,[40,[41],[42]]]],[29,[36],[37],[38]],[30,[31,[32,[33],[34],[35]]]]],[13,[14],[15]]]]],"tag_map":[{"a":[["lang","en",1],["lang","en"]],"n":"html"},{"x":"\n\n","n":"head","l":"\n"},{"x":"\n","n":"body","l":"\n"},{"a":[["class","chapter"],["title","Git 基础"],["role","doc-chapter"],["id","ch02-git-basics"]],"x":"\n","n":"section","l":"\n"},{"x":"\n","n":"header","l":"\n"},{"a":[["class","abstract"]],"x":"\n","n":"div","l":"\n"},{"a":[["class","sect1"],["title","获取 Git 仓库"]],"x":"\n","n":"section","l":"\n"},{"a":[["class","sect1"],["title","记录每次更新到仓库"]],"x":"\n","n":"section","l":"\n"},{"a":[["class","sect1"],["title","查看提交历史"]],"x":"\n","n":"section","l":"\n"},{"a":[["class","sect1"],["title","撤消操作"]],"x":"\n","n":"section","l":"\n"},{"a":[["class","sect1"],["title","远程仓库的使用"]],"x":"\n","n":"section","l":"\n"},{"a":[["class","sect1"],["title","打标签"]],"x":"\n","n":"section","l":"\n"},{"a":[["class","sect1"],["title","Git 别名"]],"x":"\n","n":"section","l":"\n"},{"a":[["class","sect1"],["title","总结"]],"x":"\n","n":"section","l":"\n"},{"a":[["id","_总结"]],"x":"总结","n":"h2","l":"\n"},{"x":"现在，你可以完成所有基本的 Git 本地操作－创建或者克隆一个仓库、做更改、暂存并提交这些更改、浏览你的仓库从创建到现在的所有更改的历史。\n下一步，本书将介绍 Git 的杀手级特性：分支模型。","n":"p","l":"\n"},{"a":[["id","r_git_aliases"]],"x":"Git 别名","n":"h2","l":"\n"},{"x":"\n在我们结束本章 Git 基础之前，正好有一个小技巧可以使你的 Git 体验更简单、容易、熟悉：别名。\n我们不会在之后的章节中引用到或假定你使用过它们，但是你大概应该知道如何使用它们。","n":"p","l":"\n"},{"x":"Git 并不会在你输入部分命令时自动推断出你想要的命令。\n如果不想每次都输入完整的 Git 命令，可以通过 ","n":"p","l":"\n"},{"a":[["class","listing"]],"x":"\n","n":"figure","l":"\n"},{"x":"这意味着，当要输入 ","n":"p","l":"\n"},{"x":"在创建你认为应该存在的命令时这个技术会很有用。\n例如，为了解决取消暂存文件的易用性问题，可以向 Git 中添加你自己的取消暂存别名：","n":"p","l":"\n"},{"a":[["class","listing"]],"x":"\n","n":"figure","l":"\n"},{"x":"这会使下面的两个命令等价：","n":"p","l":"\n"},{"a":[["class","listing"]],"x":"\n","n":"figure","l":"\n"},{"x":"这样看起来更清楚一些。\n通常也会添加一个 ","n":"p","l":"\n"},{"a":[["class","listing"]],"x":"\n","n":"figure","l":"\n"},{"x":"这样，可以轻松地看到最后一次提交：","n":"p","l":"\n"},{"a":[["class","listing"]],"x":"\n","n":"figure","l":"\n"},{"x":"可以看出，Git 只是简单地将别名替换为对应的命令。\n然而，你可能想要执行外部命令，而不是一个 Git 子命令。\n如果是那样的话，可以在命令前面加入 ","n":"p","l":"\n"},{"a":[["class","listing"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","source language-console"]],"n":"pre","l":"\n"},{"n":"code"},{"n":"span"},{"a":[["style","font-weight: bold"]],"x":"$","n":"span","l":" git config --global alias.visual "},{"a":[["style","font-style: italic"]],"x":"'!gitk'","n":"span"},{"a":[["class","literal"]],"x":"!","n":"code","l":" 符号。\n如果你自己要写一些与 Git 仓库协作的工具的话，那会很有用。\n我们现在演示将 "},{"a":[["class","literal"]],"x":"git visual","n":"code","l":" 定义为 "},{"a":[["class","literal"]],"x":"gitk","n":"code","l":" 的别名："},{"a":[["class","source language-console"]],"n":"pre","l":"\n"},{"n":"code"},{"n":"span"},{"a":[["style","font-weight: bold"]],"x":"$","n":"span","l":" git last\ncommit 66938dae3329c7aebe598c2246a8e6af90d04646\nAuthor: Josh Goebel <dreamer3@example.com>\nDate:   Tue Aug 26 19:48:51 2008 +0800\n\n    test for current head\n\n    Signed-off-by: Scott Chacon <schacon@example.com>"},{"a":[["class","source language-console"]],"n":"pre","l":"\n"},{"n":"code"},{"n":"span"},{"a":[["style","font-weight: bold"]],"x":"$","n":"span","l":" git config --global alias.last "},{"a":[["style","font-style: italic"]],"x":"'log -1 HEAD'","n":"span"},{"a":[["class","literal"]],"x":"last","n":"code","l":" 命令，像这样："},{"a":[["class","source language-console"]],"n":"pre","l":"\n"},{"n":"code"},{"n":"span"},{"a":[["style","font-weight: bold"]],"x":"$","n":"span","l":" git unstage fileA\n"},{"a":[["style","font-weight: bold"]],"x":"$","n":"span","l":" git reset HEAD -- fileA"},{"a":[["class","source language-console"]],"n":"pre","l":"\n"},{"n":"code"},{"n":"span"},{"a":[["style","font-weight: bold"]],"x":"$","n":"span","l":" git config --global alias.unstage "},{"a":[["style","font-style: italic"]],"x":"'reset HEAD --'","n":"span"},{"a":[["class","literal"]],"x":"git commit","n":"code","l":" 时，只需要输入 "},{"a":[["class","literal"]],"x":"git ci","n":"code","l":"。\n随着你继续不断地使用 Git，可能也会经常使用其他命令，所以创建别名时不要犹豫。"},{"a":[["class","source language-console"]],"n":"pre","l":"\n"},{"n":"code"},{"n":"span"},{"a":[["style","font-weight: bold"]],"x":"$","n":"span","l":" git config --global alias.co checkout\n"},{"a":[["style","font-weight: bold"]],"x":"$","n":"span","l":" git config --global alias.br branch\n"},{"a":[["style","font-weight: bold"]],"x":"$","n":"span","l":" git config --global alias.ci commit\n"},{"a":[["style","font-weight: bold"]],"x":"$","n":"span","l":" git config --global alias.st status"},{"a":[["class","literal"]],"x":"git config","n":"code","l":" 文件来轻松地为每一个命令设置一个别名。\n这里有一些例子你可以试试："},{"a":[["id","r_git_tagging"]],"x":"打标签","n":"h2","l":"\n"},{"x":"\n像其他版本控制系统（VCS）一样，Git 可以给历史中的某一个提交打上标签，以示重要。\n比较有代表性的是人们会使用这个功能来标记发布结点（v1.0 等等）。\n在本节中，你将会学习如何列出已有的标签、如何创建新标签、以及不同类型的标签分别是什么。","n":"p","l":"\n"},{"a":[["class","sect2"],["title","列出标签"]],"x":"\n","n":"section","l":"\n"},{"a":[["class","sect2"],["title","创建标签"]],"x":"\n","n":"section","l":"\n"},{"a":[["class","sect2"],["title","附注标签"]],"x":"\n","n":"section","l":"\n"},{"a":[["class","sect2"],["title","轻量标签"]],"x":"\n","n":"section","l":"\n"},{"a":[["class","sect2"],["title","后期打标签"]],"x":"\n","n":"section","l":"\n"},{"a":[["class","sect2"],["title","共享标签"]],"x":"\n","n":"section","l":"\n"},{"a":[["class","sect2"],["title","删除标签"]],"x":"\n","n":"section","l":"\n"},{"a":[["class","sect2"],["title","检出标签"]],"x":"\n","n":"section","l":"\n"},{"a":[["id","_检出标签"]],"x":"检出标签","n":"h3","l":"\n"},{"x":"如果你想查看某个标签所指向的文件版本，可以使用 ","n":"p","l":"\n"},{"a":[["class","listing"]],"x":"\n","n":"figure","l":"\n"},{"x":"在“分离头指针”状态下，如果你做了某些更改然后提交它们，标签不会发生变化，但你的新提交将不属于任何分支，并且将无法访问，除非确切的提交哈希。因此，如果你需要进行更改——比如说你正在修复旧版本的错误——这通常需要创建一个新分支：","n":"p","l":"\n"},{"a":[["class","listing"]],"x":"\n","n":"figure","l":"\n"},{"x":"当然，如果在这之后又进行了一次提交，","n":"p","l":"\n"},{"a":[["class","literal"]],"x":"version2","n":"code","l":" 分支会因为这个改动向前移动，"},{"a":[["class","literal"]],"x":"version2","n":"code","l":" 分支就会和 "},{"a":[["class","literal"]],"x":"v2.0.0","n":"code","l":" 标签稍微有些不同，这时就应该当心了。"},{"a":[["class","source language-console"]],"n":"pre","l":"\n"},{"n":"code"},{"n":"span"},{"a":[["style","font-weight: bold"]],"x":"$","n":"span","l":" git checkout -b version2 v2.0.0\nSwitched to a new branch 'version2'"},{"a":[["class","source language-console"]],"n":"pre","l":"\n"},{"n":"code"},{"n":"span"},{"a":[["style","font-weight: bold"]],"x":"$","n":"span","l":" git checkout 2.0.0\nNote: checking out '2.0.0'.\n\nYou are in 'detached HEAD' state. You can look around, make experimental\nchanges and commit them, and you can discard any commits you make in this\nstate without impacting any branches by performing another checkout.\n\nIf you want to create a new branch to retain commits you create, you may\ndo so (now or later) by using -b with the checkout command again. Example:\n\n  git checkout -b <new-branch>\n\nHEAD is now at 99ada87... Merge pull request #89 from schacon/appendix-final\n\n"},{"a":[["style","font-weight: bold"]],"x":"$","n":"span","l":" git checkout 2.0-beta-0.1\nPrevious HEAD position was 99ada87... Merge pull request #89 from schacon/appendix-final\nHEAD is now at df3f601... add atlas.json and cover image"},{"a":[["class","literal"]],"x":"git checkout","n":"code","l":" 命令，虽然说这会使你的仓库处于“分离头指针（detacthed HEAD）”状态——这个状态有些不好的副作用："},{"a":[["id","_删除标签"]],"x":"删除标签","n":"h3","l":"\n"},{"x":"要删除掉你本地仓库上的标签，可以使用命令 ","n":"p","l":"\n"},{"a":[["class","listing"]],"x":"\n","n":"figure","l":"\n"},{"x":"应该注意的是上述命令并不会从任何远程仓库中移除这个标签，你必须使用 ","n":"p","l":"\n"},{"a":[["class","listing"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","source language-console"]],"n":"pre","l":"\n"},{"n":"code"},{"n":"span"},{"a":[["style","font-weight: bold"]],"x":"$","n":"span","l":" git push origin :refs/tags/v1.4-lw\nTo /git@github.com:schacon/simplegit.git\n - [deleted]         v1.4-lw"},{"a":[["class","literal"]],"x":"git push <remote> :refs/tags/<tagname>","n":"code","l":" 来更新你的远程仓库："},{"a":[["class","source language-console"]],"n":"pre","l":"\n"},{"n":"code"},{"n":"span"},{"a":[["style","font-weight: bold"]],"x":"$","n":"span","l":" git tag -d v1.4-lw\nDeleted tag 'v1.4-lw' (was e7d5add)"},{"a":[["class","literal"]],"x":"git tag -d <tagname>","n":"code","l":"。例如，可以使用下面的命令删除掉一个轻量级标签："},{"a":[["id","r_sharing_tags"]],"x":"共享标签","n":"h3","l":"\n"},{"x":"默认情况下，","n":"p","l":"\n"},{"a":[["class","listing"]],"x":"\n","n":"figure","l":"\n"},{"x":"如果想要一次性推送很多标签，也可以使用带有 ","n":"p","l":"\n"},{"a":[["class","listing"]],"x":"\n","n":"figure","l":"\n"},{"x":"现在，当其他人从仓库中克隆或拉取，他们也能得到你的那些标签。","n":"p","l":"\n"},{"a":[["class","source language-console"]],"n":"pre","l":"\n"},{"n":"code"},{"n":"span"},{"a":[["style","font-weight: bold"]],"x":"$","n":"span","l":" git push origin --tags\nCounting objects: 1, done.\nWriting objects: 100% (1/1), 160 bytes | 0 bytes/s, done.\nTotal 1 (delta 0), reused 0 (delta 0)\nTo git@github.com:schacon/simplegit.git\n * [new tag]         v1.4 -> v1.4\n * [new tag]         v1.4-lw -> v1.4-lw"},{"a":[["class","literal"]],"x":"--tags","n":"code","l":" 选项的 "},{"a":[["class","literal"]],"x":"git push","n":"code","l":" 命令。\n这将会把所有不在远程仓库服务器上的标签全部传送到那里。"},{"a":[["class","source language-console"]],"n":"pre","l":"\n"},{"n":"code"},{"n":"span"},{"a":[["style","font-weight: bold"]],"x":"$","n":"span","l":" git push origin v1.5\nCounting objects: 14, done.\nDelta compression using up to 8 threads.\nCompressing objects: 100% (12/12), done.\nWriting objects: 100% (14/14), 2.05 KiB | 0 bytes/s, done.\nTotal 14 (delta 3), reused 0 (delta 0)\nTo git@github.com:schacon/simplegit.git\n * [new tag]         v1.5 -> v1.5"},{"a":[["class","literal"]],"x":"git push","n":"code","l":" 命令并不会传送标签到远程仓库服务器上。\n在创建完标签后你必须显式地推送标签到共享服务器上。\n这个过程就像共享远程分支一样 - 你可以运行 "},{"a":[["class","literal"]],"x":"git push origin [tagname]","n":"code","l":"。"},{"a":[["id","_后期打标签"]],"x":"后期打标签","n":"h3","l":"\n"},{"x":"你也可以对过去的提交打标签。\n假设提交历史是这样的：","n":"p","l":"\n"},{"a":[["class","listing"]],"x":"\n","n":"figure","l":"\n"},{"x":"现在，假设在 v1.2 时你忘记给项目打标签，也就是在 “updated rakefile” 提交。\n你可以在之后补上标签。\n要在那个提交上打标签，你需要在命令的末尾指定提交的校验和（或部分校验和）:","n":"p","l":"\n"},{"a":[["class","listing"]],"x":"\n","n":"figure","l":"\n"},{"x":"可以看到你已经在那次提交上打上标签了：","n":"p","l":"\n"},{"a":[["class","listing"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","source language-console"]],"n":"pre","l":"\n"},{"n":"code"},{"n":"span"},{"a":[["style","font-weight: bold"]],"x":"$","n":"span","l":" git tag\nv0.1\nv1.2\nv1.3\nv1.4\nv1.4-lw\nv1.5\n\n"},{"a":[["style","font-weight: bold"]],"x":"$","n":"span","l":" git show v1.2\ntag v1.2\nTagger: Scott Chacon <schacon@gee-mail.com>\nDate:   Mon Feb 9 15:32:16 2009 -0800\n\nversion 1.2\ncommit 9fceb02d0ae598e95dc970b74767f19372d61af8\nAuthor: Magnus Chacon <mchacon@gee-mail.com>\nDate:   Sun Apr 27 20:43:35 2008 -0700\n\n    updated rakefile\n..."},{"a":[["class","source language-console"]],"n":"pre","l":"\n"},{"n":"code"},{"n":"span"},{"a":[["style","font-weight: bold"]],"x":"$","n":"span","l":" git tag -a v1.2 9fceb02"},{"a":[["class","source language-console"]],"n":"pre","l":"\n"},{"n":"code"},{"n":"span"},{"a":[["style","font-weight: bold"]],"x":"$","n":"span","l":" git log --pretty=oneline\n15027957951b64cf874c3557a0f3547bd83b3ff6 Merge branch 'experiment'\na6b4c97498bd301d84096da251c98a07c7723e65 beginning write support\n0d52aaab4479697da7686c15f77a3d64d9165190 one more thing\n6d52a271eda8725415634dd79daabbc4d9b6008e Merge branch 'experiment'\n0b7434d86859cc7b8c3d5e1dddfed66ff742fcbc added a commit function\n4682c3261057305bdd616e23b64b0857d832627b added a todo file\n166ae0c4d3f420721acbb115cc33848dfcc2121a started write support\n9fceb02d0ae598e95dc970b74767f19372d61af8 updated rakefile\n964f16d36dfccde844893cac5b347e7b3d44abbc commit the todo\n8a5cbc430f1a9c3d00faaeffd07798508422908a updated readme"},{"a":[["id","_轻量标签"]],"x":"轻量标签","n":"h3","l":"\n"},{"x":"\n另一种给提交打标签的方式是使用轻量标签。\n轻量标签本质上是将提交校验和存储到一个文件中 - 没有保存任何其他信息。\n创建轻量标签，不需要使用 ","n":"p","l":"\n"},{"a":[["class","listing"]],"x":"\n","n":"figure","l":"\n"},{"x":"这时，如果在标签上运行 ","n":"p","l":"\n"},{"a":[["class","listing"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","source language-console"]],"n":"pre","l":"\n"},{"n":"code"},{"n":"span"},{"a":[["style","font-weight: bold"]],"x":"$","n":"span","l":" git show v1.4-lw\ncommit ca82a6dff817ec66f44342007202690a93763949\nAuthor: Scott Chacon <schacon@gee-mail.com>\nDate:   Mon Mar 17 21:52:11 2008 -0700\n\n    changed the version number"},{"a":[["class","literal"]],"x":"git show","n":"code","l":"，你不会看到额外的标签信息。\n命令只会显示出提交信息："},{"a":[["class","source language-console"]],"n":"pre","l":"\n"},{"n":"code"},{"n":"span"},{"a":[["style","font-weight: bold"]],"x":"$","n":"span","l":" git tag v1.4-lw\n"},{"a":[["style","font-weight: bold"]],"x":"$","n":"span","l":" git tag\nv0.1\nv1.3\nv1.4\nv1.4-lw\nv1.5"},{"a":[["class","literal"]],"x":"-a","n":"code","l":"、"},{"a":[["class","literal"]],"x":"-s","n":"code","l":" 或 "},{"a":[["class","literal"]],"x":"-m","n":"code","l":" 选项，只需要提供标签名字："},{"a":[["id","r_annotated_tags"]],"x":"附注标签","n":"h3","l":"\n"},{"x":"\n在 Git 中创建一个附注标签是很简单的。\n最简单的方式是当你在运行 ","n":"p","l":"\n"},{"a":[["class","listing"]],"x":"\n","n":"figure","l":"\n"},{"n":"p","l":"\n"},{"x":"通过使用 ","n":"p","l":"\n"},{"a":[["class","listing"]],"x":"\n","n":"figure","l":"\n"},{"x":"输出显示了打标签者的信息、打标签的日期时间、附注信息，然后显示具体的提交信息。","n":"p","l":"\n"},{"a":[["class","source language-console"]],"n":"pre","l":"\n"},{"n":"code"},{"n":"span"},{"a":[["style","font-weight: bold"]],"x":"$","n":"span","l":" git show v1.4\ntag v1.4\nTagger: Ben Straub <ben@straub.cc>\nDate:   Sat May 3 20:19:12 2014 -0700\n\nmy version 1.4\n\ncommit ca82a6dff817ec66f44342007202690a93763949\nAuthor: Scott Chacon <schacon@gee-mail.com>\nDate:   Mon Mar 17 21:52:11 2008 -0700\n\n    changed the version number"},{"a":[["class","literal"]],"x":"git show","n":"code","l":" 命令可以看到标签信息与对应的提交信息："},{"a":[["class","literal"]],"x":"-m","n":"code","l":" 选项指定了一条将会存储在标签中的信息。\n如果没有为附注标签指定一条信息，Git 会运行编辑器要求你输入信息。"},{"a":[["class","source language-console"]],"n":"pre","l":"\n"},{"n":"code"},{"n":"span"},{"a":[["style","font-weight: bold"]],"x":"$","n":"span","l":" git tag -a v1.4 -m "},{"a":[["style","font-style: italic"]],"x":"'my version 1.4'","n":"span","l":"\n"},{"a":[["style","font-weight: bold"]],"x":"$","n":"span","l":" git tag\nv0.1\nv1.3\nv1.4"},{"a":[["class","literal"]],"x":"tag","n":"code","l":" 命令时指定 "},{"a":[["class","literal"]],"x":"-a","n":"code","l":" 选项："},{"a":[["id","_创建标签"]],"x":"创建标签","n":"h3","l":"\n"},{"x":"Git 使用两种主要类型的标签：轻量标签（lightweight）与附注标签（annotated）。","n":"p","l":"\n"},{"x":"一个轻量标签很像一个不会改变的分支 - 它只是一个特定提交的引用。","n":"p","l":"\n"},{"x":"然而，附注标签是存储在 Git 数据库中的一个完整对象。\n它们是可以被校验的；其中包含打标签者的名字、电子邮件地址、日期时间；还有一个标签信息；并且可以使用 GNU Privacy Guard （GPG）签名与验证。\n通常建议创建附注标签，这样你可以拥有以上所有信息；但是如果你只是想用一个临时的标签，或者因为某些原因不想要保存那些信息，轻量标签也是可用的。","n":"p","l":"\n"},{"a":[["id","_列出标签"]],"x":"列出标签","n":"h3","l":"\n"},{"x":"在 Git 中列出已有的标签是非常简单直观的。\n只需要输入 ","n":"p","l":"\n"},{"a":[["class","listing"]],"x":"\n","n":"figure","l":"\n"},{"x":"这个命令以字母顺序列出标签；但是它们出现的顺序并不重要。","n":"p","l":"\n"},{"x":"你也可以使用特定的模式查找标签。\n例如，Git 自身的源代码仓库包含标签的数量超过 500 个。\n如果只对 1.8.5 系列感兴趣，可以运行：","n":"p","l":"\n"},{"a":[["class","listing"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","source language-console"]],"n":"pre","l":"\n"},{"n":"code"},{"n":"span"},{"a":[["style","font-weight: bold"]],"x":"$","n":"span","l":" git tag -l "},{"a":[["style","font-style: italic"]],"x":"'v1.8.5*'","n":"span","l":"\nv1.8.5\nv1.8.5-rc0\nv1.8.5-rc1\nv1.8.5-rc2\nv1.8.5-rc3\nv1.8.5.1\nv1.8.5.2\nv1.8.5.3\nv1.8.5.4\nv1.8.5.5"},{"a":[["class","source language-console"]],"n":"pre","l":"\n"},{"n":"code"},{"n":"span"},{"a":[["style","font-weight: bold"]],"x":"$","n":"span","l":" git tag\nv0.1\nv1.3"},{"a":[["class","literal"]],"x":"git tag","n":"code","l":"："},{"a":[["id","r_remote_repos"]],"x":"远程仓库的使用","n":"h2","l":"\n"},{"x":"为了能在任意 Git 项目上协作，你需要知道如何管理自己的远程仓库。\n远程仓库是指托管在因特网或其他网络中的你的项目的版本库。\n你可以有好几个远程仓库，通常有些仓库对你只读，有些则可以读写。\n与他人协作涉及管理远程仓库以及根据需要推送或拉取数据。\n管理远程仓库包括了解如何添加远程仓库、移除无效的远程仓库、管理不同的远程分支并定义它们是否被跟踪等等。\n在本节中，我们将介绍一部分远程管理的技能。","n":"p","l":"\n"},{"a":[["class","sect2"],["title","查看远程仓库"]],"x":"\n","n":"section","l":"\n"},{"a":[["class","sect2"],["title","添加远程仓库"]],"x":"\n","n":"section","l":"\n"},{"a":[["class","sect2"],["title","从远程仓库中抓取与拉取"]],"x":"\n","n":"section","l":"\n"},{"a":[["class","sect2"],["title","推送到远程仓库"]],"x":"\n","n":"section","l":"\n"},{"a":[["class","sect2"],["title","查看远程仓库"]],"x":"\n","n":"section","l":"\n"},{"a":[["class","sect2"],["title","远程仓库的移除与重命名"]],"x":"\n","n":"section","l":"\n"},{"a":[["id","_远程仓库的移除与重命名"]],"x":"远程仓库的移除与重命名","n":"h3","l":"\n"},{"x":"如果想要重命名引用的名字可以运行 ","n":"p","l":"\n"},{"a":[["class","listing"]],"x":"\n","n":"figure","l":"\n"},{"x":"值得注意的是这同样也会修改你的远程分支名字。\n那些过去引用 ","n":"p","l":"\n"},{"x":"如果因为一些原因想要移除一个远程仓库 - 你已经从服务器上搬走了或不再想使用某一个特定的镜像了，又或者某一个贡献者不再贡献了 - 可以使用 ","n":"p","l":"\n"},{"a":[["class","listing"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","source language-console"]],"n":"pre","l":"\n"},{"n":"code"},{"n":"span"},{"a":[["style","font-weight: bold"]],"x":"$","n":"span","l":" git remote rm paul\n"},{"a":[["style","font-weight: bold"]],"x":"$","n":"span","l":" git remote\norigin"},{"a":[["class","literal"]],"x":"git remote rm","n":"code","l":" ："},{"a":[["class","literal"]],"x":"pb/master","n":"code","l":" 的现在会引用 "},{"a":[["class","literal"]],"x":"paul/master","n":"code","l":"。"},{"a":[["class","source language-console"]],"n":"pre","l":"\n"},{"n":"code"},{"n":"span"},{"a":[["style","font-weight: bold"]],"x":"$","n":"span","l":" git remote rename pb paul\n"},{"a":[["style","font-weight: bold"]],"x":"$","n":"span","l":" git remote\norigin\npaul"},{"a":[["class","literal"]],"x":"git remote rename","n":"code","l":" 去修改一个远程仓库的简写名。\n例如，想要将 "},{"a":[["class","literal"]],"x":"pb","n":"code","l":" 重命名为 "},{"a":[["class","literal"]],"x":"paul","n":"code","l":"，可以用 "},{"a":[["class","literal"]],"x":"git remote rename","n":"code","l":" 这样做："},{"a":[["id","r_inspecting_remote"]],"x":"查看远程仓库","n":"h3","l":"\n"},{"x":"如果想要查看某一个远程仓库的更多信息，可以使用 ","n":"p","l":"\n"},{"a":[["class","listing"]],"x":"\n","n":"figure","l":"\n"},{"x":"它同样会列出远程仓库的 URL 与跟踪分支的信息。\n这些信息非常有用，它告诉你正处于 master 分支，并且如果运行 git pull，就会抓取所有的远程引用，然后将远程 master 分支合并到本地 master 分支。\n它也会列出拉取到的所有远程引用。","n":"p","l":"\n"},{"x":"这是一个经常遇到的简单例子。\n如果你是 Git 的重度使用者，那么还可以通过 ","n":"p","l":"\n"},{"a":[["class","listing"]],"x":"\n","n":"figure","l":"\n"},{"x":"这个命令列出了当你在特定的分支上执行 ","n":"p","l":"\n"},{"a":[["class","literal"]],"x":"git push","n":"code","l":" 会自动地推送到哪一个远程分支。\n它也同样地列出了哪些远程分支不在你的本地，哪些远程分支已经从服务器上移除了，还有当你执行 "},{"a":[["class","literal"]],"x":"git pull","n":"code","l":" 时哪些分支会自动合并。"},{"a":[["class","source language-console"]],"n":"pre","l":"\n"},{"n":"code"},{"n":"span"},{"a":[["style","font-weight: bold"]],"x":"$","n":"span","l":" git remote show origin\n* remote origin\n  URL: https://github.com/my-org/complex-project\n  Fetch URL: https://github.com/my-org/complex-project\n  Push  URL: https://github.com/my-org/complex-project\n  HEAD branch: master\n  Remote branches:\n    master                           tracked\n    dev-branch                       tracked\n    markdown-strip                   tracked\n    issue-43                         new (next fetch will store in remotes/origin)\n    issue-45                         new (next fetch will store in remotes/origin)\n    refs/remotes/origin/issue-11     stale (use 'git remote prune' to remove)\n  Local branches configured for 'git pull':\n    dev-branch merges with remote dev-branch\n    master     merges with remote master\n  Local refs configured for 'git push':\n    dev-branch                     pushes to dev-branch                     (up to date)\n    markdown-strip                 pushes to markdown-strip                 (up to date)\n    master                         pushes to master                         (up to date)"},{"a":[["class","literal"]],"x":"git remote show","n":"code","l":" 看到更多的信息。"},{"a":[["class","source language-console"]],"n":"pre","l":"\n"},{"n":"code"},{"n":"span"},{"a":[["style","font-weight: bold"]],"x":"$","n":"span","l":" git remote show origin\n* remote origin\n  Fetch URL: https://github.com/schacon/ticgit\n  Push  URL: https://github.com/schacon/ticgit\n  HEAD branch: master\n  Remote branches:\n    master                               tracked\n    dev-branch                           tracked\n  Local branch configured for 'git pull':\n    master merges with remote master\n  Local ref configured for 'git push':\n    master pushes to master (up to date)"},{"a":[["class","literal"]],"x":"git remote show [remote-name]","n":"code","l":" 命令。\n如果想以一个特定的缩写名运行这个命令，例如 "},{"a":[["class","literal"]],"x":"origin","n":"code","l":"，会得到像下面类似的信息："},{"a":[["id","r_pushing_remotes"]],"x":"推送到远程仓库","n":"h3","l":"\n"},{"x":"当你想分享你的项目时，必须将其推送到上游。\n这个命令很简单：","n":"p","l":"\n"},{"a":[["class","listing"]],"x":"\n","n":"figure","l":"\n"},{"x":"只有当你有所克隆服务器的写入权限，并且之前没有人推送过时，这条命令才能生效。\n当你和其他人在同一时间克隆，他们先推送到上游然后你再推送到上游，你的推送就会毫无疑问地被拒绝。\n你必须先将他们的工作拉取下来并将其合并进你的工作后才能推送。\n阅读 ","n":"p","l":"\n"},{"a":[["href","javascript:void(0)"],["class","xref"],["data-3JJgffKNGXxmBkDC5QJuPA","{\"name\": \"OEBPS/ch03-git-branching.xhtml\", \"frag\": \"\"}"]],"x":"Git 分支","n":"a","l":" 了解如何推送到远程仓库服务器的详细信息。"},{"a":[["class","source language-console"]],"n":"pre","l":"\n"},{"n":"code"},{"n":"span"},{"a":[["style","font-weight: bold"]],"x":"$","n":"span","l":" git push origin master"},{"a":[["class","literal"]],"x":"git push [remote-name] [branch-name]","n":"code","l":"。\n当你想要将 master 分支推送到 "},{"a":[["class","literal"]],"x":"origin","n":"code","l":" 服务器时（再次说明，克隆时通常会自动帮你设置好那两个名字），那么运行这个命令就可以将你所做的备份到服务器："},{"a":[["id","r_fetching_and_pulling"]],"x":"从远程仓库中抓取与拉取","n":"h3","l":"\n"},{"x":"就如刚才所见，从远程仓库中获得数据，可以执行：","n":"p","l":"\n"},{"a":[["class","listing"]],"x":"\n","n":"figure","l":"\n"},{"x":"这个命令会访问远程仓库，从中拉取所有你还没有的数据。\n执行完成后，你将会拥有那个远程仓库中所有分支的引用，可以随时合并或查看。","n":"p","l":"\n"},{"x":"如果你使用 ","n":"p","l":"\n"},{"x":"如果你有一个分支设置为跟踪一个远程分支（阅读下一节与 ","n":"p","l":"\n"},{"a":[["href","javascript:void(0)"],["class","xref"],["data-3JJgffKNGXxmBkDC5QJuPA","{\"name\": \"OEBPS/ch03-git-branching.xhtml\", \"frag\": \"\"}"]],"x":"Git 分支","n":"a","l":" 了解更多信息），可以使用 "},{"a":[["class","literal"]],"x":"git pull","n":"code","l":" 命令来自动的抓取然后合并远程分支到当前分支。\n这对你来说可能是一个更简单或更舒服的工作流程；默认情况下，"},{"a":[["class","literal"]],"x":"git clone","n":"code","l":" 命令会自动设置本地 master 分支跟踪克隆的远程仓库的 master 分支（或不管是什么名字的默认分支）。\n运行 "},{"a":[["class","literal"]],"x":"git pull","n":"code","l":" 通常会从最初克隆的服务器上抓取数据并自动尝试合并到当前所在的分支。"},{"a":[["class","literal"]],"x":"clone","n":"code","l":" 命令克隆了一个仓库，命令会自动将其添加为远程仓库并默认以 “origin” 为简写。\n所以，"},{"a":[["class","literal"]],"x":"git fetch origin","n":"code","l":" 会抓取克隆（或上一次抓取）后新推送的所有工作。\n必须注意 "},{"a":[["class","literal"]],"x":"git fetch","n":"code","l":" 命令会将数据拉取到你的本地仓库 - 它并不会自动合并或修改你当前的工作。\n当准备好时你必须手动将其合并入你的工作。"},{"a":[["class","source language-console"]],"n":"pre","l":"\n"},{"n":"code"},{"n":"span"},{"a":[["style","font-weight: bold"]],"x":"$","n":"span","l":" git fetch [remote-name]"},{"a":[["id","_添加远程仓库"]],"x":"添加远程仓库","n":"h3","l":"\n"},{"x":"我在之前的章节中已经提到并展示了如何添加远程仓库的示例，不过这里将告诉你如何明确地做到这一点。\n运行 ","n":"p","l":"\n"},{"a":[["class","listing"]],"x":"\n","n":"figure","l":"\n"},{"x":"现在你可以在命令行中使用字符串 ","n":"p","l":"\n"},{"a":[["class","listing"]],"x":"\n","n":"figure","l":"\n"},{"x":"现在 Paul 的 master 分支可以在本地通过 ","n":"p","l":"\n"},{"a":[["class","literal"]],"x":"pb/master","n":"code","l":" 访问到 - 你可以将它合并到自己的某个分支中，或者如果你想要查看它的话，可以检出一个指向该点的本地分支。\n（我们将会在 "},{"a":[["href","javascript:void(0)"],["class","xref"],["data-3JJgffKNGXxmBkDC5QJuPA","{\"name\": \"OEBPS/ch03-git-branching.xhtml\", \"frag\": \"\"}"]],"x":"Git 分支","n":"a","l":" 中详细介绍什么是分支以及如何使用分支。）"},{"a":[["class","source language-console"]],"n":"pre","l":"\n"},{"n":"code"},{"n":"span"},{"a":[["style","font-weight: bold"]],"x":"$","n":"span","l":" git fetch pb\nremote: Counting objects: 43, done.\nremote: Compressing objects: 100% (36/36), done.\nremote: Total 43 (delta 10), reused 31 (delta 5)\nUnpacking objects: 100% (43/43), done.\nFrom https://github.com/paulboone/ticgit\n * [new branch]      master     -> pb/master\n * [new branch]      ticgit     -> pb/ticgit"},{"a":[["class","literal"]],"x":"pb","n":"code","l":" 来代替整个 URL。\n例如，如果你想拉取 Paul 的仓库中有但你没有的信息，可以运行 "},{"a":[["class","literal"]],"x":"git fetch pb","n":"code","l":"："},{"a":[["class","source language-console"]],"n":"pre","l":"\n"},{"n":"code"},{"n":"span"},{"a":[["style","font-weight: bold"]],"x":"$","n":"span","l":" git remote\norigin\n"},{"a":[["style","font-weight: bold"]],"x":"$","n":"span","l":" git remote add pb https://github.com/paulboone/ticgit\n"},{"a":[["style","font-weight: bold"]],"x":"$","n":"span","l":" git remote -v\norigin\thttps://github.com/schacon/ticgit (fetch)\norigin\thttps://github.com/schacon/ticgit (push)\npb\thttps://github.com/paulboone/ticgit (fetch)\npb\thttps://github.com/paulboone/ticgit (push)"},{"a":[["class","literal"]],"x":"git remote add <shortname> <url>","n":"code","l":" 添加一个新的远程 Git 仓库，同时指定一个你可以轻松引用的简写："},{"a":[["id","_查看远程仓库"]],"x":"查看远程仓库","n":"h3","l":"\n"},{"x":"如果想查看你已经配置的远程仓库服务器，可以运行 ","n":"p","l":"\n"},{"a":[["class","listing"]],"x":"\n","n":"figure","l":"\n"},{"x":"你也可以指定选项 ","n":"p","l":"\n"},{"a":[["class","listing"]],"x":"\n","n":"figure","l":"\n"},{"x":"如果你的远程仓库不止一个，该命令会将它们全部列出。\n例如，与几个协作者合作的，拥有多个远程仓库的仓库看起来像下面这样：","n":"p","l":"\n"},{"a":[["class","listing"]],"x":"\n","n":"figure","l":"\n"},{"x":"这样我们可以轻松拉取其中任何一个用户的贡献。\n此外，我们大概还会有某些远程仓库的推送权限，虽然我们目前还不会在此介绍。","n":"p","l":"\n"},{"x":"注意这些远程仓库使用了不同的协议；我们将会在 ","n":"p","l":"\n"},{"a":[["href","javascript:void(0)"],["class","xref"],["data-3JJgffKNGXxmBkDC5QJuPA","{\"name\": \"OEBPS/ch04-git-server.xhtml\", \"frag\": \"r_git_on_the_server\"}"]],"x":"在服务器上搭建 Git","n":"a","l":" 中了解关于它们的更多信息。"},{"a":[["class","source language-console"]],"n":"pre","l":"\n"},{"n":"code"},{"n":"span"},{"a":[["style","font-weight: bold"]],"x":"$","n":"span","l":" cd grit\n"},{"a":[["style","font-weight: bold"]],"x":"$","n":"span","l":" git remote -v\nbakkdoor  https://github.com/bakkdoor/grit (fetch)\nbakkdoor  https://github.com/bakkdoor/grit (push)\ncho45     https://github.com/cho45/grit (fetch)\ncho45     https://github.com/cho45/grit (push)\ndefunkt   https://github.com/defunkt/grit (fetch)\ndefunkt   https://github.com/defunkt/grit (push)\nkoke      git://github.com/koke/grit.git (fetch)\nkoke      git://github.com/koke/grit.git (push)\norigin    git@github.com:mojombo/grit.git (fetch)\norigin    git@github.com:mojombo/grit.git (push)"},{"a":[["class","source language-console"]],"n":"pre","l":"\n"},{"n":"code"},{"n":"span"},{"a":[["style","font-weight: bold"]],"x":"$","n":"span","l":" git remote -v\norigin\thttps://github.com/schacon/ticgit (fetch)\norigin\thttps://github.com/schacon/ticgit (push)"},{"a":[["class","literal"]],"x":"-v","n":"code","l":"，会显示需要读写远程仓库使用的 Git 保存的简写与其对应的 URL。"},{"a":[["class","source language-console"]],"n":"pre","l":"\n"},{"n":"code"},{"n":"span"},{"a":[["style","font-weight: bold"]],"x":"$","n":"span","l":" git clone https://github.com/schacon/ticgit\nCloning into 'ticgit'...\nremote: Reusing existing pack: 1857, done.\nremote: Total 1857 (delta 0), reused 0 (delta 0)\nReceiving objects: 100% (1857/1857), 374.35 KiB | 268.00 KiB/s, done.\nResolving deltas: 100% (772/772), done.\nChecking connectivity... done.\n"},{"a":[["style","font-weight: bold"]],"x":"$","n":"span","l":" cd ticgit\n"},{"a":[["style","font-weight: bold"]],"x":"$","n":"span","l":" git remote\norigin"},{"a":[["class","literal"]],"x":"git remote","n":"code","l":" 命令。\n它会列出你指定的每一个远程服务器的简写。\n如果你已经克隆了自己的仓库，那么至少应该能看到 origin - 这是 Git 给你克隆的仓库服务器的默认名字："},{"a":[["id","r_undoing"]],"x":"撤消操作","n":"h2","l":"\n"},{"x":"在任何一个阶段，你都有可能想要撤消某些操作。\n这里，我们将会学习几个撤消你所做修改的基本工具。\n注意，有些撤消操作是不可逆的。\n这是在使用 Git 的过程中，会因为操作失误而导致之前的工作丢失的少有的几个地方之一。","n":"p","l":"\n"},{"x":"有时候我们提交完了才发现漏掉了几个文件没有添加，或者提交信息写错了。\n此时，可以运行带有 ","n":"p","l":"\n"},{"a":[["class","listing"]],"x":"\n","n":"figure","l":"\n"},{"x":"这个命令会将暂存区中的文件提交。\n如果自上次提交以来你还未做任何修改（例如，在上次提交后马上执行了此命令），那么快照会保持不变，而你所修改的只是提交信息。","n":"p","l":"\n"},{"x":"文本编辑器启动后，可以看到之前的提交信息。\n编辑后保存会覆盖原来的提交信息。","n":"p","l":"\n"},{"x":"例如，你提交后发现忘记了暂存某些需要的修改，可以像下面这样操作：","n":"p","l":"\n"},{"a":[["class","listing"]],"x":"\n","n":"figure","l":"\n"},{"x":"最终你只会有一个提交 - 第二次提交将代替第一次提交的结果。","n":"p","l":"\n"},{"a":[["class","sect2"],["title","取消暂存的文件"]],"x":"\n","n":"section","l":"\n"},{"a":[["class","sect2"],["title","撤消对文件的修改"]],"x":"\n","n":"section","l":"\n"},{"a":[["id","_撤消对文件的修改"]],"x":"撤消对文件的修改","n":"h3","l":"\n"},{"x":"如果你并不想保留对 ","n":"p","l":"\n"},{"a":[["class","listing"]],"x":"\n","n":"figure","l":"\n"},{"x":"它非常清楚地告诉了你如何撤消之前所做的修改。\n让我们来按照提示执行：","n":"p","l":"\n"},{"a":[["class","listing"]],"x":"\n","n":"figure","l":"\n"},{"x":"可以看到那些修改已经被撤消了。","n":"p","l":"\n"},{"a":[["class","admonition important"],["title","Important"]],"x":"\n","n":"aside","l":"\n"},{"x":"如果你仍然想保留对那个文件做出的修改，但是现在仍然需要撤消，我们将会在 ","n":"p","l":"\n"},{"x":"记住，在 Git 中任何 ","n":"p","l":"\n"},{"x":"已提交的","n":"em","l":" 东西几乎总是可以恢复的。\n甚至那些被删除的分支中的提交或使用 "},{"a":[["class","literal"]],"x":"--amend","n":"code","l":" 选项覆盖的提交也可以恢复（阅读 "},{"a":[["id","xref--ch10-git-internals--r_data_recovery"],["href","javascript:void(0)"],["class","xref"],["data-3JJgffKNGXxmBkDC5QJuPA","{\"name\": \"OEBPS/ch10-git-internals.xhtml\", \"frag\": \"r_data_recovery\"}"]],"x":"数据恢复","n":"a","l":" 了解数据恢复）。\n然而，任何你未提交的东西丢失后很可能再也找不到了。"},{"a":[["href","javascript:void(0)"],["class","xref"],["data-3JJgffKNGXxmBkDC5QJuPA","{\"name\": \"OEBPS/ch03-git-branching.xhtml\", \"frag\": \"\"}"]],"x":"Git 分支","n":"a","l":" 介绍保存进度与分支；这些通常是更好的做法。"},{"a":[["class","content"]],"x":"\n","n":"div","l":"\n"},{"x":"你需要知道 ","n":"p","l":"\n"},{"a":[["class","literal"]],"x":"git checkout -- [file]","n":"code","l":" 是一个危险的命令，这很重要。\n你对那个文件做的任何修改都会消失 - 你只是拷贝了另一个文件来覆盖它。\n除非你确实清楚不想要那个文件了，否则不要使用这个命令。"},{"a":[["class","source language-console"]],"n":"pre","l":"\n"},{"n":"code"},{"n":"span"},{"a":[["style","font-weight: bold"]],"x":"$","n":"span","l":" git checkout -- CONTRIBUTING.md\n"},{"a":[["style","font-weight: bold"]],"x":"$","n":"span","l":" git status\nOn branch master\nChanges to be committed:\n  (use \"git reset HEAD <file>...\" to unstage)\n\n    renamed:    README.md -> README"},{"a":[["class","source language-console"]],"n":"pre","l":"\n"},{"n":"code"},{"n":"span","l":"Changes not staged for commit:\n  (use \"git add <file>...\" to update what will be committed)\n  (use \"git checkout -- <file>...\" to discard changes in working directory)\n\n    modified:   CONTRIBUTING.md"},{"a":[["class","literal"]],"x":"CONTRIBUTING.md","n":"code","l":" 文件的修改怎么办？\n你该如何方便地撤消修改 - 将它还原成上次提交时的样子（或者刚克隆完的样子，或者刚把它放入工作目录时的样子）？\n幸运的是，"},{"a":[["class","literal"]],"x":"git status","n":"code","l":" 也告诉了你应该如何做。\n在最后一个例子中，未暂存区域是这样："},{"a":[["id","r_unstaging"]],"x":"取消暂存的文件","n":"h3","l":"\n"},{"x":"接下来的两个小节演示如何操作暂存区域与工作目录中已修改的文件。\n这些命令在修改文件状态的同时，也会提示如何撤消操作。\n例如，你已经修改了两个文件并且想要将它们作为两次独立的修改提交，但是却意外地输入了 ","n":"p","l":"\n"},{"a":[["class","listing"]],"x":"\n","n":"figure","l":"\n"},{"x":"在 “Changes to be committed” 文字正下方，提示使用 ","n":"p","l":"\n"},{"a":[["class","listing"]],"x":"\n","n":"figure","l":"\n"},{"x":"这个命令有点儿奇怪，但是起作用了。\n","n":"p","l":"\n"},{"a":[["class","admonition note"],["title","Note"]],"x":"\n","n":"aside","l":"\n"},{"x":"到目前为止这个神奇的调用就是你需要对 ","n":"p","l":"\n"},{"a":[["class","literal"]],"x":"git reset","n":"code","l":" 命令了解的全部。我们将会在 "},{"a":[["id","xref--ch07-git-tools--r_git_reset"],["href","javascript:void(0)"],["class","xref"],["data-3JJgffKNGXxmBkDC5QJuPA","{\"name\": \"OEBPS/ch07-git-tools.xhtml\", \"frag\": \"r_git_reset\"}"]],"x":"重置揭密","n":"a","l":" 中了解 "},{"a":[["class","literal"]],"x":"reset","n":"code","l":" 的更多细节以及如何掌握它做一些真正有趣的事。"},{"a":[["class","content"]],"x":"\n","n":"div","l":"\n"},{"x":"虽然在调用时加上 ","n":"p","l":"\n"},{"a":[["class","literal"]],"x":"--hard","n":"code","l":" 选项"},{"x":"可以","n":"strong","l":"令 "},{"a":[["class","literal"]],"x":"git reset","n":"code","l":" 成为一个危险的命令（译注：可能导致工作目录中所有当前进度丢失！），但本例中工作目录内的文件并不会被修改。\n不加选项地调用 "},{"a":[["class","literal"]],"x":"git reset","n":"code","l":" 并不危险 — 它只会修改暂存区域。"},{"a":[["class","literal"]],"x":"CONTRIBUTING.md","n":"code","l":" 文件已经是修改未暂存的状态了。"},{"a":[["class","source language-console"]],"n":"pre","l":"\n"},{"n":"code"},{"n":"span"},{"a":[["style","font-weight: bold"]],"x":"$","n":"span","l":" git reset HEAD CONTRIBUTING.md\nUnstaged changes after reset:\nM\tCONTRIBUTING.md\n"},{"a":[["style","font-weight: bold"]],"x":"$","n":"span","l":" git status\nOn branch master\nChanges to be committed:\n  (use \"git reset HEAD <file>...\" to unstage)\n\n    renamed:    README.md -> README\n\nChanges not staged for commit:\n  (use \"git add <file>...\" to update what will be committed)\n  (use \"git checkout -- <file>...\" to discard changes in working directory)\n\n    modified:   CONTRIBUTING.md"},{"a":[["class","literal"]],"x":"git reset HEAD <file>...","n":"code","l":" 来取消暂存。\n所以，我们可以这样来取消暂存 "},{"a":[["class","literal"]],"x":"CONTRIBUTING.md","n":"code","l":" 文件："},{"a":[["class","source language-console"]],"n":"pre","l":"\n"},{"n":"code"},{"n":"span"},{"a":[["style","font-weight: bold"]],"x":"$","n":"span","l":" git add *\n"},{"a":[["style","font-weight: bold"]],"x":"$","n":"span","l":" git status\nOn branch master\nChanges to be committed:\n  (use \"git reset HEAD <file>...\" to unstage)\n\n    renamed:    README.md -> README\n    modified:   CONTRIBUTING.md"},{"a":[["class","literal"]],"x":"git add *","n":"code","l":" 暂存了它们两个。\n如何只取消暂存两个中的一个呢？\n"},{"a":[["class","literal"]],"x":"git status","n":"code","l":" 命令提示了你："},{"a":[["class","source language-console"]],"n":"pre","l":"\n"},{"n":"code"},{"n":"span"},{"a":[["style","font-weight: bold"]],"x":"$","n":"span","l":" git commit -m "},{"a":[["style","font-style: italic"]],"x":"'initial commit'","n":"span","l":"\n"},{"a":[["style","font-weight: bold"]],"x":"$","n":"span","l":" git add forgotten_file\n"},{"a":[["style","font-weight: bold"]],"x":"$","n":"span","l":" git commit --amend"},{"a":[["class","source language-console"]],"n":"pre","l":"\n"},{"n":"code"},{"n":"span"},{"a":[["style","font-weight: bold"]],"x":"$","n":"span","l":" git commit --amend"},{"a":[["class","literal"]],"x":"--amend","n":"code","l":" 选项的提交命令尝试重新提交："},{"a":[["id","r_viewing_history"]],"x":"查看提交历史","n":"h2","l":"\n"},{"x":"在提交了若干更新，又或者克隆了某个项目之后，你也许想回顾下提交历史。\n完成这个任务最简单而又有效的工具是 ","n":"p","l":"\n"},{"x":"接下来的例子会用我专门用于演示的 simplegit 项目，\n运行下面的命令获取该项目源代码：","n":"p","l":"\n"},{"a":[["class","listing"]],"x":"\n","n":"figure","l":"\n"},{"x":"然后在此项目中运行 git log，应该会看到下面的输出：","n":"p","l":"\n"},{"a":[["class","listing"]],"x":"\n","n":"figure","l":"\n"},{"x":"默认不用任何参数的话，","n":"p","l":"\n"},{"n":"p","l":"\n"},{"x":"一个常用的选项是 ","n":"p","l":"\n"},{"a":[["class","listing"]],"x":"\n","n":"figure","l":"\n"},{"x":"该选项除了显示基本信息之外，还附带了每次 commit 的变化。\n当进行代码审查，或者快速浏览某个搭档提交的 commit 所带来的变化的时候，这个参数就非常有用了。\n你也可以为 ","n":"p","l":"\n"},{"a":[["class","listing"]],"x":"\n","n":"figure","l":"\n"},{"x":"正如你所看到的，","n":"p","l":"\n"},{"x":"另外一个常用的选项是 ","n":"p","l":"\n"},{"a":[["class","listing"]],"x":"\n","n":"figure","l":"\n"},{"x":"但最有意思的是 format，可以定制要显示的记录格式。\n这样的输出对后期提取分析格外有用 — 因为你知道输出的格式不会随着 Git 的更新而发生改变：","n":"p","l":"\n"},{"a":[["class","listing"]],"x":"\n","n":"figure","l":"\n"},{"n":"p","l":"\n"},{"a":[["class","table"]],"x":"\n","n":"div","l":"\n"},{"x":"你一定奇怪 ","n":"p","l":"\n"},{"x":"当 oneline 或 format 与另一个 ","n":"p","l":"\n"},{"a":[["class","listing"]],"x":"\n","n":"figure","l":"\n"},{"x":"这种输出类型会在我们下一章学完分支与合并以后变得更加有趣。","n":"p","l":"\n"},{"x":"以上只是简单介绍了一些 ","n":"p","l":"\n"},{"a":[["class","table"]],"x":"\n","n":"div","l":"\n"},{"a":[["class","sect2"],["title","限制输出长度"]],"x":"\n","n":"section","l":"\n"},{"a":[["id","_限制输出长度"]],"x":"限制输出长度","n":"h3","l":"\n"},{"x":"除了定制输出格式的选项之外，","n":"p","l":"\n"},{"x":"另外还有按照时间作限制的选项，比如 ","n":"p","l":"\n"},{"a":[["class","listing"]],"x":"\n","n":"figure","l":"\n"},{"x":"这个命令可以在多种格式下工作，比如说具体的某一天 ","n":"p","l":"\n"},{"x":"还可以给出若干搜索条件，列出符合的提交。\n用 ","n":"p","l":"\n"},{"x":"另一个非常有用的筛选选项是 ","n":"p","l":"\n"},{"a":[["class","listing"]],"x":"\n","n":"figure","l":"\n"},{"x":"最后一个很实用的 ","n":"p","l":"\n"},{"x":"在 ","n":"p","l":"\n"},{"a":[["class","table"]],"x":"\n","n":"div","l":"\n"},{"x":"来看一个实际的例子，如果要查看 Git 仓库中，2008 年 10 月期间，Junio Hamano 提交的但未合并的测试文件，可以用下面的查询命令：","n":"p","l":"\n"},{"a":[["class","listing"]],"x":"\n","n":"figure","l":"\n"},{"x":"在近 40000 条提交中，上面的输出仅列出了符合条件的 6 条记录。","n":"p","l":"\n"},{"a":[["class","source language-console"]],"n":"pre","l":"\n"},{"n":"code"},{"n":"span"},{"a":[["style","font-weight: bold"]],"x":"$","n":"span","l":" git log --pretty="},{"a":[["style","font-style: italic"]],"x":"\"%h - %s\"","n":"span","l":" --author=gitster --since="},{"a":[["style","font-style: italic"]],"x":"\"2008-10-01\"","n":"span","l":" "},{"a":[["style","font-weight: bold; font-style: italic"]],"x":"\\","n":"span","l":"\n   --before="},{"a":[["style","font-style: italic"]],"x":"\"2008-11-01\"","n":"span","l":" --no-merges -- t/\n5610e3b - Fix testcase failure when extended attributes are in use\nacd3b9e - Enhance hold_lock_file_for_{update,append}() API\nf563754 - demonstrate breakage of detached checkout with symbolic link HEAD\nd1a43f2 - reset --hard/read-tree --reset -u: remove unmerged new paths\n51a94af - Fix \"checkout --track -b newbranch\" on detached HEAD\nb0ad11e - pull: allow \"git pull origin $something:$current_branch\" into an unborn branch"},{"a":[["class","content"]],"x":"\n","n":"div","l":"\n"},{"a":[["id","rlimit_options"],["class","table table-framed-topbot table-grid-rows"],["style","width: 100%"]],"x":"\n","n":"table","l":"\n"},{"x":"Table 3. 限制 ","n":"caption","l":"\n"},{"x":"\n","n":"colgroup","l":"\n"},{"x":"\n","n":"thead","l":"\n"},{"x":"\n","n":"tbody","l":"\n"},{"x":"\n","n":"tr","l":"\n"},{"x":"\n","n":"tr","l":"\n"},{"x":"\n","n":"tr","l":"\n"},{"x":"\n","n":"tr","l":"\n"},{"x":"\n","n":"tr","l":"\n"},{"x":"\n","n":"tr","l":"\n"},{"x":"\n","n":"tr","l":"\n"},{"n":"td","l":"\n"},{"n":"td","l":"\n"},{"x":"仅显示添加或移除了某个关键字的提交","n":"p"},{"n":"p"},{"a":[["class","literal"]],"x":"-S","n":"code"},{"n":"td","l":"\n"},{"n":"td","l":"\n"},{"x":"仅显示含指定关键字的提交","n":"p"},{"n":"p"},{"a":[["class","literal"]],"x":"--grep","n":"code"},{"n":"td","l":"\n"},{"n":"td","l":"\n"},{"x":"仅显示指定提交者相关的提交。","n":"p"},{"n":"p"},{"a":[["class","literal"]],"x":"--committer","n":"code"},{"n":"td","l":"\n"},{"n":"td","l":"\n"},{"x":"仅显示指定作者相关的提交。","n":"p"},{"n":"p"},{"a":[["class","literal"]],"x":"--author","n":"code"},{"n":"td","l":"\n"},{"n":"td","l":"\n"},{"x":"仅显示指定时间之前的提交。","n":"p"},{"n":"p"},{"a":[["class","literal"]],"x":"--until","n":"code","l":", "},{"a":[["class","literal"]],"x":"--before","n":"code"},{"n":"td","l":"\n"},{"n":"td","l":"\n"},{"x":"仅显示指定时间之后的提交。","n":"p"},{"n":"p"},{"a":[["class","literal"]],"x":"--since","n":"code","l":", "},{"a":[["class","literal"]],"x":"--after","n":"code"},{"n":"td","l":"\n"},{"n":"td","l":"\n"},{"x":"仅显示最近的 n 条提交","n":"p"},{"n":"p"},{"a":[["class","literal"]],"x":"-(n)","n":"code"},{"x":"\n","n":"tr","l":"\n"},{"x":"选项","n":"th","l":"\n"},{"x":"说明","n":"th","l":"\n"},{"n":"col","l":"\n"},{"n":"col","l":"\n"},{"a":[["class","literal"]],"x":"git log","n":"code","l":" 输出的选项"},{"a":[["id","xref-rlimit_options"],["href","javascript:void(0)"],["class","xref"],["data-3JJgffKNGXxmBkDC5QJuPA","{\"name\": \"OEBPS/ch02-git-basics.xhtml\", \"frag\": \"rlimit_options\"}"]],"x":"限制 ","n":"a","l":" 中列出了常用的选项"},{"a":[["class","literal"]],"x":"git log","n":"code","l":" 输出的选项"},{"a":[["class","literal"]],"x":"git log","n":"code","l":" 选项是路径（path），\n如果只关心某些文件或者目录的历史提交，可以在 git log 选项的最后指定它们的路径。\n因为是放在最后位置上的选项，所以用两个短划线（--）隔开之前的选项和后面限定的路径名。"},{"a":[["class","source language-console"]],"n":"pre","l":"\n"},{"n":"code"},{"n":"span"},{"a":[["style","font-weight: bold"]],"x":"$","n":"span","l":" git log -Sfunction_name"},{"a":[["class","literal"]],"x":"-S","n":"code","l":"，可以列出那些添加或移除了某些字符串的提交。\n比如说，你想找出添加或移除了某一个特定函数的引用的提交，你可以这样使用："},{"a":[["class","literal"]],"x":"--author","n":"code","l":" 选项显示指定作者的提交，用 "},{"a":[["class","literal"]],"x":"--grep","n":"code","l":" 选项搜索提交说明中的关键字。\n（请注意，如果要得到同时满足这两个选项搜索条件的提交，就必须用 "},{"a":[["class","literal"]],"x":"--all-match","n":"code","l":" 选项。否则，满足任意一个条件的提交都会被匹配出来）"},{"a":[["class","literal"]],"x":"\"2008-01-15\"","n":"code","l":"，或者是相对地多久以前 "},{"a":[["class","literal"]],"x":"\"2 years 1 day 3 minutes ago\"","n":"code","l":"。"},{"a":[["class","source language-console"]],"n":"pre","l":"\n"},{"n":"code"},{"n":"span"},{"a":[["style","font-weight: bold"]],"x":"$","n":"span","l":" git log --since=2.weeks"},{"a":[["class","literal"]],"x":"--since","n":"code","l":" 和 "},{"a":[["class","literal"]],"x":"--until","n":"code","l":" 也很有用。\n例如，下面的命令列出所有最近两周内的提交："},{"a":[["class","literal"]],"x":"git log","n":"code","l":" 还有许多非常实用的限制输出长度的选项，也就是只输出部分提交信息。\n之前你已经看到过 "},{"a":[["class","literal"]],"x":"-2","n":"code","l":" 了，它只显示最近的两条提交，\n实际上，这是 "},{"a":[["class","literal"]],"x":"-<n>","n":"code","l":" 选项的写法，其中的 "},{"a":[["class","literal"]],"x":"n","n":"code","l":" 可以是任何整数，表示仅显示最近的若干条提交。\n不过实践中我们是不太用这个选项的，Git 在输出所有提交时会自动调用分页程序，所以你一次只会看到一页的内容。"},{"a":[["class","content"]],"x":"\n","n":"div","l":"\n"},{"a":[["id","rlog_options"],["class","table table-framed-topbot table-grid-rows"],["style","width: 100%"]],"x":"\n","n":"table","l":"\n"},{"x":"Table 2. ","n":"caption","l":"\n"},{"x":"\n","n":"colgroup","l":"\n"},{"x":"\n","n":"thead","l":"\n"},{"x":"\n","n":"tbody","l":"\n"},{"x":"\n","n":"tr","l":"\n"},{"x":"\n","n":"tr","l":"\n"},{"x":"\n","n":"tr","l":"\n"},{"x":"\n","n":"tr","l":"\n"},{"x":"\n","n":"tr","l":"\n"},{"x":"\n","n":"tr","l":"\n"},{"x":"\n","n":"tr","l":"\n"},{"x":"\n","n":"tr","l":"\n"},{"x":"\n","n":"tr","l":"\n"},{"n":"td","l":"\n"},{"n":"td","l":"\n"},{"x":"使用其他格式显示历史提交信息。可用的选项包括 oneline，short，full，fuller 和 format（后跟指定格式）。","n":"p"},{"n":"p"},{"a":[["class","literal"]],"x":"--pretty","n":"code"},{"n":"td","l":"\n"},{"n":"td","l":"\n"},{"x":"显示 ASCII 图形表示的分支合并历史。","n":"p"},{"n":"p"},{"a":[["class","literal"]],"x":"--graph","n":"code"},{"n":"td","l":"\n"},{"n":"td","l":"\n"},{"x":"使用较短的相对时间显示（比如，“2 weeks ago”）。","n":"p"},{"n":"p"},{"a":[["class","literal"]],"x":"--relative-date","n":"code"},{"n":"td","l":"\n"},{"n":"td","l":"\n"},{"x":"仅显示 SHA-1 的前几个字符，而非所有的 40 个字符。","n":"p"},{"n":"p"},{"a":[["class","literal"]],"x":"--abbrev-commit","n":"code"},{"n":"td","l":"\n"},{"n":"td","l":"\n"},{"x":"显示新增、修改、删除的文件清单。","n":"p"},{"n":"p"},{"a":[["class","literal"]],"x":"--name-status","n":"code"},{"n":"td","l":"\n"},{"n":"td","l":"\n"},{"x":"仅在提交信息后显示已修改的文件清单。","n":"p"},{"n":"p"},{"a":[["class","literal"]],"x":"--name-only","n":"code"},{"n":"td","l":"\n"},{"n":"td","l":"\n"},{"x":"只显示 --stat 中最后的行数修改添加移除统计。","n":"p"},{"n":"p"},{"a":[["class","literal"]],"x":"--shortstat","n":"code"},{"n":"td","l":"\n"},{"n":"td","l":"\n"},{"x":"显示每次更新的文件修改统计信息。","n":"p"},{"n":"p"},{"a":[["class","literal"]],"x":"--stat","n":"code"},{"n":"td","l":"\n"},{"n":"td","l":"\n"},{"x":"按补丁格式显示每个更新之间的差异。","n":"p"},{"n":"p"},{"a":[["class","literal"]],"x":"-p","n":"code"},{"x":"\n","n":"tr","l":"\n"},{"x":"选项","n":"th","l":"\n"},{"x":"说明","n":"th","l":"\n"},{"n":"col","l":"\n"},{"n":"col","l":"\n"},{"a":[["class","literal"]],"x":"git log","n":"code","l":" 的常用选项"},{"a":[["class","literal"]],"x":"git log","n":"code","l":" 命令支持的选项。\n"},{"a":[["id","xref-rlog_options"],["href","javascript:void(0)"],["class","xref"],["data-3JJgffKNGXxmBkDC5QJuPA","{\"name\": \"OEBPS/ch02-git-basics.xhtml\", \"frag\": \"rlog_options\"}"]],"n":"a","l":" 列出了我们目前涉及到的和没涉及到的选项，以及它们是如何影响 log 命令的输出的："},{"a":[["class","literal"]],"x":"git log","n":"code","l":" 的常用选项"},{"a":[["class","source language-console"]],"n":"pre","l":"\n"},{"n":"code"},{"n":"span"},{"a":[["style","font-weight: bold"]],"x":"$","n":"span","l":" git log --pretty=format:"},{"a":[["style","font-style: italic"]],"x":"\"%h %s\"","n":"span","l":" --graph\n* 2d3acf9 ignore errors from SIGCHLD on trap\n*  5e3ee11 Merge branch 'master' of git://github.com/dustin/grit\n|\\\n| * 420eac9 Added a method for getting the current branch.\n* | 30e367c timeout code and tests\n* | 5a09431 add timeout protection to grit\n* | e1193f8 support for heads with slashes in them\n|/\n* d6016bc require time for xmlschema\n*  11d191e Merge branch 'defunkt' into local"},{"a":[["class","literal"]],"x":"log","n":"code","l":" 选项 "},{"a":[["class","literal"]],"x":"--graph","n":"code","l":" 结合使用时尤其有用。\n这个选项添加了一些ASCII字符串来形象地展示你的分支、合并历史："},{"x":"作者","n":"em","l":" 和 "},{"x":"提交者","n":"em","l":" 之间究竟有何差别，\n其实作者指的是实际作出修改的人，提交者指的是最后将此工作成果提交到仓库的人。\n所以，当你为某个项目发布补丁，然后某个核心成员将你的补丁并入项目时，你就是作者，而那个核心成员就是提交者。\n我们会在 "},{"a":[["id","xref--ch05-distributed-git"],["href","javascript:void(0)"],["class","xref"],["data-3JJgffKNGXxmBkDC5QJuPA","{\"name\": \"OEBPS/ch05-distributed-git.xhtml\", \"frag\": \"\"}"]],"x":"分布式 Git","n":"a","l":" 再详细介绍两者之间的细微差别。"},{"a":[["class","content"]],"x":"\n","n":"div","l":"\n"},{"a":[["id","rpretty_format"],["class","table table-framed-topbot table-grid-rows"],["style","width: 100%"]],"x":"\n","n":"table","l":"\n"},{"x":"Table 1. ","n":"caption","l":"\n"},{"x":"\n","n":"colgroup","l":"\n"},{"x":"\n","n":"thead","l":"\n"},{"x":"\n","n":"tbody","l":"\n"},{"x":"\n","n":"tr","l":"\n"},{"x":"\n","n":"tr","l":"\n"},{"x":"\n","n":"tr","l":"\n"},{"x":"\n","n":"tr","l":"\n"},{"x":"\n","n":"tr","l":"\n"},{"x":"\n","n":"tr","l":"\n"},{"x":"\n","n":"tr","l":"\n"},{"x":"\n","n":"tr","l":"\n"},{"x":"\n","n":"tr","l":"\n"},{"x":"\n","n":"tr","l":"\n"},{"x":"\n","n":"tr","l":"\n"},{"x":"\n","n":"tr","l":"\n"},{"x":"\n","n":"tr","l":"\n"},{"x":"\n","n":"tr","l":"\n"},{"x":"\n","n":"tr","l":"\n"},{"n":"td","l":"\n"},{"n":"td","l":"\n"},{"x":"提交说明","n":"p"},{"n":"p"},{"a":[["class","literal"]],"x":"%s","n":"code"},{"n":"td","l":"\n"},{"n":"td","l":"\n"},{"x":"提交日期，按多久以前的方式显示","n":"p"},{"n":"p"},{"a":[["class","literal"]],"x":"%cr","n":"code"},{"n":"td","l":"\n"},{"n":"td","l":"\n"},{"x":"提交日期","n":"p"},{"n":"p"},{"a":[["class","literal"]],"x":"%cd","n":"code"},{"n":"td","l":"\n"},{"n":"td","l":"\n"},{"x":"提交者的电子邮件地址","n":"p"},{"n":"p"},{"a":[["class","literal"]],"x":"%ce","n":"code"},{"n":"td","l":"\n"},{"n":"td","l":"\n"},{"x":"提交者（committer）的名字","n":"p"},{"n":"p"},{"a":[["class","literal"]],"x":"%cn","n":"code"},{"n":"td","l":"\n"},{"n":"td","l":"\n"},{"x":"作者修订日期，按多久以前的方式显示","n":"p"},{"n":"p"},{"a":[["class","literal"]],"x":"%ar","n":"code"},{"n":"td","l":"\n"},{"n":"td","l":"\n"},{"x":"作者修订日期（可以用 --date= 选项定制格式）","n":"p"},{"n":"p"},{"a":[["class","literal"]],"x":"%ad","n":"code"},{"n":"td","l":"\n"},{"n":"td","l":"\n"},{"x":"作者的电子邮件地址","n":"p"},{"n":"p"},{"a":[["class","literal"]],"x":"%ae","n":"code"},{"n":"td","l":"\n"},{"n":"td","l":"\n"},{"x":"作者（author）的名字","n":"p"},{"n":"p"},{"a":[["class","literal"]],"x":"%an","n":"code"},{"n":"td","l":"\n"},{"n":"td","l":"\n"},{"x":"父对象的简短哈希字串","n":"p"},{"n":"p"},{"a":[["class","literal"]],"x":"%p","n":"code"},{"n":"td","l":"\n"},{"n":"td","l":"\n"},{"x":"父对象（parent）的完整哈希字串","n":"p"},{"n":"p"},{"a":[["class","literal"]],"x":"%P","n":"code"},{"n":"td","l":"\n"},{"n":"td","l":"\n"},{"x":"树对象的简短哈希字串","n":"p"},{"n":"p"},{"a":[["class","literal"]],"x":"%t","n":"code"},{"n":"td","l":"\n"},{"n":"td","l":"\n"},{"x":"树对象（tree）的完整哈希字串","n":"p"},{"n":"p"},{"a":[["class","literal"]],"x":"%T","n":"code"},{"n":"td","l":"\n"},{"n":"td","l":"\n"},{"x":"提交对象的简短哈希字串","n":"p"},{"n":"p"},{"a":[["class","literal"]],"x":"%h","n":"code"},{"n":"td","l":"\n"},{"n":"td","l":"\n"},{"x":"提交对象（commit）的完整哈希字串","n":"p"},{"n":"p"},{"a":[["class","literal"]],"x":"%H","n":"code"},{"x":"\n","n":"tr","l":"\n"},{"x":"选项","n":"th","l":"\n"},{"x":"说明","n":"th","l":"\n"},{"n":"col","l":"\n"},{"n":"col","l":"\n"},{"a":[["class","literal"]],"x":"git log --pretty=format","n":"code","l":" 常用的选项"},{"a":[["id","xref-rpretty_format"],["href","javascript:void(0)"],["class","xref"],["data-3JJgffKNGXxmBkDC5QJuPA","{\"name\": \"OEBPS/ch02-git-basics.xhtml\", \"frag\": \"rpretty_format\"}"]],"n":"a","l":" 列出了常用的格式占位符写法及其代表的意义。"},{"a":[["class","literal"]],"x":"git log --pretty=format","n":"code","l":" 常用的选项"},{"a":[["class","source language-console"]],"n":"pre","l":"\n"},{"n":"code"},{"n":"span"},{"a":[["style","font-weight: bold"]],"x":"$","n":"span","l":" git log --pretty=format:"},{"a":[["style","font-style: italic"]],"x":"\"%h - %an, %ar : %s\"","n":"span","l":"\nca82a6d - Scott Chacon, 6 years ago : changed the version number\n085bb3b - Scott Chacon, 6 years ago : removed unnecessary test\na11bef0 - Scott Chacon, 6 years ago : first commit"},{"a":[["class","source language-console"]],"n":"pre","l":"\n"},{"n":"code"},{"n":"span"},{"a":[["style","font-weight: bold"]],"x":"$","n":"span","l":" git log --pretty=oneline\nca82a6dff817ec66f44342007202690a93763949 changed the version number\n085bb3bcb608e1e8451d4b2432f8ecbe6306e7e7 removed unnecessary test\na11bef06a3f659402fe7563abf99ad00de2209e6 first commit"},{"a":[["class","literal"]],"x":"--pretty","n":"code","l":"。\n这个选项可以指定使用不同于默认格式的方式展示提交历史。\n这个选项有一些内建的子选项供你使用。\n比如用 "},{"a":[["class","literal"]],"x":"oneline","n":"code","l":" 将每个提交放在一行显示，查看的提交数很大时非常有用。\n另外还有 "},{"a":[["class","literal"]],"x":"short","n":"code","l":"，"},{"a":[["class","literal"]],"x":"full","n":"code","l":" 和 "},{"a":[["class","literal"]],"x":"fuller","n":"code","l":" 可以用，展示的信息或多或少有些不同，请自己动手实践一下看看效果如何。"},{"a":[["class","literal"]],"x":"--stat","n":"code","l":" 选项在每次提交的下面列出所有被修改过的文件、有多少文件被修改了以及被修改过的文件的哪些行被移除或是添加了。\n在每次提交的最后还有一个总结。"},{"a":[["class","source language-console"]],"n":"pre","l":"\n"},{"n":"code"},{"n":"span"},{"a":[["style","font-weight: bold"]],"x":"$","n":"span","l":" git log --stat\ncommit ca82a6dff817ec66f44342007202690a93763949\nAuthor: Scott Chacon <schacon@gee-mail.com>\nDate:   Mon Mar 17 21:52:11 2008 -0700\n\n    changed the version number\n\n Rakefile | 2 +-\n 1 file changed, 1 insertion(+), 1 deletion(-)\n\ncommit 085bb3bcb608e1e8451d4b2432f8ecbe6306e7e7\nAuthor: Scott Chacon <schacon@gee-mail.com>\nDate:   Sat Mar 15 16:40:33 2008 -0700\n\n    removed unnecessary test\n\n lib/simplegit.rb | 5 -----\n 1 file changed, 5 deletions(-)\n\ncommit a11bef06a3f659402fe7563abf99ad00de2209e6\nAuthor: Scott Chacon <schacon@gee-mail.com>\nDate:   Sat Mar 15 10:31:28 2008 -0700\n\n    first commit\n\n README           |  6 ++++++\n Rakefile         | 23 +++++++++++++++++++++++\n lib/simplegit.rb | 25 +++++++++++++++++++++++++\n 3 files changed, 54 insertions(+)"},{"a":[["class","literal"]],"x":"git log","n":"code","l":" 附带一系列的总结性选项。\n比如说，如果你想看到每次提交的简略的统计信息，你可以使用 "},{"a":[["class","literal"]],"x":"--stat","n":"code","l":" 选项："},{"a":[["class","source language-console"]],"n":"pre","l":"\n"},{"n":"code"},{"n":"span"},{"a":[["style","font-weight: bold"]],"x":"$","n":"span","l":" git log -p -2\ncommit ca82a6dff817ec66f44342007202690a93763949\nAuthor: Scott Chacon <schacon@gee-mail.com>\nDate:   Mon Mar 17 21:52:11 2008 -0700\n\n    changed the version number\n\ndiff --git a/Rakefile b/Rakefile\nindex a874b73..8f94139 100644\n--- a/Rakefile\n+++ b/Rakefile\n@@ -5,7 +5,7 @@ require 'rake/gempackagetask'\n spec = Gem::Specification.new do |s|\n     s.platform  =   Gem::Platform::RUBY\n     s.name      =   \"simplegit\"\n-    s.version   =   \"0.1.0\"\n+    s.version   =   \"0.1.1\"\n     s.author    =   \"Scott Chacon\"\n     s.email     =   \"schacon@gee-mail.com\"\n     s.summary   =   \"A simple gem for using Git in Ruby code.\"\n\ncommit 085bb3bcb608e1e8451d4b2432f8ecbe6306e7e7\nAuthor: Scott Chacon <schacon@gee-mail.com>\nDate:   Sat Mar 15 16:40:33 2008 -0700\n\n    removed unnecessary test\n\ndiff --git a/lib/simplegit.rb b/lib/simplegit.rb\nindex a0a60ae..47c6340 100644\n--- a/lib/simplegit.rb\n+++ b/lib/simplegit.rb\n@@ -18,8 +18,3 @@ class SimpleGit\n     end\n\n end\n-\n-if $0 == __FILE__\n-  git = SimpleGit.new\n-  puts git.show\n-end\n\\ No newline at end of file"},{"a":[["class","literal"]],"x":"-p","n":"code","l":"，用来显示每次提交的内容差异。\n你也可以加上 "},{"a":[["class","literal"]],"x":"-2","n":"code","l":" 来仅显示最近两次提交："},{"a":[["class","literal"]],"x":"git log","n":"code","l":" 有许多选项可以帮助你搜寻你所要找的提交，\n接下来我们介绍些最常用的。"},{"a":[["class","literal"]],"x":"git log","n":"code","l":" 会按提交时间列出所有的更新，最近的更新排在最上面。\n正如你所看到的，这个命令会列出每个提交的 SHA-1 校验和、作者的名字和电子邮件地址、提交时间以及提交说明。"},{"a":[["class","source language-console"]],"n":"pre","l":"\n"},{"n":"code"},{"n":"span"},{"a":[["style","font-weight: bold"]],"x":"$","n":"span","l":" git log\ncommit ca82a6dff817ec66f44342007202690a93763949\nAuthor: Scott Chacon <schacon@gee-mail.com>\nDate:   Mon Mar 17 21:52:11 2008 -0700\n\n    changed the version number\n\ncommit 085bb3bcb608e1e8451d4b2432f8ecbe6306e7e7\nAuthor: Scott Chacon <schacon@gee-mail.com>\nDate:   Sat Mar 15 16:40:33 2008 -0700\n\n    removed unnecessary test\n\ncommit a11bef06a3f659402fe7563abf99ad00de2209e6\nAuthor: Scott Chacon <schacon@gee-mail.com>\nDate:   Sat Mar 15 10:31:28 2008 -0700\n\n    first commit"},{"a":[["class","source language-console"]],"n":"pre","l":"\n"},{"n":"code"},{"n":"span","l":"git clone https://github.com/schacon/simplegit-progit"},{"a":[["class","literal"]],"x":"git log","n":"code","l":" 命令。"},{"a":[["id","_记录每次更新到仓库"]],"x":"记录每次更新到仓库","n":"h2","l":"\n"},{"x":"现在我们手上有了一个真实项目的 Git 仓库，并从这个仓库中取出了所有文件的工作拷贝。\n接下来，对这些文件做些修改，在完成了一个阶段的目标之后，提交本次更新到仓库。","n":"p","l":"\n"},{"x":"请记住，你工作目录下的每一个文件都不外乎这两种状态：已跟踪或未跟踪。\n已跟踪的文件是指那些被纳入了版本控制的文件，在上一次快照中有它们的记录，在工作一段时间后，它们的状态可能处于未修改，已修改或已放入暂存区。\n工作目录中除已跟踪文件以外的所有其它文件都属于未跟踪文件，它们既不存在于上次快照的记录中，也没有放入暂存区。\n初次克隆某个仓库的时候，工作目录中的所有文件都属于已跟踪文件，并处于未修改状态。","n":"p","l":"\n"},{"x":"编辑过某些文件之后，由于自上次提交后你对它们做了修改，Git 将它们标记为已修改文件。\n我们逐步将这些修改过的文件放入暂存区，然后提交所有暂存了的修改，如此反复。所以使用 Git 时文件的生命周期如下：","n":"p","l":"\n"},{"a":[["class","image"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","sect2"],["title","检查当前文件状态"]],"x":"\n","n":"section","l":"\n"},{"a":[["class","sect2"],["title","跟踪新文件"]],"x":"\n","n":"section","l":"\n"},{"a":[["class","sect2"],["title","暂存已修改文件"]],"x":"\n","n":"section","l":"\n"},{"a":[["class","sect2"],["title","状态简览"]],"x":"\n","n":"section","l":"\n"},{"a":[["class","sect2"],["title","忽略文件"]],"x":"\n","n":"section","l":"\n"},{"a":[["class","sect2"],["title","查看已暂存和未暂存的修改"]],"x":"\n","n":"section","l":"\n"},{"a":[["class","sect2"],["title","提交更新"]],"x":"\n","n":"section","l":"\n"},{"a":[["class","sect2"],["title","跳过使用暂存区域"]],"x":"\n","n":"section","l":"\n"},{"a":[["class","sect2"],["title","移除文件"]],"x":"\n","n":"section","l":"\n"},{"a":[["class","sect2"],["title","移动文件"]],"x":"\n","n":"section","l":"\n"},{"a":[["id","r_git_mv"]],"x":"移动文件","n":"h3","l":"\n"},{"x":"\n不像其它的 VCS 系统，Git 并不显式跟踪文件移动操作。\n如果在 Git 中重命名了某个文件，仓库中存储的元数据并不会体现出这是一次改名操作。\n不过 Git 非常聪明，它会推断出究竟发生了什么，至于具体是如何做到的，我们稍后再谈。","n":"p","l":"\n"},{"x":"既然如此，当你看到 Git 的 ","n":"p","l":"\n"},{"a":[["class","listing"]],"x":"\n","n":"figure","l":"\n"},{"x":"它会恰如预期般正常工作。\n实际上，即便此时查看状态信息，也会明白无误地看到关于重命名操作的说明：","n":"p","l":"\n"},{"a":[["class","listing"]],"x":"\n","n":"figure","l":"\n"},{"x":"其实，运行 ","n":"p","l":"\n"},{"a":[["class","listing"]],"x":"\n","n":"figure","l":"\n"},{"x":"如此分开操作，Git 也会意识到这是一次改名，所以不管何种方式结果都一样。\n两者唯一的区别是，","n":"p","l":"\n"},{"a":[["class","literal"]],"x":"mv","n":"code","l":" 是一条命令而另一种方式需要三条命令，直接用 "},{"a":[["class","literal"]],"x":"git mv","n":"code","l":" 轻便得多。\n不过有时候用其他工具批处理改名的话，要记得在提交前删除老的文件名，再添加新的文件名。"},{"a":[["class","source language-console"]],"n":"pre","l":"\n"},{"n":"code"},{"n":"span"},{"a":[["style","font-weight: bold"]],"x":"$","n":"span","l":" mv README.md README\n"},{"a":[["style","font-weight: bold"]],"x":"$","n":"span","l":" git rm README.md\n"},{"a":[["style","font-weight: bold"]],"x":"$","n":"span","l":" git add README"},{"a":[["class","literal"]],"x":"git mv","n":"code","l":" 就相当于运行了下面三条命令："},{"a":[["class","source language-console"]],"n":"pre","l":"\n"},{"n":"code"},{"n":"span"},{"a":[["style","font-weight: bold"]],"x":"$","n":"span","l":" git mv README.md README\n"},{"a":[["style","font-weight: bold"]],"x":"$","n":"span","l":" git status\nOn branch master\nChanges to be committed:\n  (use \"git reset HEAD <file>...\" to unstage)\n\n    renamed:    README.md -> README"},{"a":[["class","source language-console"]],"n":"pre","l":"\n"},{"n":"code"},{"n":"span"},{"a":[["style","font-weight: bold"]],"x":"$","n":"span","l":" git mv file_from file_to"},{"a":[["class","literal"]],"x":"mv","n":"code","l":" 命令时一定会困惑不已。\n要在 Git 中对文件改名，可以这么做："},{"a":[["id","r_removing_files"]],"x":"移除文件","n":"h3","l":"\n"},{"x":"\n要从 Git 中移除某个文件，就必须要从已跟踪文件清单中移除（确切地说，是从暂存区域移除），然后提交。\n可以用 ","n":"p","l":"\n"},{"x":"如果只是简单地从工作目录中手工删除文件，运行 ","n":"p","l":"\n"},{"a":[["class","listing"]],"x":"\n","n":"figure","l":"\n"},{"x":"然后再运行 ","n":"p","l":"\n"},{"a":[["class","listing"]],"x":"\n","n":"figure","l":"\n"},{"x":"下一次提交时，该文件就不再纳入版本管理了。\n如果删除之前修改过并且已经放到暂存区域的话，则必须要用强制删除选项 ","n":"p","l":"\n"},{"x":"另外一种情况是，我们想把文件从 Git 仓库中删除（亦即从暂存区域移除），但仍然希望保留在当前工作目录中。\n换句话说，你想让文件保留在磁盘，但是并不想让 Git 继续跟踪。\n当你忘记添加 ","n":"p","l":"\n"},{"a":[["class","listing"]],"x":"\n","n":"figure","l":"\n"},{"n":"p","l":"\n"},{"a":[["class","listing"]],"x":"\n","n":"figure","l":"\n"},{"x":"注意到星号 ","n":"p","l":"\n"},{"a":[["class","listing"]],"x":"\n","n":"figure","l":"\n"},{"x":"该命令为删除以 ","n":"p","l":"\n"},{"a":[["class","literal"]],"x":"~","n":"code","l":" 结尾的所有文件。"},{"a":[["class","source language-console"]],"n":"pre","l":"\n"},{"n":"code"},{"n":"span"},{"a":[["style","font-weight: bold"]],"x":"$","n":"span","l":" git rm "},{"a":[["style","font-weight: bold; font-style: italic"]],"x":"\\*","n":"span","l":"~"},{"a":[["class","literal"]],"x":"*","n":"code","l":" 之前的反斜杠 "},{"a":[["class","literal"]],"x":"\\","n":"code","l":"，\n因为 Git 有它自己的文件模式扩展匹配方式，所以我们不用 shell 来帮忙展开。\n此命令删除 "},{"a":[["class","literal"]],"x":"log/","n":"code","l":" 目录下扩展名为 "},{"a":[["class","literal"]],"x":".log","n":"code","l":" 的所有文件。\n类似的比如："},{"a":[["class","source language-console"]],"n":"pre","l":"\n"},{"n":"code"},{"n":"span"},{"a":[["style","font-weight: bold"]],"x":"$","n":"span","l":" git rm log/"},{"a":[["style","font-weight: bold; font-style: italic"]],"x":"\\*","n":"span","l":".log"},{"a":[["class","literal"]],"x":"git rm","n":"code","l":" 命令后面可以列出文件或者目录的名字，也可以使用 "},{"a":[["class","literal"]],"x":"glob","n":"code","l":" 模式。\n比方说："},{"a":[["class","source language-console"]],"n":"pre","l":"\n"},{"n":"code"},{"n":"span"},{"a":[["style","font-weight: bold"]],"x":"$","n":"span","l":" git rm --cached README"},{"a":[["class","literal"]],"x":".gitignore","n":"code","l":" 文件，不小心把一个很大的日志文件或一堆 "},{"a":[["class","literal"]],"x":".a","n":"code","l":" 这样的编译生成文件添加到暂存区时，这一做法尤其有用。\n为达到这一目的，使用 "},{"a":[["class","literal"]],"x":"--cached","n":"code","l":" 选项："},{"a":[["class","literal"]],"x":"-f","n":"code","l":"（译注：即 force 的首字母）。\n这是一种安全特性，用于防止误删还没有添加到快照的数据，这样的数据不能被 Git 恢复。"},{"a":[["class","source language-console"]],"n":"pre","l":"\n"},{"n":"code"},{"n":"span"},{"a":[["style","font-weight: bold"]],"x":"$","n":"span","l":" git rm PROJECTS.md\nrm 'PROJECTS.md'\n"},{"a":[["style","font-weight: bold"]],"x":"$","n":"span","l":" git status\nOn branch master\nChanges to be committed:\n  (use \"git reset HEAD <file>...\" to unstage)\n\n    deleted:    PROJECTS.md"},{"a":[["class","literal"]],"x":"git rm","n":"code","l":" 记录此次移除文件的操作："},{"a":[["class","source language-console"]],"n":"pre","l":"\n"},{"n":"code"},{"n":"span"},{"a":[["style","font-weight: bold"]],"x":"$","n":"span","l":" rm PROJECTS.md\n"},{"a":[["style","font-weight: bold"]],"x":"$","n":"span","l":" git status\nOn branch master\nYour branch is up-to-date with 'origin/master'.\nChanges not staged for commit:\n  (use \"git add/rm <file>...\" to update what will be committed)\n  (use \"git checkout -- <file>...\" to discard changes in working directory)\n\n        deleted:    PROJECTS.md\n\nno changes added to commit (use \"git add\" and/or \"git commit -a\")"},{"a":[["class","literal"]],"x":"git status","n":"code","l":" 时就会在 “Changes not staged for commit” 部分（也就是 "},{"x":"未暂存清单","n":"em","l":"）看到："},{"a":[["class","literal"]],"x":"git rm","n":"code","l":" 命令完成此项工作，并连带从工作目录中删除指定的文件，这样以后就不会出现在未跟踪文件清单中了。"},{"a":[["id","_跳过使用暂存区域"]],"x":"跳过使用暂存区域","n":"h3","l":"\n"},{"x":"\n尽管使用暂存区域的方式可以精心准备要提交的细节，但有时候这么做略显繁琐。\nGit 提供了一个跳过使用暂存区域的方式，\n只要在提交的时候，给 ","n":"p","l":"\n"},{"a":[["class","listing"]],"x":"\n","n":"figure","l":"\n"},{"x":"看到了吗？提交之前不再需要 ","n":"p","l":"\n"},{"a":[["class","literal"]],"x":"git add","n":"code","l":" 文件“CONTRIBUTING.md”了。"},{"a":[["class","source language-console"]],"n":"pre","l":"\n"},{"n":"code"},{"n":"span"},{"a":[["style","font-weight: bold"]],"x":"$","n":"span","l":" git status\nOn branch master\nChanges not staged for commit:\n  (use \"git add <file>...\" to update what will be committed)\n  (use \"git checkout -- <file>...\" to discard changes in working directory)\n\n    modified:   CONTRIBUTING.md\n\nno changes added to commit (use \"git add\" and/or \"git commit -a\")\n"},{"a":[["style","font-weight: bold"]],"x":"$","n":"span","l":" git commit -a -m "},{"a":[["style","font-style: italic"]],"x":"'added new benchmarks'","n":"span","l":"\n[master 83e38c7] added new benchmarks\n 1 file changed, 5 insertions(+), 0 deletions(-)"},{"a":[["class","literal"]],"x":"git commit","n":"code","l":" 加上 "},{"a":[["class","literal"]],"x":"-a","n":"code","l":" 选项，Git 就会自动把所有已经跟踪过的文件暂存起来一并提交，从而跳过 "},{"a":[["class","literal"]],"x":"git add","n":"code","l":" 步骤："},{"a":[["id","r_committing_changes"]],"x":"提交更新","n":"h3","l":"\n"},{"x":"现在的暂存区域已经准备妥当可以提交了。\n在此之前，请一定要确认还有什么修改过的或新建的文件还没有 ","n":"p","l":"\n"},{"a":[["class","listing"]],"x":"\n","n":"figure","l":"\n"},{"x":"这种方式会启动文本编辑器以便输入本次提交的说明。\n(默认会启用 shell 的环境变量 ","n":"p","l":"\n"},{"x":"编辑器会显示类似下面的文本信息（本例选用 Vim 的屏显方式展示）：","n":"p","l":"\n"},{"a":[["class","listing"]],"x":"\n","n":"figure","l":"\n"},{"x":"可以看到，默认的提交消息包含最后一次运行 ","n":"p","l":"\n"},{"x":"另外，你也可以在 ","n":"p","l":"\n"},{"a":[["class","listing"]],"x":"\n","n":"figure","l":"\n"},{"x":"好，现在你已经创建了第一个提交！\n可以看到，提交后它会告诉你，当前是在哪个分支（","n":"p","l":"\n"},{"x":"请记住，提交时记录的是放在暂存区域的快照。\n任何还未暂存的仍然保持已修改状态，可以在下次提交时纳入版本管理。\n每一次运行提交操作，都是对你项目作一次快照，以后可以回到这个状态，或者进行比较。","n":"p","l":"\n"},{"a":[["class","literal"]],"x":"master","n":"code","l":"）提交的，本次提交的完整 SHA-1 校验和是什么（"},{"a":[["class","literal"]],"x":"463dc4f","n":"code","l":"），以及在本次提交中，有多少文件修订过，多少行添加和删改过。"},{"a":[["class","source language-console"]],"n":"pre","l":"\n"},{"n":"code"},{"n":"span"},{"a":[["style","font-weight: bold"]],"x":"$","n":"span","l":" git commit -m "},{"a":[["style","font-style: italic"]],"x":"\"Story 182: Fix benchmarks for speed\"","n":"span","l":"\n[master 463dc4f] Story 182: Fix benchmarks for speed\n 2 files changed, 2 insertions(+)\n create mode 100644 README"},{"a":[["class","literal"]],"x":"commit","n":"code","l":" 命令后添加 "},{"a":[["class","literal"]],"x":"-m","n":"code","l":" 选项，将提交信息与命令放在同一行，如下所示："},{"a":[["class","literal"]],"x":"git status","n":"code","l":" 的输出，放在注释行里，另外开头还有一空行，供你输入提交说明。\n你完全可以去掉这些注释行，不过留着也没关系，多少能帮你回想起这次更新的内容有哪些。\n(如果想要更详细的对修改了哪些内容的提示，可以用 "},{"a":[["class","literal"]],"x":"-v","n":"code","l":" 选项，这会将你所做的改变的 diff 输出放到编辑器中从而使你知道本次提交具体做了哪些修改。）\n退出编辑器时，Git 会丢掉注释行，用你输入提交附带信息生成一次提交。"},{"a":[["class","source language-"]],"n":"pre","l":"\n"},{"x":"# Please enter the commit message for your changes. Lines starting\n# with '#' will be ignored, and an empty message aborts the commit.\n# On branch master\n# Changes to be committed:\n#\tnew file:   README\n#\tmodified:   CONTRIBUTING.md\n#\n~\n~\n~\n\".git/COMMIT_EDITMSG\" 9L, 283C","n":"code"},{"a":[["class","literal"]],"x":"$EDITOR","n":"code","l":" 所指定的软件，一般都是 vim 或 emacs。当然也可以按照 "},{"a":[["id","xref--ch01-introduction"],["href","javascript:void(0)"],["class","xref"],["data-3JJgffKNGXxmBkDC5QJuPA","{\"name\": \"OEBPS/ch01-introduction.xhtml\", \"frag\": \"\"}"]],"x":"起步","n":"a","l":" 介绍的方式，使用 "},{"a":[["class","literal"]],"x":"git config --global core.editor","n":"code","l":" 命令设定你喜欢的编辑软件。）"},{"a":[["class","source language-console"]],"n":"pre","l":"\n"},{"n":"code"},{"n":"span"},{"a":[["style","font-weight: bold"]],"x":"$","n":"span","l":" git commit"},{"a":[["class","literal"]],"x":"git add","n":"code","l":" 过，否则提交的时候不会记录这些还没暂存起来的变化。\n这些修改过的文件只保留在本地磁盘。\n所以，每次准备提交前，先用 "},{"a":[["class","literal"]],"x":"git status","n":"code","l":" 看下，是不是都已暂存起来了，\n然后再运行提交命令 "},{"a":[["class","literal"]],"x":"git commit","n":"code","l":"："},{"a":[["id","r_git_diff_staged"]],"x":"查看已暂存和未暂存的修改","n":"h3","l":"\n"},{"x":"如果 ","n":"p","l":"\n"},{"x":"假如再次修改 README 文件后暂存，然后编辑 ","n":"p","l":"\n"},{"a":[["class","listing"]],"x":"\n","n":"figure","l":"\n"},{"x":"要查看尚未暂存的文件更新了哪些部分，不加参数直接输入 ","n":"p","l":"\n"},{"a":[["class","listing"]],"x":"\n","n":"figure","l":"\n"},{"x":"此命令比较的是工作目录中当前文件和暂存区域快照之间的差异，\n也就是修改之后还没有暂存起来的变化内容。","n":"p","l":"\n"},{"x":"若要查看已暂存的将要添加到下次提交里的内容，可以用 ","n":"p","l":"\n"},{"a":[["class","listing"]],"x":"\n","n":"figure","l":"\n"},{"x":"请注意，git diff 本身只显示尚未暂存的改动，而不是自上次提交以来所做的所有改动。\n所以有时候你一下子暂存了所有更新过的文件后，运行 ","n":"p","l":"\n"},{"x":"像之前说的，暂存 ","n":"p","l":"\n"},{"a":[["class","listing"]],"x":"\n","n":"figure","l":"\n"},{"x":"现在运行 ","n":"p","l":"\n"},{"a":[["class","listing"]],"x":"\n","n":"figure","l":"\n"},{"x":"然后用 ","n":"p","l":"\n"},{"a":[["class","listing"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","admonition note"],["title","Note: Git Diff 的插件版本"]],"x":"\n","n":"aside","l":"\n"},{"x":"Git Diff 的插件版本","n":"h2","l":"\n"},{"a":[["class","content"]],"x":"\n","n":"div","l":"\n"},{"x":"在本书中，我们使用 ","n":"p","l":"\n"},{"a":[["class","literal"]],"x":"git diff","n":"code","l":" 来分析文件差异。\n但是，如果你喜欢通过图形化的方式或其它格式输出方式的话，可以使用 "},{"a":[["class","literal"]],"x":"git difftool","n":"code","l":" 命令来用 Araxis ，emerge 或 vimdiff 等软件输出 diff 分析结果。\n使用 "},{"a":[["class","literal"]],"x":"git difftool --tool-help","n":"code","l":" 命令来看你的系统支持哪些 Git Diff 插件。"},{"a":[["class","source language-console"]],"n":"pre","l":"\n"},{"n":"code"},{"n":"span"},{"a":[["style","font-weight: bold"]],"x":"$","n":"span","l":" git diff --cached\ndiff --git a/CONTRIBUTING.md b/CONTRIBUTING.md\nindex 8ebb991..643e24f 100644\n--- a/CONTRIBUTING.md\n+++ b/CONTRIBUTING.md\n@@ -65,7 +65,8 @@ branch directly, things can get messy.\n Please include a nice description of your changes when you submit your PR;\n if we have to read the whole diff to figure out why you're contributing\n in the first place, you're less likely to get feedback and have your change\n-merged in.\n+merged in. Also, split your changes into comprehensive chunks if your patch is\n+longer than a dozen lines.\n\n If you are starting to work on a particular area, feel free to submit a PR\n that highlights your work in progress (and note in the PR title that it's"},{"a":[["class","literal"]],"x":"git diff --cached","n":"code","l":" 查看已经暂存起来的变化：（--staged 和 --cached 是同义词）"},{"a":[["class","source language-console"]],"n":"pre","l":"\n"},{"n":"code"},{"n":"span"},{"a":[["style","font-weight: bold"]],"x":"$","n":"span","l":" git diff\ndiff --git a/CONTRIBUTING.md b/CONTRIBUTING.md\nindex 643e24f..87f08c8 100644\n--- a/CONTRIBUTING.md\n+++ b/CONTRIBUTING.md\n@@ -119,3 +119,4 @@ at the\n"},{"a":[["style","font-weight: bold"]],"x":" #","n":"span"},{"a":[["style","font-style: italic"]],"x":"# Starter Projects","n":"span","l":"\n\n See our [projects list](https://github.com/libgit2/libgit2/blob/development/PROJECTS.md).\n+# test line"},{"a":[["class","literal"]],"x":"git diff","n":"code","l":" 看暂存前后的变化："},{"a":[["class","source language-console"]],"n":"pre","l":"\n"},{"n":"code"},{"n":"span"},{"a":[["style","font-weight: bold"]],"x":"$","n":"span","l":" git add CONTRIBUTING.md\n"},{"a":[["style","font-weight: bold"]],"x":"$","n":"span","l":" echo "},{"a":[["style","font-style: italic"]],"x":"'# test line'","n":"span","l":" >> CONTRIBUTING.md\n"},{"a":[["style","font-weight: bold"]],"x":"$","n":"span","l":" git status\nOn branch master\nChanges to be committed:\n  (use \"git reset HEAD <file>...\" to unstage)\n\n    modified:   CONTRIBUTING.md\n\nChanges not staged for commit:\n  (use \"git add <file>...\" to update what will be committed)\n  (use \"git checkout -- <file>...\" to discard changes in working directory)\n\n    modified:   CONTRIBUTING.md"},{"a":[["class","literal"]],"x":"CONTRIBUTING.md","n":"code","l":" 后再编辑，运行 "},{"a":[["class","literal"]],"x":"git status","n":"code","l":" 会看到暂存前后的两个版本。\n如果我们的环境（终端输出）看起来如下："},{"a":[["class","literal"]],"x":"git diff","n":"code","l":" 后却什么也没有，就是这个原因。"},{"a":[["class","source language-console"]],"n":"pre","l":"\n"},{"n":"code"},{"n":"span"},{"a":[["style","font-weight: bold"]],"x":"$","n":"span","l":" git diff --staged\ndiff --git a/README b/README\nnew file mode 100644\nindex 0000000..03902a1\n--- /dev/null\n+++ b/README\n@@ -0,0 +1 @@\n+My Project"},{"a":[["class","literal"]],"x":"git diff --cached","n":"code","l":" 命令。（Git 1.6.1 及更高版本还允许使用 "},{"a":[["class","literal"]],"x":"git diff --staged","n":"code","l":"，效果是相同的，但更好记些。）"},{"a":[["class","source language-console"]],"n":"pre","l":"\n"},{"n":"code"},{"n":"span"},{"a":[["style","font-weight: bold"]],"x":"$","n":"span","l":" git diff\ndiff --git a/CONTRIBUTING.md b/CONTRIBUTING.md\nindex 8ebb991..643e24f 100644\n--- a/CONTRIBUTING.md\n+++ b/CONTRIBUTING.md\n@@ -65,7 +65,8 @@ branch directly, things can get messy.\n Please include a nice description of your changes when you submit your PR;\n if we have to read the whole diff to figure out why you're contributing\n in the first place, you're less likely to get feedback and have your change\n-merged in.\n+merged in. Also, split your changes into comprehensive chunks if your patch is\n+longer than a dozen lines.\n\n If you are starting to work on a particular area, feel free to submit a PR\n that highlights your work in progress (and note in the PR title that it's"},{"a":[["class","literal"]],"x":"git diff","n":"code","l":"："},{"a":[["class","source language-console"]],"n":"pre","l":"\n"},{"n":"code"},{"n":"span"},{"a":[["style","font-weight: bold"]],"x":"$","n":"span","l":" git status\nOn branch master\nChanges to be committed:\n  (use \"git reset HEAD <file>...\" to unstage)\n\n    modified:   README\n\nChanges not staged for commit:\n  (use \"git add <file>...\" to update what will be committed)\n  (use \"git checkout -- <file>...\" to discard changes in working directory)\n\n    modified:   CONTRIBUTING.md"},{"a":[["class","literal"]],"x":"CONTRIBUTING.md","n":"code","l":" 文件后先不暂存，\n运行 "},{"a":[["class","literal"]],"x":"status","n":"code","l":" 命令将会看到："},{"a":[["class","literal"]],"x":"git status","n":"code","l":" 命令的输出对于你来说过于模糊，你想知道具体修改了什么地方，可以用 "},{"a":[["class","literal"]],"x":"git diff","n":"code","l":" 命令。\n稍后我们会详细介绍 "},{"a":[["class","literal"]],"x":"git diff","n":"code","l":"，你可能通常会用它来回答这两个问题：当前做的哪些更新还没有暂存？\n有哪些更新已经暂存起来准备好了下次提交？\n尽管 "},{"a":[["class","literal"]],"x":"git status","n":"code","l":" 已经通过在相应栏下列出文件名的方式回答了这个问题，"},{"a":[["class","literal"]],"x":"git diff","n":"code","l":" 将通过文件补丁的格式显示具体哪些行发生了改变。"},{"a":[["id","r_ignoring"]],"x":"忽略文件","n":"h3","l":"\n"},{"x":"一般我们总会有些文件无需纳入 Git 的管理，也不希望它们总出现在未跟踪文件列表。\n通常都是些自动生成的文件，比如日志文件，或者编译过程中创建的临时文件等。\n在这种情况下，我们可以创建一个名为 ","n":"p","l":"\n"},{"a":[["class","listing"]],"x":"\n","n":"figure","l":"\n"},{"x":"第一行告诉 Git 忽略所有以 ","n":"p","l":"\n"},{"x":"文件 ","n":"p","l":"\n"},{"a":[["class","itemized-list"]],"x":"\n","n":"div","l":"\n"},{"x":"所谓的 glob 模式是指 shell 所使用的简化了的正则表达式。\n星号（","n":"p","l":"\n"},{"x":"我们再看一个 .gitignore 文件的例子：","n":"p","l":"\n"},{"a":[["class","listing"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","admonition tip"],["title","Tip"],["role","doc-tip"]],"x":"\n","n":"aside","l":"\n"},{"a":[["class","content"]],"x":"\n","n":"div","l":"\n"},{"x":"GitHub 有一个十分详细的针对数十种项目及语言的 ","n":"p","l":"\n"},{"a":[["class","literal"]],"x":".gitignore","n":"code","l":" 文件列表，你可以在 "},{"a":[["href","https://github.com/github/gitignore"],["class","link"],["target","_blank"],["rel","noopener noreferrer"]],"x":"https://github.com/github/gitignore","n":"a","l":" 找到它."},{"a":[["class","source language-"]],"n":"pre","l":"\n"},{"x":"# no .a files\n*.a\n\n# but do track lib.a, even though you're ignoring .a files above\n!lib.a\n\n# only ignore the TODO file in the current directory, not subdir/TODO\n/TODO\n\n# ignore all files in the build/ directory\nbuild/\n\n# ignore doc/notes.txt, but not doc/server/arch.txt\ndoc/*.txt\n\n# ignore all .pdf files in the doc/ directory\ndoc/**/*.pdf","n":"code"},{"a":[["class","literal"]],"x":"*","n":"code","l":"）匹配零个或多个任意字符；"},{"a":[["class","literal"]],"x":"[abc]","n":"code","l":" 匹配任何一个列在方括号中的字符（这个例子要么匹配一个 a，要么匹配一个 b，要么匹配一个 c）；问号（"},{"a":[["class","literal"]],"x":"?","n":"code","l":"）只匹配一个任意字符；如果在方括号中使用短划线分隔两个字符，表示所有在这两个字符范围内的都可以匹配（比如 "},{"a":[["class","literal"]],"x":"[0-9]","n":"code","l":" 表示匹配所有 0 到 9 的数字）。\n使用两个星号（"},{"a":[["class","literal"]],"x":"*","n":"code","l":") 表示匹配任意中间目录，比如`a/**/z` 可以匹配 "},{"a":[["class","literal"]],"x":"a/z","n":"code","l":", "},{"a":[["class","literal"]],"x":"a/b/z","n":"code","l":" 或 `a/b/c/z`等。"},{"x":"\n","n":"ul","l":"\n"},{"x":"\n","n":"li","l":"\n"},{"x":"\n","n":"li","l":"\n"},{"x":"\n","n":"li","l":"\n"},{"x":"\n","n":"li","l":"\n"},{"x":"\n","n":"li","l":"\n"},{"a":[["class","principal"]],"x":"要忽略指定模式以外的文件或目录，可以在模式前加上惊叹号（","n":"span","l":"\n"},{"a":[["class","literal"]],"x":"!","n":"code","l":"）取反。"},{"a":[["class","principal"]],"x":"匹配模式可以以（","n":"span","l":"\n"},{"a":[["class","literal"]],"x":"/","n":"code","l":"）结尾指定目录。"},{"a":[["class","principal"]],"x":"匹配模式可以以（","n":"span","l":"\n"},{"a":[["class","literal"]],"x":"/","n":"code","l":"）开头防止递归。"},{"a":[["class","principal"]],"x":"可以使用标准的 glob 模式匹配。","n":"span","l":"\n"},{"a":[["class","principal"]],"x":"所有空行或者以 ","n":"span","l":"\n"},{"a":[["class","literal"]],"x":"＃","n":"code","l":" 开头的行都会被 Git 忽略。"},{"a":[["class","literal"]],"x":".gitignore","n":"code","l":" 的格式规范如下："},{"a":[["class","literal"]],"x":".o","n":"code","l":" 或 "},{"a":[["class","literal"]],"x":".a","n":"code","l":" 结尾的文件。一般这类对象文件和存档文件都是编译过程中出现的。\n第二行告诉 Git 忽略所有以波浪符（~）结尾的文件，许多文本编辑软件（比如 Emacs）都用这样的文件名保存副本。\n此外，你可能还需要忽略 log，tmp 或者 pid 目录，以及自动生成的文档等等。\n要养成一开始就设置好 .gitignore 文件的习惯，以免将来误提交这类无用的文件。"},{"a":[["class","source language-console"]],"n":"pre","l":"\n"},{"n":"code"},{"n":"span"},{"a":[["style","font-weight: bold"]],"x":"$","n":"span","l":" cat .gitignore\n*.[oa]\n*~"},{"a":[["class","literal"]],"x":".gitignore","n":"code","l":" 的文件，列出要忽略的文件模式。\n来看一个实际的例子："},{"a":[["id","_状态简览"]],"x":"状态简览","n":"h3","l":"\n"},{"n":"p","l":"\n"},{"a":[["class","listing"]],"x":"\n","n":"figure","l":"\n"},{"x":"新添加的未跟踪文件前面有 ","n":"p","l":"\n"},{"a":[["class","literal"]],"x":"??","n":"code","l":" 标记，新添加到暂存区中的文件前面有 "},{"a":[["class","literal"]],"x":"A","n":"code","l":" 标记，修改过的文件前面有 "},{"a":[["class","literal"]],"x":"M","n":"code","l":" 标记。\n你可能注意到了 "},{"a":[["class","literal"]],"x":"M","n":"code","l":" 有两个可以出现的位置，出现在右边的 "},{"a":[["class","literal"]],"x":"M","n":"code","l":" 表示该文件被修改了但是还没放入暂存区，出现在靠左边的 "},{"a":[["class","literal"]],"x":"M","n":"code","l":" 表示该文件被修改了并放入了暂存区。\n例如，上面的状态报告显示： "},{"a":[["class","literal"]],"x":"README","n":"code","l":" 文件在工作区被修改了但是还没有将修改后的文件放入暂存区,"},{"a":[["class","literal"]],"x":"lib/simplegit.rb","n":"code","l":" 文件被修改了并将修改后的文件放入了暂存区。\n而 "},{"a":[["class","literal"]],"x":"Rakefile","n":"code","l":" 在工作区被修改并提交到暂存区后又在工作区中被修改了，所以在暂存区和工作区都有该文件被修改了的记录。"},{"a":[["class","source language-console"]],"n":"pre","l":"\n"},{"n":"code"},{"n":"span"},{"a":[["style","font-weight: bold"]],"x":"$","n":"span","l":" git status -s\n M README\nMM Rakefile\nA  lib/git.rb\nM  lib/simplegit.rb\n?? LICENSE.txt"},{"a":[["class","literal"]],"x":"git status","n":"code","l":" 命令的输出十分详细，但其用语有些繁琐。\n如果你使用 "},{"a":[["class","literal"]],"x":"git status -s","n":"code","l":" 命令或 "},{"a":[["class","literal"]],"x":"git status --short","n":"code","l":" 命令，你将得到一种更为紧凑的格式输出。\n运行 "},{"a":[["class","literal"]],"x":"git status -s","n":"code","l":" ，状态报告输出如下："},{"a":[["id","_暂存已修改文件"]],"x":"暂存已修改文件","n":"h3","l":"\n"},{"x":"现在我们来修改一个已被跟踪的文件。\n如果你修改了一个名为 ","n":"p","l":"\n"},{"a":[["class","listing"]],"x":"\n","n":"figure","l":"\n"},{"x":"文件 ","n":"p","l":"\n"},{"a":[["class","listing"]],"x":"\n","n":"figure","l":"\n"},{"x":"现在两个文件都已暂存，下次提交时就会一并记录到仓库。\n假设此时，你想要在 ","n":"p","l":"\n"},{"a":[["class","listing"]],"x":"\n","n":"figure","l":"\n"},{"x":"怎么回事？\n现在 ","n":"p","l":"\n"},{"a":[["class","listing"]],"x":"\n","n":"figure","l":"\n"},{"a":[["class","source language-console"]],"n":"pre","l":"\n"},{"n":"code"},{"n":"span"},{"a":[["style","font-weight: bold"]],"x":"$","n":"span","l":" git add CONTRIBUTING.md\n"},{"a":[["style","font-weight: bold"]],"x":"$","n":"span","l":" git status\nOn branch master\nChanges to be committed:\n  (use \"git reset HEAD <file>...\" to unstage)\n\n    new file:   README\n    modified:   CONTRIBUTING.md"},{"a":[["class","literal"]],"x":"CONTRIBUTING.md","n":"code","l":" 文件同时出现在暂存区和非暂存区。\n这怎么可能呢？\n好吧，实际上 Git 只不过暂存了你运行 "},{"a":[["class","literal"]],"x":"git add","n":"code","l":" 命令时的版本，\n如果你现在提交，"},{"a":[["class","literal"]],"x":"CONTRIBUTING.md","n":"code","l":" 的版本是你最后一次运行 "},{"a":[["class","literal"]],"x":"git add","n":"code","l":" 命令时的那个版本，而不是你运行 "},{"a":[["class","literal"]],"x":"git commit","n":"code","l":" 时，在工作目录中的当前版本。\n所以，运行了 "},{"a":[["class","literal"]],"x":"git add","n":"code","l":" 之后又作了修订的文件，需要重新运行 "},{"a":[["class","literal"]],"x":"git add","n":"code","l":" 把最新版本重新暂存起来："},{"a":[["class","source language-console"]],"n":"pre","l":"\n"},{"n":"code"},{"n":"span"},{"a":[["style","font-weight: bold"]],"x":"$","n":"span","l":" vim CONTRIBUTING.md\n"},{"a":[["style","font-weight: bold"]],"x":"$","n":"span","l":" git status\nOn branch master\nChanges to be committed:\n  (use \"git reset HEAD <file>...\" to unstage)\n\n    new file:   README\n    modified:   CONTRIBUTING.md\n\nChanges not staged for commit:\n  (use \"git add <file>...\" to update what will be committed)\n  (use \"git checkout -- <file>...\" to discard changes in working directory)\n\n    modified:   CONTRIBUTING.md"},{"a":[["class","literal"]],"x":"CONTRIBUTING.md","n":"code","l":" 里再加条注释，\n重新编辑存盘后，准备好提交。\n不过且慢，再运行 "},{"a":[["class","literal"]],"x":"git status","n":"code","l":" 看看："},{"a":[["class","source language-console"]],"n":"pre","l":"\n"},{"n":"code"},{"n":"span"},{"a":[["style","font-weight: bold"]],"x":"$","n":"span","l":" git add CONTRIBUTING.md\n"},{"a":[["style","font-weight: bold"]],"x":"$","n":"span","l":" git status\nOn branch master\nChanges to be committed:\n  (use \"git reset HEAD <file>...\" to unstage)\n\n    new file:   README\n    modified:   CONTRIBUTING.md"},{"a":[["class","literal"]],"x":"CONTRIBUTING.md","n":"code","l":" 出现在 "},{"a":[["class","literal"]],"x":"Changes not staged for commit","n":"code","l":" 这行下面，说明已跟踪文件的内容发生了变化，但还没有放到暂存区。\n要暂存这次更新，需要运行 "},{"a":[["class","literal"]],"x":"git add","n":"code","l":" 命令。\n这是个多功能命令：可以用它开始跟踪新文件，或者把已跟踪的文件放到暂存区，还能用于合并时把有冲突的文件标记为已解决状态等。\n将这个命令理解为“添加内容到下一次提交中”而不是“将一个文件添加到项目中”要更加合适。\n现在让我们运行 "},{"a":[["class","literal"]],"x":"git add","n":"code","l":" 将\"CONTRIBUTING.md\"放到暂存区，然后再看看 "},{"a":[["class","literal"]],"x":"git status","n":"code","l":" 的输出："},{"a":[["class","source language-console"]],"n":"pre","l":"\n"},{"n":"code"},{"n":"span"},{"a":[["style","font-weight: bold"]],"x":"$","n":"span","l":" git status\nOn branch master\nChanges to be committed:\n  (use \"git reset HEAD <file>...\" to unstage)\n\n    new file:   README\n\nChanges not staged for commit:\n  (use \"git add <file>...\" to update what will be committed)\n  (use \"git checkout -- <file>...\" to discard changes in working directory)\n\n    modified:   CONTRIBUTING.md"},{"a":[["class","literal"]],"x":"CONTRIBUTING.md","n":"code","l":" 的已被跟踪的文件，然后运行 "},{"a":[["class","literal"]],"x":"git status","n":"code","l":" 命令，会看到下面内容："},{"a":[["id","r_tracking_files"]],"x":"跟踪新文件","n":"h3","l":"\n"},{"x":"使用命令 ","n":"p","l":"\n"},{"a":[["class","listing"]],"x":"\n","n":"figure","l":"\n"},{"x":"此时再运行 ","n":"p","l":"\n"},{"a":[["class","listing"]],"x":"\n","n":"figure","l":"\n"},{"x":"只要在 ","n":"p","l":"\n"},{"a":[["class","literal"]],"x":"Changes to be committed","n":"code","l":" 这行下面的，就说明是已暂存状态。\n如果此时提交，那么该文件此时此刻的版本将被留存在历史记录中。\n你可能会想起之前我们使用 "},{"a":[["class","literal"]],"x":"git init","n":"code","l":" 后就运行了 "},{"a":[["class","literal"]],"x":"git add (files)","n":"code","l":" 命令，开始跟踪当前目录下的文件。\n"},{"a":[["class","literal"]],"x":"git add","n":"code","l":" 命令使用文件或目录的路径作为参数；如果参数是目录的路径，该命令将递归地跟踪该目录下的所有文件。"},{"a":[["class","source language-console"]],"n":"pre","l":"\n"},{"n":"code"},{"n":"span"},{"a":[["style","font-weight: bold"]],"x":"$","n":"span","l":" git status\nOn branch master\nChanges to be committed:\n  (use \"git reset HEAD <file>...\" to unstage)\n\n    new file:   README"},{"a":[["class","literal"]],"x":"git status","n":"code","l":" 命令，会看到 README 文件已被跟踪，并处于暂存状态："},{"a":[["class","source language-console"]],"n":"pre","l":"\n"},{"n":"code"},{"n":"span"},{"a":[["style","font-weight: bold"]],"x":"$","n":"span","l":" git add README"},{"a":[["class","literal"]],"x":"git add","n":"code","l":" 开始跟踪一个文件。\n所以，要跟踪 README 文件，运行："},{"a":[["id","r_checking_status"]],"x":"检查当前文件状态","n":"h3","l":"\n"},{"x":"要查看哪些文件处于什么状态，可以用 ","n":"p","l":"\n"},{"a":[["class","listing"]],"x":"\n","n":"figure","l":"\n"},{"x":"这说明你现在的工作目录相当干净。换句话说，所有已跟踪文件在上次提交后都未被更改过。\n此外，上面的信息还表明，当前目录下没有出现任何处于未跟踪状态的新文件，否则 Git 会在这里列出来。\n最后，该命令还显示了当前所在分支，并告诉你这个分支同远程服务器上对应的分支没有偏离。\n现在，分支名是 “master”,这是默认的分支名。\n我们在 ","n":"p","l":"\n"},{"x":"现在，让我们在项目下创建一个新的 README 文件。\n如果之前并不存在这个文件，使用 ","n":"p","l":"\n"},{"a":[["class","listing"]],"x":"\n","n":"figure","l":"\n"},{"x":"在状态报告中可以看到新建的 README 文件出现在 ","n":"p","l":"\n"},{"a":[["class","literal"]],"x":"Untracked files","n":"code","l":" 下面。\n未跟踪的文件意味着 Git 在之前的快照（提交）中没有这些文件；Git 不会自动将之纳入跟踪范围，除非你明明白白地告诉它“我需要跟踪该文件”，\n这样的处理让你不必担心将生成的二进制文件或其它不想被跟踪的文件包含进来。\n不过现在的例子中，我们确实想要跟踪管理 README 这个文件。"},{"a":[["class","source language-console"]],"n":"pre","l":"\n"},{"n":"code"},{"n":"span"},{"a":[["style","font-weight: bold"]],"x":"$","n":"span","l":" echo "},{"a":[["style","font-style: italic"]],"x":"'My Project'","n":"span","l":" > README\n"},{"a":[["style","font-weight: bold"]],"x":"$","n":"span","l":" git status\nOn branch master\nUntracked files:\n  (use \"git add <file>...\" to include in what will be committed)\n\n    README\n\nnothing added to commit but untracked files present (use \"git add\" to track)"},{"a":[["class","literal"]],"x":"git status","n":"code","l":" 命令，你将看到一个新的未跟踪文件："},{"a":[["id","xref--ch03-git-branching"],["href","javascript:void(0)"],["class","xref"],["data-3JJgffKNGXxmBkDC5QJuPA","{\"name\": \"OEBPS/ch03-git-branching.xhtml\", \"frag\": \"\"}"]],"x":"Git 分支","n":"a","l":"  会详细讨论分支和引用。"},{"a":[["class","source language-console"]],"n":"pre","l":"\n"},{"n":"code"},{"n":"span"},{"a":[["style","font-weight: bold"]],"x":"$","n":"span","l":" git status\nOn branch master\nnothing to commit, working directory clean"},{"a":[["class","literal"]],"x":"git status","n":"code","l":" 命令。\n如果在克隆仓库后立即使用此命令，会看到类似这样的输出："},{"a":[["class","content"]],"x":"\n","n":"div","l":"\n"},{"x":"Figure 1. 文件的状态变化周期","n":"figcaption","l":"\n"},{"a":[["src","3JJgffKNGXxmBkDC5QJuPA|T0VCUFMvaW1hZ2VzL2xpZmVjeWNsZS5wbmc=|"],["alt","Git 下文件生命周期图。"],["data-calibre-src","OEBPS/images/lifecycle.png"]],"n":"img","l":"\n"},{"a":[["id","r_getting_a_repo"]],"x":"获取 Git 仓库","n":"h2","l":"\n"},{"x":"有两种取得 Git 项目仓库的方法。\n第一种是在现有项目或目录下导入所有文件到 Git 中；\n第二种是从一个服务器克隆一个现有的 Git 仓库。","n":"p","l":"\n"},{"a":[["class","sect2"],["title","在现有目录中初始化仓库"]],"x":"\n","n":"section","l":"\n"},{"a":[["class","sect2"],["title","克隆现有的仓库"]],"x":"\n","n":"section","l":"\n"},{"a":[["id","r_git_cloning"]],"x":"克隆现有的仓库","n":"h3","l":"\n"},{"x":"如果你想获得一份已经存在了的 Git 仓库的拷贝，比如说，你想为某个开源项目贡献自己的一份力，这时就要用到 ","n":"p","l":"\n"},{"x":"克隆仓库的命令格式是 ","n":"p","l":"\n"},{"a":[["class","listing"]],"x":"\n","n":"figure","l":"\n"},{"x":"这会在当前目录下创建一个名为 “libgit2” 的目录，并在这个目录下初始化一个 ","n":"p","l":"\n"},{"a":[["class","listing"]],"x":"\n","n":"figure","l":"\n"},{"x":"这将执行与上一个命令相同的操作，不过在本地创建的仓库名字变为 ","n":"p","l":"\n"},{"x":"Git 支持多种数据传输协议。\n上面的例子使用的是 ","n":"p","l":"\n"},{"a":[["class","literal"]],"x":"https://","n":"code","l":" 协议，不过你也可以使用 "},{"a":[["class","literal"]],"x":"git://","n":"code","l":" 协议或者使用 SSH 传输协议，比如 "},{"a":[["class","literal"]],"x":"user@server:path/to/repo.git","n":"code","l":" 。\n"},{"a":[["href","javascript:void(0)"],["class","xref"],["data-3JJgffKNGXxmBkDC5QJuPA","{\"name\": \"OEBPS/ch04-git-server.xhtml\", \"frag\": \"r_git_on_the_server\"}"]],"x":"在服务器上搭建 Git","n":"a","l":" 将会介绍所有这些协议在服务器端如何配置使用，以及各种方式之间的利弊。"},{"a":[["class","literal"]],"x":"mylibgit","n":"code","l":"。"},{"a":[["class","source language-console"]],"n":"pre","l":"\n"},{"n":"code"},{"n":"span"},{"a":[["style","font-weight: bold"]],"x":"$","n":"span","l":" git clone https://github.com/libgit2/libgit2 mylibgit"},{"a":[["class","literal"]],"x":".git","n":"code","l":" 文件夹，从远程仓库拉取下所有数据放入 "},{"a":[["class","literal"]],"x":".git","n":"code","l":" 文件夹，然后从中读取最新版本的文件的拷贝。\n如果你进入到这个新建的 "},{"a":[["class","literal"]],"x":"libgit2","n":"code","l":" 文件夹，你会发现所有的项目文件已经在里面了，准备就绪等待后续的开发和使用。\n如果你想在克隆远程仓库的时候，自定义本地仓库的名字，你可以使用如下命令："},{"a":[["class","source language-console"]],"n":"pre","l":"\n"},{"n":"code"},{"n":"span"},{"a":[["style","font-weight: bold"]],"x":"$","n":"span","l":" git clone https://github.com/libgit2/libgit2"},{"a":[["class","literal"]],"x":"git clone [url]","n":"code","l":" 。\n比如，要克隆 Git 的可链接库 libgit2，可以用下面的命令："},{"a":[["class","literal"]],"x":"git clone","n":"code","l":" 命令。\n如果你对其它的 VCS 系统（比如说Subversion）很熟悉，请留心一下你所使用的命令是\"clone\"而不是\"checkout\"。\n这是 Git 区别于其它版本控制系统的一个重要特性，Git 克隆的是该 Git 仓库服务器上的几乎所有数据，而不是仅仅复制完成你的工作所需要文件。\n当你执行 "},{"a":[["class","literal"]],"x":"git clone","n":"code","l":" 命令的时候，默认配置下远程 Git 仓库中的每一个文件的每一个版本都将被拉取下来。\n事实上，如果你的服务器的磁盘坏掉了，你通常可以使用任何一个克隆下来的用户端来重建服务器上的仓库（虽然可能会丢失某些服务器端的挂钩设置，但是所有版本的数据仍在，详见 "},{"a":[["id","xref--ch04-git-server--r_git_on_the_server"],["href","javascript:void(0)"],["class","xref"],["data-3JJgffKNGXxmBkDC5QJuPA","{\"name\": \"OEBPS/ch04-git-server.xhtml\", \"frag\": \"r_git_on_the_server\"}"]],"x":"在服务器上搭建 Git","n":"a","l":" ）。"},{"a":[["id","_在现有目录中初始化仓库"]],"x":"在现有目录中初始化仓库","n":"h3","l":"\n"},{"x":"如果你打算使用 Git 来对现有的项目进行管理，你只需要进入该项目目录并输入：","n":"p","l":"\n"},{"a":[["class","listing"]],"x":"\n","n":"figure","l":"\n"},{"x":"该命令将创建一个名为 ","n":"p","l":"\n"},{"x":"如果你是在一个已经存在文件的文件夹（而不是空文件夹）中初始化 Git 仓库来进行版本控制的话，你应该开始跟踪这些文件并提交。\n你可通过 ","n":"p","l":"\n"},{"a":[["class","listing"]],"x":"\n","n":"figure","l":"\n"},{"x":"稍后我们再逐一解释每一条指令的意思。\n现在，你已经得到了一个实际维护（或者说是跟踪）着若干个文件的 Git 仓库。","n":"p","l":"\n"},{"a":[["class","source language-console"]],"n":"pre","l":"\n"},{"n":"code"},{"n":"span"},{"a":[["style","font-weight: bold"]],"x":"$","n":"span","l":" git add *.c\n"},{"a":[["style","font-weight: bold"]],"x":"$","n":"span","l":" git add LICENSE\n"},{"a":[["style","font-weight: bold"]],"x":"$","n":"span","l":" git commit -m "},{"a":[["style","font-style: italic"]],"x":"'initial project version'","n":"span"},{"a":[["class","literal"]],"x":"git add","n":"code","l":" 命令来实现对指定文件的跟踪，然后执行 "},{"a":[["class","literal"]],"x":"git commit","n":"code","l":" 提交："},{"a":[["class","literal"]],"x":".git","n":"code","l":" 的子目录，这个子目录含有你初始化的 Git 仓库中所有的必须文件，这些文件是 Git 仓库的骨干。\n但是，在这个时候，我们仅仅是做了一个初始化的操作，你的项目里的文件还没有被跟踪。\n(参见 "},{"a":[["id","xref--ch10-git-internals"],["href","javascript:void(0)"],["class","xref"],["data-3JJgffKNGXxmBkDC5QJuPA","{\"name\": \"OEBPS/ch10-git-internals.xhtml\", \"frag\": \"\"}"]],"x":"Git 内部原理","n":"a","l":" 来了解更多关于到底 "},{"a":[["class","literal"]],"x":".git","n":"code","l":" 文件夹中包含了哪些文件的信息。)"},{"a":[["class","source language-console"]],"n":"pre","l":"\n"},{"n":"code"},{"n":"span"},{"a":[["style","font-weight: bold"]],"x":"$","n":"span","l":" git init"},{"x":"假如你只能阅读一章来学习 Git，本章就是你的不二选择。\n本章内容涵盖你在使用 Git 完成各种工作中将要使用的各种基本命令。\n在学习完本章之后，你应该能够配置并初始化一个仓库（repository）、开始或停止跟踪（track）文件、暂存（stage）或提交（commit)更改。\n本章也将向你演示如何配置 Git 来忽略指定的文件和文件模式、如何迅速而简单地撤销错误操作、如何浏览你的项目的历史版本以及不同提交（commits）间的差异、如何向你的远程仓库推送（push）以及如何从你的远程仓库拉取（pull）文件。","n":"p","l":"\n"},{"a":[["class","chapter-header"]],"x":"\n","n":"div","l":"\n"},{"a":[["class","chapter-title"]],"n":"h1","l":"\n"},{"a":[["class","subtitle"]],"n":"small"},{"x":"Git","n":"b","l":" "},{"x":"基础","n":"b"},{"x":"Git 基础","n":"title","l":"\n"},{"a":[["rel","stylesheet"],["type","text/css"],["href","3JJgffKNGXxmBkDC5QJuPA|T0VCUFMvc3R5bGVzL2VwdWIzLmNzcw==|"]],"n":"link","l":"\n"},{"a":[["rel","stylesheet"],["type","text/css"],["href","3JJgffKNGXxmBkDC5QJuPA|T0VCUFMvc3R5bGVzL2VwdWIzLWNzczMtb25seS5jc3M=|"],["media","(min-device-width: 0px)"]],"n":"link","l":"\n"},{"a":[["type","text/javascript"]],"x":"\ndocument.addEventListener('DOMContentLoaded', function(event, reader) {\n  if (!(reader = navigator.epubReadingSystem)) {\n    if (navigator.userAgent.indexOf(' calibre/') >= 0) reader = { name: 'calibre-desktop' };\n    else if (window.parent == window || !(reader = window.parent.navigator.epubReadingSystem)) return;\n  }\n  document.body.setAttribute('class', reader.name.toLowerCase().replace(/ /g, '-'));\n});\n","n":"script","l":"\n"}]}